<process name="create_external_user" version="1.0" bpversion="6.11.0.35006" narrative="" byrefcollection="true" preferredid="6f048e4f-19a3-478f-a6fe-cb472088d359" published="true">
  <view>
    <camerax>64</camerax>
    <cameray>73</cameray>
    <zoom version="2">1.25</zoom>
  </view>
  <preconditions />
  <endpoint narrative="" />
  <subsheet subsheetid="48b29800-de97-456a-a927-62e219f436f7" type="Normal" published="False">
    <name>Setup</name>
    <view>
      <camerax>0</camerax>
      <cameray>282</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="224e0aa7-926b-4db0-aadd-f92812c3053e" type="Normal" published="False">
    <name>Create User </name>
    <view>
      <camerax>-86</camerax>
      <cameray>288</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="6e377875-e7dd-430c-9eea-908c7a9069b8" type="Normal" published="False">
    <name>Audit Log</name>
    <view>
      <camerax>0</camerax>
      <cameray>234</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="1ee18315-aa52-4a5f-b5c2-90c8387385be" type="Normal" published="False">
    <name>Add to Cleanup</name>
    <view>
      <camerax>0</camerax>
      <cameray>-3</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="d372b0e7-9acf-4b1d-90a6-c443b83be5ab" type="Normal" published="False">
    <name>Cleanup</name>
    <view>
      <camerax>15</camerax>
      <cameray>109</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <stage stageid="3c0acf26-3657-46fa-8401-1211c37b63c6" name="Start" type="Start">
    <display x="15" y="-165" />
    <onsuccess>45b96290-e03e-487c-819e-d8f779a78edc</onsuccess>
  </stage>
  <stage stageid="9c8fce79-6557-4be9-b5ad-c5700a4e4547" name="End" type="End">
    <display x="15" y="270" />
  </stage>
  <stage stageid="fc0e2e87-80a2-42bc-9b65-5eac31b71491" name="Stage1" type="ProcessInfo">
    <display x="-225" y="-135" w="150" h="90" />
  </stage>
  <stage stageid="8bd84bef-c7d6-4da6-b3b7-cd43075d849d" name="Create User " type="SubSheetInfo">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="-135" y="-195" w="150" h="90" />
  </stage>
  <stage stageid="1ba03a9d-deca-4022-a1ea-028d4688d511" name="Start" type="Start">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="15" y="-225" w="90" h="30" />
    <onsuccess>1314ad28-762c-4839-aaa9-183908acde4c</onsuccess>
  </stage>
  <stage stageid="7393f7dc-9e3c-4c77-b5b4-17fb69f487d7" name="End" type="End">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="15" y="540" />
  </stage>
  <stage stageid="68dd2f9f-6f8a-4276-ac62-8bb20306dfdf" name="Create User " type="SubSheet">
    <loginhibit onsuccess="true" />
    <display x="15" y="30" w="270" h="30" />
    <onsuccess>4afca6ca-2334-4a2f-a802-77d449394ae9</onsuccess>
    <processid>224e0aa7-926b-4db0-aadd-f92812c3053e</processid>
  </stage>
  <stage stageid="e15d9620-e8a7-4b38-8d24-3aad1d72deae" name="Select Roles" type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="0" w="120" h="30" />
    <inputs>
      <input type="collection" name="Role" friendlyname="Role" narrative="A collection of roles you want to give the user." expr="[Roles]" />
    </inputs>
    <onsuccess>f8e0b320-25d2-4b31-9ea9-4ef99b89b6fa</onsuccess>
    <resource object="Blue Prism - System - Security" action="User Wizard - Select Roles" />
  </stage>
  <stage stageid="e78ad26a-3922-4eff-aee5-1e45ae71bbf4" name="Roles" type="Collection">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="-135" y="-105" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
    <collectioninfo>
      <field name="Role" type="text" />
    </collectioninfo>
    <initialvalue>
      <row>
        <field name="Role" type="text" value="Testers" />
      </row>
      <row>
        <field name="Role" type="text" value="Developers" />
      </row>
    </initialvalue>
  </stage>
  <stage stageid="a2518020-5e69-479f-96fa-1186f350c60c" name="Local Variables" type="Block">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-210" y="-135" w="150" h="270" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="f8e0b320-25d2-4b31-9ea9-4ef99b89b6fa" name="Press Next" type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="45" w="120" h="30" />
    <onsuccess>f096cbb7-b57b-4ac1-b6c7-a70219cd4006</onsuccess>
    <resource object="Blue Prism - System - Security" action="User Wizard - Press Next" />
  </stage>
  <stage stageid="65170ce0-879f-4a99-abcc-a28d43e61af8" name="Audit Log" type="SubSheetInfo">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <display x="-120" y="15" w="150" h="90" />
  </stage>
  <stage stageid="091cd4f7-9f05-4e80-b5df-da36e40f021f" name="Start" type="Start">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <display x="15" y="-15" w="90" h="30" />
    <onsuccess>f1ac5312-69a1-44f9-97b2-e48450fc4692</onsuccess>
  </stage>
  <stage stageid="68b99dbb-5302-41d2-95b9-78f5d0c01b95" name="End" type="End">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <display x="15" y="480" w="90" h="30" />
  </stage>
  <stage stageid="f1ac5312-69a1-44f9-97b2-e48450fc4692" name="Browse to Audit Log" type="Action">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="30" w="90" h="30" />
    <inputs>
      <input type="text" name="Tree Name" friendlyname="Tree Name" narrative="Name of the tree to be extended." expr="&quot;Audit&quot;" />
      <input type="text" name="Item Name" friendlyname="Item Name" narrative="Name of the item to be clicked on." expr="&quot;Audit Logs&quot;" />
      <input type="text" name="Sub Item Name" friendlyname="Sub Item Name" narrative="Name of the sub item to be clicked on." expr="" />
      <input type="flag" name="Select Item Method?" friendlyname="Select Item Method?" narrative="True by Default. Selects the node from system tab using Select Item approach. If the node is not available (Greyed out) an exception will be thrown. Use this method if you are certain the node is available for selection." expr="" />
      <input type="flag" name="Retry MouseClick?" friendlyname="Retry MouseClick?" narrative="Default to True. Retries Global Mouse Click up to 3 times." expr="" />
      <input type="flag" name="Clean Up?" friendlyname="Clean Up?" narrative="False by Default. Set True if clean up is required at the beginning of the Action." expr="" />
    </inputs>
    <onsuccess>2fdf1c19-65a7-4c04-8c44-2ac8168619ba</onsuccess>
    <resource object="Blue Prism - System - Basic Actions" action="Click Item From System Tree" />
  </stage>
  <stage stageid="2fdf1c19-65a7-4c04-8c44-2ac8168619ba" name="Get Audit Log " type="Action">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="75" w="90" h="30" />
    <inputs>
      <input type="date" name="Audit Date" friendlyname="Audit Date" narrative="Date for the Audit to View" expr="Today()" />
    </inputs>
    <outputs>
      <output type="collection" name="Audit Log Table" friendlyname="Audit Log Table" narrative="Contents of the Audit Log Viewer" stage="Audit Log Table" />
    </outputs>
    <onsuccess>fbdc932f-c5ed-4071-ba56-672c23cc9d73</onsuccess>
    <resource object="Blue Prism - System - Audit" action="Get View Log Content for Audit Log" />
  </stage>
  <stage stageid="2958906e-4626-4fc9-88b0-3b5c759a3d85" name="Audit Log" type="SubSheet">
    <loginhibit onsuccess="true" />
    <display x="15" y="120" w="270" h="30" />
    <onsuccess>79de41a6-85a3-4516-bd2f-34bc9585198e</onsuccess>
    <processid>6e377875-e7dd-430c-9eea-908c7a9069b8</processid>
  </stage>
  <stage stageid="2e4af402-e97b-4237-8eff-8b40a1897cef" name="BluePrism PID" type="Data">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="-135" y="-75" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <alwaysinit />
  </stage>
  <stage stageid="446d4894-1f89-483c-91cb-f9e9113bd086" name="Setup" type="SubSheetInfo">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <display x="-120" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="34b49b9d-baa7-447a-a2c2-d6f08592325d" name="Start" type="Start">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <display x="30" y="-135" />
    <onsuccess>5fbec37a-e94d-4565-a875-34b7249f575a</onsuccess>
  </stage>
  <stage stageid="b7c4885b-3eae-4537-bdc5-a621f53ffa2c" name="End" type="End">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <display x="30" y="540" />
  </stage>
  <stage stageid="f2667a80-3631-4832-b500-1ae35e100d41" name="Setup" type="SubSheet">
    <loginhibit onsuccess="true" />
    <display x="15" y="-60" w="270" h="30" />
    <onsuccess>2d3bf6fb-5dc7-4d9c-befe-ced88f7fabdf</onsuccess>
    <processid>48b29800-de97-456a-a927-62e219f436f7</processid>
  </stage>
  <stage stageid="fbdc932f-c5ed-4071-ba56-672c23cc9d73" name="Audit Log Loop" type="LoopStart">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="120" w="90" h="30" />
    <onsuccess>47a5a36a-1f56-45ae-bbda-7b24ac378a84</onsuccess>
    <groupid>f8eb7fab-2084-4d3f-8853-6f214f0dd984</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Audit Log Table</loopdata>
  </stage>
  <stage stageid="8ac858ea-a54d-49a4-af79-0e09a9e4a8d1" name="Audit Log Loop" type="LoopEnd">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="255" w="90" h="30" />
    <onsuccess>ca1aad05-5276-4292-9452-4e5542a7c626</onsuccess>
    <groupid>f8eb7fab-2084-4d3f-8853-6f214f0dd984</groupid>
  </stage>
  <stage stageid="fa735919-15a6-44da-aa21-f17405c84680" name="Audit Log Table" type="Collection">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <display x="-120" y="255" w="120" h="30" />
    <datatype>collection</datatype>
    <alwaysinit />
  </stage>
  <stage stageid="d3630371-70bf-4e58-9bd6-3def3ace3e96" name="Local Variable" type="Block">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-195" y="225" w="150" h="90" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="8736bba6-c5d0-4ee0-8dd9-b036bb591b7d" name="Input Variables" type="Block">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-195" y="90" w="150" h="105" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="47a5a36a-1f56-45ae-bbda-7b24ac378a84" name="Cast Time" type="Calculation">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="165" w="90" h="30" />
    <onsuccess>32c31bad-f814-41ae-954e-8f42161a90c6</onsuccess>
    <calculation expression="[Audit Log Table.Time (Local)]" stage="Audit Time" />
  </stage>
  <stage stageid="32c31bad-f814-41ae-954e-8f42161a90c6" name="Audit Entry Present" type="Decision">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <display x="15" y="210" w="90" h="30" />
    <decision expression="[Audit Log Table.Narrative]=[Narrative 1]&#xA;AND&#xA;[Audit Time]&gt;=[Time]" />
    <ontrue>2082c45c-06fe-4610-9ebe-a3bcf2859d60</ontrue>
    <onfalse>8ac858ea-a54d-49a4-af79-0e09a9e4a8d1</onfalse>
  </stage>
  <stage stageid="2082c45c-06fe-4610-9ebe-a3bcf2859d60" name="Anchor1" type="Anchor">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="210" w="10" h="10" />
    <onsuccess>f4b7219b-bae7-4bd3-b1de-2886b90f1be3</onsuccess>
  </stage>
  <stage stageid="7b5e15b3-8949-4330-a1cb-45b35f205c19" name="Audit Time" type="Data">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <display x="-120" y="285" w="120" h="30" />
    <datatype>time</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="705ec858-2a8d-4a97-b111-78635d8da6d4" name="Narrative 1" type="Data">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-120" y="120" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">The user 'admin' created a new user with name 'Test1(TFM-176-Z)'</initialvalue>
    <alwaysinit />
  </stage>
  <stage stageid="3eadb6ff-6e9b-4b79-a72e-314ebac92a9d" name="Narrative 2" type="Data">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-120" y="165" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">The user 'admin' mapped the account of user 'Test1(TFM-176-Z)' to the external identity 'External test1(TFM-176-Z)'</initialvalue>
    <alwaysinit />
  </stage>
  <stage stageid="1314ad28-762c-4839-aaa9-183908acde4c" name="Get Time" type="Calculation">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="15" y="-180" w="120" h="30" />
    <onsuccess>f82eb39c-a2c5-447a-b963-a8990d124e82</onsuccess>
    <calculation expression="UTCTime()" stage="Time" />
  </stage>
  <stage stageid="ba5ee49d-c442-46a1-b79f-d17e75edba6b" name="Time" type="Data">
    <display x="-225" y="-45" w="120" h="30" />
    <datatype>time</datatype>
    <initialvalue />
    <alwaysinit />
  </stage>
  <stage stageid="0f5ff72b-1f72-4398-934c-ec25cc080480" name="Global Variable" type="Block">
    <loginhibit onsuccess="true" />
    <display x="-300" y="-75" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="f4b7219b-bae7-4bd3-b1de-2886b90f1be3" name="Anchor4" type="Anchor">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="300" w="10" h="10" />
    <onsuccess>b800f4d6-f61f-41cd-8c74-6ee4d4df7fc4</onsuccess>
  </stage>
  <stage stageid="b800f4d6-f61f-41cd-8c74-6ee4d4df7fc4" name="Audit Log Loop" type="LoopStart">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="300" w="90" h="30" />
    <onsuccess>33f0f05c-63c2-45ce-ad06-2b08866b7d48</onsuccess>
    <groupid>a967342f-02d1-4d55-b546-c94b0a7f439f</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Audit Log Table</loopdata>
  </stage>
  <stage stageid="e3ae0a18-40d5-4feb-90ef-dc28d11ce9af" name="Audit Log Loop" type="LoopEnd">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="435" w="90" h="30" />
    <onsuccess>e96adcca-460c-4129-8f4d-c4b3ca36ffa9</onsuccess>
    <groupid>a967342f-02d1-4d55-b546-c94b0a7f439f</groupid>
  </stage>
  <stage stageid="225273af-6a00-4793-8792-5432f0ae718c" name="Anchor1" type="Anchor">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="390" w="10" h="10" />
    <onsuccess>dfc9adcb-c799-4ae1-9302-dac724a2c6ed</onsuccess>
  </stage>
  <stage stageid="dfc9adcb-c799-4ae1-9302-dac724a2c6ed" name="Anchor4" type="Anchor">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="480" w="10" h="10" />
    <onsuccess>68b99dbb-5302-41d2-95b9-78f5d0c01b95</onsuccess>
  </stage>
  <stage stageid="ca1aad05-5276-4292-9452-4e5542a7c626" name="FAIL" type="Exception">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <display x="90" y="255" w="30" h="30" />
    <exception localized="yes" type="" detail="&quot;Audit narrative not found: &quot;&amp;[Narrative 1]" />
  </stage>
  <stage stageid="e96adcca-460c-4129-8f4d-c4b3ca36ffa9" name="Fail" type="Exception">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <display x="90" y="435" w="30" h="30" />
    <exception localized="yes" type="missing exception" detail="&quot;Audit narrative not found: &quot;&amp;[Narrative 2]" />
  </stage>
  <stage stageid="33f0f05c-63c2-45ce-ad06-2b08866b7d48" name="Cast Time" type="Calculation">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="345" w="90" h="30" />
    <onsuccess>4195123d-497e-407d-9c5f-eadb7dc84835</onsuccess>
    <calculation expression="[Audit Log Table.Time (Local)]" stage="Audit Time" />
  </stage>
  <stage stageid="4195123d-497e-407d-9c5f-eadb7dc84835" name="Audit Entry Present" type="Decision">
    <subsheetid>6e377875-e7dd-430c-9eea-908c7a9069b8</subsheetid>
    <display x="15" y="390" w="90" h="30" />
    <decision expression="[Audit Log Table.Narrative]=[Narrative 2]&#xA;AND&#xA;[Audit Time]&gt;=[Time]" />
    <ontrue>225273af-6a00-4793-8792-5432f0ae718c</ontrue>
    <onfalse>e3ae0a18-40d5-4feb-90ef-dc28d11ce9af</onfalse>
  </stage>
  <stage stageid="45b96290-e03e-487c-819e-d8f779a78edc" name="Note1" type="Note">
    <narrative>GIVEN that Blue Prism is configurated to work with Enternal Providers</narrative>
    <display x="15" y="-105" w="270" h="30" />
    <onsuccess>f2667a80-3631-4832-b500-1ae35e100d41</onsuccess>
  </stage>
  <stage stageid="2d3bf6fb-5dc7-4d9c-befe-ced88f7fabdf" name="Note2" type="Note">
    <narrative>WHEN I create a user using the external provider wizard
THEN an external user is created</narrative>
    <display x="15" y="-15" w="270" h="30" />
    <onsuccess>68dd2f9f-6f8a-4276-ac62-8bb20306dfdf</onsuccess>
  </stage>
  <stage stageid="4afca6ca-2334-4a2f-a802-77d449394ae9" name="Note3" type="Note">
    <narrative>WHEN the external user has been created
THEN the appropriate audit logs are generated</narrative>
    <display x="15" y="75" w="270" h="30" />
    <onsuccess>2958906e-4626-4fc9-88b0-3b5c759a3d85</onsuccess>
  </stage>
  <stage stageid="5fbec37a-e94d-4565-a875-34b7249f575a" name="Launch BP" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <display x="30" y="-90" w="120" h="30" />
    <outputs>
      <output type="number" name="pid" narrative="PID of the process" stage="BluePrism PID" />
    </outputs>
    <onsuccess>8ca7ef73-c2ed-4130-9579-d43daa154eab</onsuccess>
    <resource object="Blue Prism" action="Launch and Get PID" />
  </stage>
  <stage stageid="cacf3b73-7722-4f92-8133-d5fd9df42169" name="Attach System" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <display x="30" y="0" w="120" h="30" />
    <inputs>
      <input type="number" name="pid" narrative="PID to attach to" expr="[BluePrism PID]" />
    </inputs>
    <onsuccess>09a96453-acbf-42c0-834e-97f39be65213</onsuccess>
    <resource object="Blue Prism - System (Parent)" action="Attach to Pid" />
  </stage>
  <stage stageid="09a96453-acbf-42c0-834e-97f39be65213" name="Sign In" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <display x="30" y="45" w="120" h="30" />
    <inputs>
      <input type="text" name="Username" expr="" />
      <input type="password" name="Password" expr="" />
      <input type="password" name="New Password" narrative="If this is your first login it will prompt you to change the password." expr="" />
      <input type="flag" name="Expect Password Reset" friendlyname="Expect Password Reset" expr="" />
      <input type="flag" name="Expected License Wizard" friendlyname="Expected License Wizard" expr="" />
      <input type="flag" name="Sign in Active Directorry" friendlyname="Sign in Active Directorry" narrative="Do you want sign in using Active Directory" expr="" />
      <input type="flag" name="Sign in" friendlyname="Sign in" narrative="Do you want sign in using legacy sso environment" expr="" />
    </inputs>
    <outputs>
      <output type="text" name="Error Message" friendlyname="Error Message" narrative="Error message received while Login" stage="" />
    </outputs>
    <onsuccess>8518d63a-c41e-4f36-82d4-87682611141a</onsuccess>
    <resource object="Blue Prism" action="Sign In" />
  </stage>
  <stage stageid="8518d63a-c41e-4f36-82d4-87682611141a" name="Go to Tab" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="30" y="90" w="120" h="30" />
    <inputs>
      <input type="text" name="Tab Name" friendlyname="Tab Name" narrative="Name of Tab to Click" expr="&quot;System&quot;" />
    </inputs>
    <onsuccess>daf1494a-17a3-42fa-abaf-e2245d8c0e63</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Go to Tab" />
  </stage>
  <stage stageid="19086d8b-0ee2-4a7a-ab5a-f4d610b5160c" name="Click Item From System Tree" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <loginhibitparameters />
    <display x="30" y="180" w="120" h="30" />
    <inputs>
      <input type="text" name="Tree Name" friendlyname="Tree Name" narrative="Name of the tree to be extended." expr="&quot;Security&quot;" />
      <input type="text" name="Item Name" friendlyname="Item Name" narrative="Name of the item to be clicked on." expr="&quot;Sign-on Settings&quot;" />
      <input type="text" name="Sub Item Name" friendlyname="Sub Item Name" narrative="Name of the sub item to be clicked on." expr="" />
      <input type="flag" name="Select Item Method?" friendlyname="Select Item Method?" narrative="True by Default. Selects the node from system tab using Select Item approach. If the node is not available (Greyed out) an exception will be thrown. Use this method if you are certain the node is available for selection." expr="" />
      <input type="flag" name="Retry MouseClick?" friendlyname="Retry MouseClick?" narrative="Default to True. Retries Global Mouse Click up to 3 times." expr="" />
      <input type="flag" name="Clean Up?" friendlyname="Clean Up?" narrative="False by Default. Set True if clean up is required at the beginning of the Action." expr="" />
    </inputs>
    <onsuccess>4e928271-dd14-4c5a-b155-d89b71213303</onsuccess>
    <resource object="Blue Prism - System - Basic Actions" action="Click Item From System Tree" />
  </stage>
  <stage stageid="daf1494a-17a3-42fa-abaf-e2245d8c0e63" name="Blue Prism - System (Parent)::Attach to Pid" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="30" y="135" w="120" h="30" />
    <inputs>
      <input type="number" name="pid" friendlyname="pid" narrative="PID to attach to" expr="[BluePrism PID]" />
    </inputs>
    <onsuccess>19086d8b-0ee2-4a7a-ab5a-f4d610b5160c</onsuccess>
    <resource object="Blue Prism - System (Parent)" action="Attach to Pid" />
  </stage>
  <stage stageid="37dae563-690b-43ce-9955-8bdd118bc98d" name="Select User Type" type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-90" w="120" h="30" />
    <inputs>
      <input type="text" name="User Type" friendlyname="User Type" narrative="Type of the user want to select" expr="&quot;Create one or more external authentication users&quot;" />
    </inputs>
    <onsuccess>8db05634-437d-426e-ba6b-3f4bb5afe8fe</onsuccess>
    <resource object="Blue Prism - System - Security" action="User Wizard - Select User Type" />
  </stage>
  <stage stageid="f82eb39c-a2c5-447a-b963-a8990d124e82" name="Press New" type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-135" w="120" h="30" />
    <inputs>
      <input type="flag" name="Via Burger Menu?" friendlyname="Via Burger Menu?" expr="&quot;True&quot;" />
    </inputs>
    <onsuccess>37dae563-690b-43ce-9955-8bdd118bc98d</onsuccess>
    <resource object="Blue Prism - System - Security" action="Press New External User" />
  </stage>
  <stage stageid="8db05634-437d-426e-ba6b-3f4bb5afe8fe" name="Press Next" type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-45" w="120" h="30" />
    <outputs>
      <output type="text" name="Error Message" friendlyname="Error Message" narrative="The error message read when pressing next." stage="" />
    </outputs>
    <onsuccess>e15d9620-e8a7-4b38-8d24-3aad1d72deae</onsuccess>
    <resource object="Blue Prism - System - Security" action="User Wizard - Press Next" />
  </stage>
  <stage stageid="5b48f542-6b9f-46a1-9198-ec9a66626f5b" name="Authentication Type External" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="30" y="315" w="120" h="30" />
    <inputs>
      <input type="flag" name="Authentication - External" friendlyname="Authentication - External" narrative="Authentication Type - External Authentication" expr="&quot;True&quot;" />
    </inputs>
    <onsuccess>967b1777-0ba1-4a64-82a8-6cc975c968c5</onsuccess>
    <resource object="Blue Prism - System - Security" action="Sign-on Settings - Authentication Type External" />
  </stage>
  <stage stageid="967b1777-0ba1-4a64-82a8-6cc975c968c5" name="Write Auth Server URL" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="30" y="360" w="120" h="30" />
    <inputs>
      <input type="text" name="Host type" friendlyname="Host type" narrative="Valid or Invalid Host Type" expr="&quot;https://authserver.com:44300/&quot;" />
    </inputs>
    <onsuccess>5fd69b74-71ce-45f8-a622-e304e861fd4b</onsuccess>
    <resource object="Blue Prism - System - Security" action="Sign-on Settings - Write Auth Server URL" />
  </stage>
  <stage stageid="4e928271-dd14-4c5a-b155-d89b71213303" name="Read External Auth Enabled Checkbox" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="30" y="225" w="120" h="30" />
    <outputs>
      <output type="flag" name="Enabled checkbox" friendlyname="Enabled checkbox" narrative="Read the checkbox value" stage="Read Enabled External Auth Checkbox" />
    </outputs>
    <onsuccess>e690128d-329a-4dc6-baa5-0dd13993af62</onsuccess>
    <resource object="Blue Prism - System - Security" action="Sign-on Settings -Read External Auth Enabled Checkbox" />
  </stage>
  <stage stageid="e690128d-329a-4dc6-baa5-0dd13993af62" name="Check Enabled Checkbox?" type="Decision">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <display x="30" y="270" w="120" h="30" />
    <decision expression="[Read Enabled External Auth Checkbox]" />
    <ontrue>1bf99aa8-3a70-4c3f-a2b7-59107e1a0ca7</ontrue>
    <onfalse>5b48f542-6b9f-46a1-9198-ec9a66626f5b</onfalse>
  </stage>
  <stage stageid="1bf99aa8-3a70-4c3f-a2b7-59107e1a0ca7" name="Anchor2" type="Anchor">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="270" w="10" h="10" />
    <onsuccess>8b002f57-ab28-4cac-b9c7-5980270cc846</onsuccess>
  </stage>
  <stage stageid="5fd69b74-71ce-45f8-a622-e304e861fd4b" name="Press Apply" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="30" y="405" w="120" h="30" />
    <onsuccess>7f60a394-4eec-4fdb-b04f-efcbeb579d98</onsuccess>
    <resource object="Blue Prism - System - Security" action="Sign-on Settings - Press Apply" />
  </stage>
  <stage stageid="57fc60b6-4523-4d78-914e-d2772965e57e" name="Browse to Users" type="Action">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="30" y="495" w="120" h="30" />
    <inputs>
      <input type="text" name="Tree Name" friendlyname="Tree Name" narrative="Name of the tree to be extended." expr="&quot;Security&quot;" />
      <input type="text" name="Item Name" friendlyname="Item Name" narrative="Name of the item to be clicked on." expr="&quot;Users&quot;" />
      <input type="text" name="Sub Item Name" friendlyname="Sub Item Name" narrative="Name of the sub item to be clicked on." expr="" />
      <input type="flag" name="Select Item Method?" friendlyname="Select Item Method?" narrative="True by Default. Selects the node from system tab using Select Item approach. If the node is not available (Greyed out) an exception will be thrown. Use this method if you are certain the node is available for selection." expr="" />
      <input type="flag" name="Retry MouseClick?" friendlyname="Retry MouseClick?" narrative="Default to True. Retries Global Mouse Click up to 3 times." expr="" />
      <input type="flag" name="Clean Up?" friendlyname="Clean Up?" narrative="False by Default. Set True if clean up is required at the beginning of the Action." expr="" />
    </inputs>
    <onsuccess>b7c4885b-3eae-4537-bdc5-a621f53ffa2c</onsuccess>
    <resource object="Blue Prism - System - Basic Actions" action="Click Item From System Tree" />
  </stage>
  <stage stageid="8b002f57-ab28-4cac-b9c7-5980270cc846" name="Anchor3" type="Anchor">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="450" w="10" h="10" />
    <onsuccess>7f60a394-4eec-4fdb-b04f-efcbeb579d98</onsuccess>
  </stage>
  <stage stageid="a5cb7a9b-1233-41bc-9227-1019761bcc54" name="Read Enabled External Auth Checkbox" type="Data">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-120" y="-15" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b156ebc1-6e39-48df-8f72-dfa03628b592" name="Local Variables" type="Block">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-195" y="-45" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="746090e6-efd0-4e6c-bdb6-57169dd629d4" name="Cleanup Block" type="Block">
    <loginhibit onsuccess="true" />
    <display x="-135" y="-135" w="375" h="285" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="f096cbb7-b57b-4ac1-b6c7-a70219cd4006" name="Add the Username and External User ID " type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="90" w="120" h="30" />
    <inputs>
      <input type="collection" name="Username Data" friendlyname="Username Data" expr="[Users Data]" />
    </inputs>
    <onsuccess>db7e07c4-f1db-410c-a9e5-1a372c369c1e</onsuccess>
    <resource object="Blue Prism - System - Security" action="Users -  Add the Username and External User ID " />
  </stage>
  <stage stageid="86451082-c4dd-44f7-bce8-b2ba533e20a6" name="Users Data" type="Collection">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="-135" y="-45" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
    <collectioninfo>
      <field name="Username" type="text" />
      <field name="External user ID" type="text" />
    </collectioninfo>
    <initialvalue>
      <row>
        <field name="Username" type="text" value="Test1(TFM-176-Z)" />
        <field name="External user ID" type="text" value="External test1(TFM-176-Z)" />
      </row>
    </initialvalue>
  </stage>
  <stage stageid="db7e07c4-f1db-410c-a9e5-1a372c369c1e" name="Press Next" type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="135" w="120" h="30" />
    <onsuccess>093aee52-d183-4137-983e-ecfadf9cdec2</onsuccess>
    <resource object="Blue Prism - System - Security" action="User Wizard - Press Next" />
  </stage>
  <stage stageid="a8087cdf-4dda-438a-b809-4f3ed8766494" name="Press Create " type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="450" w="120" h="30" />
    <outputs>
      <output type="text" name="Error Message" friendlyname="Error Message" narrative="The error message read when pressing next." stage="" />
    </outputs>
    <onsuccess>dc68e70c-7058-4573-a917-22c94018c5cb</onsuccess>
    <resource object="Blue Prism - System - Security" action="User Wizard - Press Create " />
  </stage>
  <stage stageid="962c2212-a07f-47ea-b482-38fabffc04ea" name="Recover" type="Recover">
    <loginhibit />
    <display x="195" y="30" />
    <onsuccess>3d413874-a507-4eb9-9fc8-fb27ac226d34</onsuccess>
  </stage>
  <stage stageid="3d413874-a507-4eb9-9fc8-fb27ac226d34" name="Get Exception" type="MultipleCalculation">
    <loginhibit onsuccess="true" />
    <display x="195" y="75" />
    <onsuccess>68112542-8348-446e-92e7-e460e1913914</onsuccess>
    <steps>
      <calculation expression="True" stage="Failed?" />
      <calculation expression="ExceptionDetail()" stage="Exception" />
    </steps>
  </stage>
  <stage stageid="68112542-8348-446e-92e7-e460e1913914" name="Resume" type="Resume">
    <loginhibit />
    <display x="195" y="120" />
    <onsuccess>e6667993-ebe8-422f-be57-d33ce89d248b</onsuccess>
  </stage>
  <stage stageid="8d8a6059-2f17-4ccf-8a91-556d9722af44" name="Failed?" type="Decision">
    <display x="15" y="225" w="90" h="30" />
    <decision expression="[Failed?]" />
    <ontrue>337bc835-42b5-4e76-8734-f2d370734338</ontrue>
    <onfalse>9c8fce79-6557-4be9-b5ad-c5700a4e4547</onfalse>
  </stage>
  <stage stageid="337bc835-42b5-4e76-8734-f2d370734338" name="Re-Throw" type="Exception">
    <display x="105" y="225" />
    <exception localized="yes" type="RETHROW" detail="[Exception]" />
  </stage>
  <stage stageid="b209d8e6-aefc-424f-8d66-8cc9abf05ffe" name="Failed?" type="Data">
    <loginhibit onsuccess="true" />
    <display x="-225" y="30" w="120" h="30" />
    <datatype>flag</datatype>
    <initialvalue>False</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b51e8a4e-fb12-4655-bf23-502ac0b3e73e" name="Exception" type="Data">
    <loginhibit onsuccess="true" />
    <display x="-225" y="60" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="cc9d6c5d-cc2c-4a9a-bd80-63521430cad5" name="Local Variables" type="Block">
    <loginhibit onsuccess="true" />
    <display x="-300" y="0" w="150" h="90" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="e6667993-ebe8-422f-be57-d33ce89d248b" name="Anchor5" type="Anchor">
    <loginhibit onsuccess="true" />
    <display x="195" y="180" w="10" h="10" />
    <onsuccess>79de41a6-85a3-4516-bd2f-34bc9585198e</onsuccess>
  </stage>
  <stage stageid="5c7590e0-5d71-43d9-822b-b53db51a4732" name="Add to Cleanup" type="SubSheetInfo">
    <subsheetid>1ee18315-aa52-4a5f-b5c2-90c8387385be</subsheetid>
    <display x="-120" y="-75" w="150" h="90" />
  </stage>
  <stage stageid="d58681cb-2587-4e93-a491-7e8929117e13" name="Start" type="Start">
    <subsheetid>1ee18315-aa52-4a5f-b5c2-90c8387385be</subsheetid>
    <display x="15" y="-105" />
    <inputs>
      <input type="text" name="Item Name" narrative="The name of the item you want to clean up." stage="Item Name" />
    </inputs>
    <onsuccess>484e8d6d-35f9-4402-b55b-c91482c660d9</onsuccess>
  </stage>
  <stage stageid="111b698e-aa8d-43be-88c1-ba228305cc57" name="End" type="End">
    <subsheetid>1ee18315-aa52-4a5f-b5c2-90c8387385be</subsheetid>
    <display x="15" y="30" />
  </stage>
  <stage stageid="c2dab331-ec92-4fc5-80e7-3c064550dc7b" name="Item Name" type="Data">
    <subsheetid>1ee18315-aa52-4a5f-b5c2-90c8387385be</subsheetid>
    <display x="-120" y="15" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="bebd5276-a3cc-4210-924a-adf0c455827e" name="Input Variables" type="Block">
    <subsheetid>1ee18315-aa52-4a5f-b5c2-90c8387385be</subsheetid>
    <display x="-195" y="-15" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="484e8d6d-35f9-4402-b55b-c91482c660d9" name="Add Row" type="Action">
    <subsheetid>1ee18315-aa52-4a5f-b5c2-90c8387385be</subsheetid>
    <display x="15" y="-60" w="90" h="30" />
    <inputs>
      <input type="text" name="Collection Name" narrative="The name of the collection to act upon" expr="&quot;CleanUp Collection&quot;" />
    </inputs>
    <onsuccess>caef7d2a-fa92-470d-b71b-dfdb275bcc77</onsuccess>
    <resource object="Blueprism.AutomateProcessCore.clsCollectionActions" action="Add Row" />
  </stage>
  <stage stageid="fb7c8b5c-b550-48d7-bc4e-ef7d2dd911fb" name="CleanUp Collection" type="Collection">
    <subsheetid>1ee18315-aa52-4a5f-b5c2-90c8387385be</subsheetid>
    <display x="-120" y="90" w="120" h="30" />
    <datatype>collection</datatype>
    <collectioninfo>
      <field name="Item Name" type="text" description="The name of the item that needs cleaning up." />
    </collectioninfo>
    <noalwaysinit />
  </stage>
  <stage stageid="cab0f4c3-e9e9-40ac-9b42-7a06bedaa538" name="Local Variables" type="Block">
    <subsheetid>1ee18315-aa52-4a5f-b5c2-90c8387385be</subsheetid>
    <display x="-195" y="60" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="caef7d2a-fa92-470d-b71b-dfdb275bcc77" name="Add To Row" type="Calculation">
    <subsheetid>1ee18315-aa52-4a5f-b5c2-90c8387385be</subsheetid>
    <display x="15" y="-15" w="90" h="30" />
    <onsuccess>111b698e-aa8d-43be-88c1-ba228305cc57</onsuccess>
    <calculation expression="[Item Name]" stage="CleanUp Collection.Item Name" />
  </stage>
  <stage stageid="a38498be-45a1-4f5f-9d9d-617b90a3a2d4" name="Cleanup" type="SubSheetInfo">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="-120" y="-75" w="150" h="90" />
  </stage>
  <stage stageid="0cc1eb47-d59a-4771-977d-58af76208cdd" name="Start" type="Start">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="15" y="-105" />
    <onsuccess>5b8824e3-b31b-4f65-b0e7-955dd686f7c6</onsuccess>
  </stage>
  <stage stageid="bbdf62c8-d6ac-4ff9-ac51-c99e500fe0e2" name="To Clean" type="LoopStart">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="15" y="-15" w="90" h="30" />
    <onsuccess>8e0f6e91-8976-4b3b-ac03-542ba40c1c0f</onsuccess>
    <groupid>26a42458-8a86-4cfc-a055-8e14f49ce271</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Reversed CleanUp</loopdata>
  </stage>
  <stage stageid="2663273d-b5ce-4a5a-b0c3-ff7444b3d5d0" name="To Clean" type="LoopEnd">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="15" y="255" w="90" h="30" />
    <onsuccess>b5e8d88d-22b2-4194-95bb-d20fe0f725cd</onsuccess>
    <groupid>26a42458-8a86-4cfc-a055-8e14f49ce271</groupid>
  </stage>
  <stage stageid="8e0f6e91-8976-4b3b-ac03-542ba40c1c0f" name="Which Clean Up" type="ChoiceStart">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="15" y="30" w="90" h="30" />
    <groupid>1f3920f6-007d-4312-8a99-5443cd7eb293</groupid>
    <choices>
      <choice expression="[Reversed CleanUp.Item Name]=&quot;Blue Prism&quot;">
        <name>Blue Prism</name>
        <distance>45</distance>
        <ontrue>a4957d17-6906-4021-9c5e-b946f0b8b9b5</ontrue>
      </choice>
      <choice expression="[Reversed CleanUp.Item Name]=&quot;Enabled External User&quot;">
        <name>Enabled External User</name>
        <distance>90</distance>
        <ontrue>ed6deb2a-f37f-42d7-b616-bc10d7f2c204</ontrue>
      </choice>
      <choice expression="[Reversed CleanUp.Item Name]=&quot;User&quot;">
        <name>User</name>
        <distance>135</distance>
        <ontrue>a2933479-4af3-4946-a10b-73aadbb0913c</ontrue>
      </choice>
    </choices>
  </stage>
  <stage stageid="9a5f9b36-2fd1-4e31-9f67-d3d8856286c8" name="Otherwise" type="ChoiceEnd">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="15" y="210" w="90" h="30" />
    <onsuccess>86c0563f-09c2-40f8-adba-7b9ae49c44ca</onsuccess>
    <groupid>1f3920f6-007d-4312-8a99-5443cd7eb293</groupid>
  </stage>
  <stage stageid="86c0563f-09c2-40f8-adba-7b9ae49c44ca" name="FAIL" type="Exception">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="90" y="210" w="30" h="30" />
    <exception type="" detail="&quot;You have entered a clean up item the choice doesn't recognise.&quot;" />
  </stage>
  <stage stageid="5b8824e3-b31b-4f65-b0e7-955dd686f7c6" name="Reverse Collection" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="15" y="-60" w="90" h="30" />
    <inputs>
      <input type="collection" name="Collection" narrative="The collection to be reversed." expr="[CleanUp Collection]" />
    </inputs>
    <outputs>
      <output type="collection" name="Reversed Collection" narrative="The reversed collection." stage="Reversed CleanUp" />
    </outputs>
    <onsuccess>bbdf62c8-d6ac-4ff9-ac51-c99e500fe0e2</onsuccess>
    <resource object="Utility - Collection Manipulation" action="Reverse Collection" />
  </stage>
  <stage stageid="5d1bdcbe-8274-4d58-b268-79dbc58f70e2" name="Reversed CleanUp" type="Collection">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="-120" y="15" w="150" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="9c25880b-bb5d-4bbe-ad9e-960490162f12" name="Local Variables" type="Block">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="-195" y="-15" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="bb397dc0-a98c-4a33-b8cc-eecd42d4de68" name="Anchor5" type="Anchor">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="660" y="255" w="10" h="10" />
    <onsuccess>2663273d-b5ce-4a5a-b0c3-ff7444b3d5d0</onsuccess>
  </stage>
  <stage stageid="a21df3cc-9bd9-40d6-8962-5b862727f10a" name="Anchor4" type="Anchor">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="660" y="120" w="10" h="10" />
    <onsuccess>9a6fb5b5-267b-420c-941d-c0c0afc902b4</onsuccess>
  </stage>
  <stage stageid="9a6fb5b5-267b-420c-941d-c0c0afc902b4" name="Anchor4" type="Anchor">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="660" y="165" w="10" h="10" />
    <onsuccess>bb397dc0-a98c-4a33-b8cc-eecd42d4de68</onsuccess>
  </stage>
  <stage stageid="960786c2-fe6b-4b71-8039-a147fabaf536" name="Terminate" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="585" y="75" w="90" h="30" />
    <onsuccess>9180b2d3-c56a-46da-92dc-c03df2d9ee3c</onsuccess>
    <resource object="Blue Prism" action="Exit Application" />
  </stage>
  <stage stageid="a4957d17-6906-4021-9c5e-b946f0b8b9b5" name="Close all child windows" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="480" y="75" w="90" h="30" />
    <onsuccess>960786c2-fe6b-4b71-8039-a147fabaf536</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Close All Child Windows" />
  </stage>
  <stage stageid="9180b2d3-c56a-46da-92dc-c03df2d9ee3c" name="Anchor9" type="Anchor">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="660" y="75" w="10" h="10" />
    <onsuccess>a21df3cc-9bd9-40d6-8962-5b862727f10a</onsuccess>
  </stage>
  <stage stageid="b5e8d88d-22b2-4194-95bb-d20fe0f725cd" name="End1" type="End">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="15" y="300" />
  </stage>
  <stage stageid="79de41a6-85a3-4516-bd2f-34bc9585198e" name="Cleanup" type="SubSheet">
    <loginhibit onsuccess="true" />
    <display x="15" y="180" w="90" h="30" />
    <onsuccess>8d8a6059-2f17-4ccf-8a91-556d9722af44</onsuccess>
    <processid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</processid>
  </stage>
  <stage stageid="7f60a394-4eec-4fdb-b04f-efcbeb579d98" name="Add to Cleanup (Enabled External User)" type="SubSheet">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="30" y="450" w="120" h="30" />
    <inputs>
      <input type="text" name="Item Name" friendlyname="Item Name" narrative="The name of the item you want to clean up." expr="&quot;Enabled External User&quot;" />
    </inputs>
    <onsuccess>57fc60b6-4523-4d78-914e-d2772965e57e</onsuccess>
    <processid>1ee18315-aa52-4a5f-b5c2-90c8387385be</processid>
  </stage>
  <stage stageid="dc68e70c-7058-4573-a917-22c94018c5cb" name="Add to Cleanup (User)" type="SubSheet">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="495" w="120" h="30" />
    <inputs>
      <input type="text" name="Item Name" friendlyname="Item Name" narrative="The name of the item you want to clean up." expr="&quot;User&quot;" />
    </inputs>
    <onsuccess>7393f7dc-9e3c-4c77-b5b4-17fb69f487d7</onsuccess>
    <processid>1ee18315-aa52-4a5f-b5c2-90c8387385be</processid>
  </stage>
  <stage stageid="8ca7ef73-c2ed-4130-9579-d43daa154eab" name="Add to Cleanup (Blue Prism)" type="SubSheet">
    <subsheetid>48b29800-de97-456a-a927-62e219f436f7</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="30" y="-45" w="120" h="30" />
    <inputs>
      <input type="text" name="Item Name" friendlyname="Item Name" narrative="The name of the item you want to clean up." expr="&quot;Blue Prism&quot;" />
    </inputs>
    <onsuccess>cacf3b73-7722-4f92-8133-d5fd9df42169</onsuccess>
    <processid>1ee18315-aa52-4a5f-b5c2-90c8387385be</processid>
  </stage>
  <stage stageid="d56ace5d-e1c0-4f70-b4d4-acbd2a68a9e6" name="Delete User" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="585" y="165" w="90" h="30" />
    <inputs>
      <input type="text" name="Username" friendlyname="Username" narrative="The name of the user you wish to delete." expr="&quot;Test1(TFM-176-Z)&quot;" />
    </inputs>
    <onsuccess>9a6fb5b5-267b-420c-941d-c0c0afc902b4</onsuccess>
    <resource object="Blue Prism - System - Security" action="Delete Username" />
  </stage>
  <stage stageid="3af0a7ec-843d-468a-b975-0727f365512c" name="Browse to System" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="375" y="165" w="90" h="30" />
    <inputs>
      <input type="text" name="Tab Name" friendlyname="Tab Name" narrative="Name of Tab to Click" expr="&quot;System&quot;" />
    </inputs>
    <onsuccess>6f4ac109-6ee7-4da7-80e0-130e19b201f3</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Go to Tab" />
  </stage>
  <stage stageid="6f4ac109-6ee7-4da7-80e0-130e19b201f3" name="Browse to Users" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="480" y="165" w="90" h="30" />
    <inputs>
      <input type="text" name="Tree Name" friendlyname="Tree Name" narrative="Name of the tree to be extended." expr="&quot;Security&quot;" />
      <input type="text" name="Item Name" friendlyname="Item Name" narrative="Name of the item to be clicked on." expr="&quot;Users&quot;" />
      <input type="text" name="Sub Item Name" friendlyname="Sub Item Name" narrative="Name of the sub item to be clicked on." expr="" />
      <input type="flag" name="Select Item Method?" friendlyname="Select Item Method?" narrative="True by Default. Selects the node from system tab using Select Item approach. If the node is not available (Greyed out) an exception will be thrown. Use this method if you are certain the node is available for selection." expr="" />
      <input type="flag" name="Retry MouseClick?" friendlyname="Retry MouseClick?" narrative="Default to True. Retries Global Mouse Click up to 3 times." expr="" />
      <input type="flag" name="Clean Up?" friendlyname="Clean Up?" narrative="False by Default. Set True if clean up is required at the beginning of the Action." expr="" />
    </inputs>
    <onsuccess>d56ace5d-e1c0-4f70-b4d4-acbd2a68a9e6</onsuccess>
    <resource object="Blue Prism - System - Basic Actions" action="Click Item From System Tree" />
  </stage>
  <stage stageid="a2933479-4af3-4946-a10b-73aadbb0913c" name="Close all child windows" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="270" y="165" w="90" h="30" />
    <onsuccess>3af0a7ec-843d-468a-b975-0727f365512c</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Close All Child Windows" />
  </stage>
  <stage stageid="00fdeb66-2a8e-4065-a2ff-62454a947dca" name="Browse to System" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="270" y="120" w="90" h="30" />
    <inputs>
      <input type="text" name="Tab Name" friendlyname="Tab Name" narrative="Name of Tab to Click" expr="&quot;System&quot;" />
    </inputs>
    <onsuccess>e755c07d-84e6-4384-a992-1062b1720bcc</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Go to Tab" />
  </stage>
  <stage stageid="ed6deb2a-f37f-42d7-b616-bc10d7f2c204" name="Close all child windows" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <display x="165" y="120" w="90" h="30" />
    <onsuccess>00fdeb66-2a8e-4065-a2ff-62454a947dca</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Close All Child Windows" />
  </stage>
  <stage stageid="e755c07d-84e6-4384-a992-1062b1720bcc" name="Browse to Sign on Settings" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <loginhibit onsuccess="true" />
    <loginhibitparameters />
    <display x="375" y="120" w="90" h="30" />
    <inputs>
      <input type="text" name="Tree Name" friendlyname="Tree Name" narrative="Name of the tree to be extended." expr="&quot;Security&quot;" />
      <input type="text" name="Item Name" friendlyname="Item Name" narrative="Name of the item to be clicked on." expr="&quot;Sign-on Settings&quot;" />
      <input type="text" name="Sub Item Name" friendlyname="Sub Item Name" narrative="Name of the sub item to be clicked on." expr="" />
      <input type="flag" name="Select Item Method?" friendlyname="Select Item Method?" narrative="True by Default. Selects the node from system tab using Select Item approach. If the node is not available (Greyed out) an exception will be thrown. Use this method if you are certain the node is available for selection." expr="" />
      <input type="flag" name="Retry MouseClick?" friendlyname="Retry MouseClick?" narrative="Default to True. Retries Global Mouse Click up to 3 times." expr="" />
      <input type="flag" name="Clean Up?" friendlyname="Clean Up?" narrative="False by Default. Set True if clean up is required at the beginning of the Action." expr="" />
    </inputs>
    <onsuccess>27697176-8ef0-4741-b174-b0a878b5dd0f</onsuccess>
    <resource object="Blue Prism - System - Basic Actions" action="Click Item From System Tree" />
  </stage>
  <stage stageid="27697176-8ef0-4741-b174-b0a878b5dd0f" name="Set Authentication Type External" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="480" y="120" w="90" h="30" />
    <inputs>
      <input type="flag" name="Authentication - External" friendlyname="Authentication - External" narrative="Authentication Type - External Authentication" expr="False" />
    </inputs>
    <onsuccess>db95a23f-a8ae-4f89-acec-81e8ca2cb50c</onsuccess>
    <resource object="Blue Prism - System - Security" action="Sign-on Settings - Authentication Type External" />
  </stage>
  <stage stageid="093aee52-d183-4137-983e-ecfadf9cdec2" name="Read Selected users (External authentication)" type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="180" w="120" h="30" />
    <outputs>
      <output type="collection" name="Read User Data" friendlyname="Read User Data" narrative="Read the Userdata" stage="Read User Data" />
    </outputs>
    <onsuccess>dafe3417-c941-4688-9d18-6d5f391a7cc6</onsuccess>
    <resource object="Blue Prism - System - Security" action="User Wizard - Read Selected users (External authentication)" />
  </stage>
  <stage stageid="33b50bb4-f872-4ef0-9fdf-54aca4be26eb" name="Read Selected Roles (External authentication)" type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="270" w="120" h="30" />
    <outputs>
      <output type="collection" name="Read Roles" friendlyname="Read Roles" narrative="Read the Roles" stage="Read Roles" />
    </outputs>
    <onsuccess>0cd2b811-2676-4e53-aa00-942ed1982280</onsuccess>
    <resource object="Blue Prism - System - Security" action="User Wizard - Read Selected Roles (External authentication)" />
  </stage>
  <stage stageid="de3179a5-537a-45aa-adf3-082028a7cbee" name="Total number of Users (External Auth)" type="Action">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="360" w="120" h="30" />
    <outputs>
      <output type="text" name="Total Number Of Users" friendlyname="Total Number Of Users" narrative="Read the Total number of Users" stage="Total Number Of Users" />
    </outputs>
    <onsuccess>a9b0290e-dee3-4324-b0d1-e953f1b4ba18</onsuccess>
    <resource object="Blue Prism - System - Security" action="User Wizard - Total number of Users (External Auth)" />
  </stage>
  <stage stageid="dafe3417-c941-4688-9d18-6d5f391a7cc6" name="User Details Correct?" type="Decision">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="15" y="225" w="120" h="30" />
    <decision expression="[Expected User Data]=[Read User Data]" />
    <ontrue>33b50bb4-f872-4ef0-9fdf-54aca4be26eb</ontrue>
    <onfalse>c1a7f9ac-10bf-4e0c-8c71-373db7d3548c</onfalse>
  </stage>
  <stage stageid="0cd2b811-2676-4e53-aa00-942ed1982280" name="Roles Correct?" type="Decision">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="15" y="315" w="120" h="30" />
    <decision expression="[Read Roles]=[Expected Read Roles]" />
    <ontrue>de3179a5-537a-45aa-adf3-082028a7cbee</ontrue>
    <onfalse>696fc5ea-aeb5-4ceb-99f8-43916fc7c37b</onfalse>
  </stage>
  <stage stageid="a9b0290e-dee3-4324-b0d1-e953f1b4ba18" name="Total Users Correct?" type="Decision">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="15" y="405" w="120" h="30" />
    <decision expression="[Total Number Of Users]=&quot;Total number of users: 1&quot;" />
    <ontrue>a8087cdf-4dda-438a-b809-4f3ed8766494</ontrue>
    <onfalse>12b7ea5d-3deb-4f67-b81a-a86c4fd54852</onfalse>
  </stage>
  <stage stageid="0e87e01e-1341-4f35-92a8-ab62adb84f34" name="Read User Data" type="Collection">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="-135" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="363bd98b-3793-422b-9266-9c83e6714bd0" name="Read Roles" type="Collection">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="-135" y="15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="9a144f54-b761-4677-89d9-cd8abd2c2f6e" name="Total Number Of Users" type="Data">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="-135" y="105" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="aa70bc80-b037-4ddd-a5d6-1e89b57916a8" name="Expected User Data" type="Collection">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="-135" y="45" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
    <collectioninfo>
      <field name="Username" type="text" />
      <field name="External user ID" type="text" />
    </collectioninfo>
    <initialvalue>
      <row>
        <field name="Username" type="text" value="Test1(TFM-176-Z)" />
        <field name="External user ID" type="text" value="External test1(TFM-176-Z)" />
      </row>
      <row>
        <field name="Username" type="text" value="(null)" />
        <field name="External user ID" type="text" value="(null)" />
      </row>
    </initialvalue>
  </stage>
  <stage stageid="c1a7f9ac-10bf-4e0c-8c71-373db7d3548c" name="FAIL" type="Exception">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="120" y="225" />
    <exception localized="yes" type="SystemException" detail="&quot;The expected users weren't found.&quot;" />
  </stage>
  <stage stageid="b82574c1-a594-4b86-9043-9efcbc7437b1" name="Expected Read Roles" type="Collection">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="-135" y="75" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
    <collectioninfo>
      <field name="Roles" type="text" />
    </collectioninfo>
    <initialvalue>
      <row>
        <field name="Roles" type="text" value="Developers" />
      </row>
      <row>
        <field name="Roles" type="text" value="Testers" />
      </row>
    </initialvalue>
  </stage>
  <stage stageid="696fc5ea-aeb5-4ceb-99f8-43916fc7c37b" name="FAIL" type="Exception">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="120" y="315" />
    <exception localized="yes" type="SystemException" detail="&quot;The expected roles weren't found.&quot;" />
  </stage>
  <stage stageid="12b7ea5d-3deb-4f67-b81a-a86c4fd54852" name="FAIL" type="Exception">
    <subsheetid>224e0aa7-926b-4db0-aadd-f92812c3053e</subsheetid>
    <display x="120" y="405" />
    <exception localized="yes" type="SystemException" detail="&quot;The expected number of users weren't found.&quot;" />
  </stage>
  <stage stageid="db95a23f-a8ae-4f89-acec-81e8ca2cb50c" name="Press Apply" type="Action">
    <subsheetid>d372b0e7-9acf-4b1d-90a6-c443b83be5ab</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="585" y="120" w="90" h="30" />
    <onsuccess>a21df3cc-9bd9-40d6-8962-5b862727f10a</onsuccess>
    <resource object="Blue Prism - System - Security" action="Sign-on Settings - Press Apply" />
  </stage>
</process>