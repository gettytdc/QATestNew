<process name="Pool Test Basic" version="1.0" bpversion="6.9.0.24001" narrative="Purpose of this test is to verify that:&#xD;&#xA;- A Pool can be created (Command Line)&#xD;&#xA;- Resources can be added to a Pool&#xD;&#xA;- A Resource is designated as Pool Controller&#xD;&#xA;- Sessions are allocated to the resources in the pool appropriately&#xD;&#xA;- It is not possible to create sessions on a pool where resources already have pending sessions&#xD;&#xA;- The pool can be deleted if no resources are online" byrefcollection="true" preferredid="b01591ea-84ff-43fb-a842-c8058e911018">
  <view>
    <camerax>-81</camerax>
    <cameray>63</cameray>
    <zoom version="2">1.25</zoom>
  </view>
  <preconditions />
  <endpoint narrative="" />
  <subsheet subsheetid="fbd058cd-f5c6-4c44-9121-302b5516d961" type="Normal" published="False">
    <name>Setup Pool</name>
    <view>
      <camerax>105</camerax>
      <cameray>1167</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="e301ad7a-58c5-4dca-90c8-acc1ce895dbf" type="Normal" published="False">
    <name>Test Session Assignment</name>
    <view>
      <camerax>0</camerax>
      <cameray>264</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="69c46b31-7884-4bfa-bc8c-87802fea2872" type="Normal" published="False">
    <name>Test Start Sessions</name>
    <view>
      <camerax>0</camerax>
      <cameray>143</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="984536c5-9f07-45c6-9320-73f1880f80db" type="Normal" published="False">
    <name>Clean Up</name>
    <view>
      <camerax>0</camerax>
      <cameray>255</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <stage stageid="16c1ac4c-0991-4c1d-bd70-7219779841b3" name="Start" type="Start">
    <display x="15" y="-90" />
    <onsuccess>acd4fdb4-3d8b-4483-96f1-b006614beb61</onsuccess>
  </stage>
  <stage stageid="87f77ba0-7a40-47e5-be2c-36e46161cf9b" name="Stage1" type="ProcessInfo">
    <display x="-120" y="-195" w="420" h="120" />
  </stage>
  <stage stageid="f76930b5-813e-4a33-bffa-09c628b0f585" name="Username" type="Data">
    <display x="-285" y="-90" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">admin</initialvalue>
    <alwaysinit />
  </stage>
  <stage stageid="ff63f0b6-43db-4bfb-aec0-4b492ade74a7" name="Password" type="Data">
    <display x="-210" y="-90" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">admin</initialvalue>
    <alwaysinit />
  </stage>
  <stage stageid="0bbe17ad-3b2c-4705-86b1-ed1a77343996" name="Pool Name" type="Data">
    <display x="-285" y="-45" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">QaPoolTest</initialvalue>
    <alwaysinit />
  </stage>
  <stage stageid="c263668a-1fad-4dc6-9786-e438bf96b74f" name="Resource Names" type="Collection">
    <display x="-210" y="-45" />
    <datatype>collection</datatype>
    <alwaysinit />
    <collectioninfo>
      <field name="Resource Name" type="text" />
    </collectioninfo>
  </stage>
  <stage stageid="e450a037-eb2a-48dc-b155-98d479bfe1ee" name="Setup Pool" type="SubSheetInfo">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="6092071b-dfe4-4632-9806-404647f3d99e" name="Start" type="Start">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="-150" />
    <onsuccess>7e2aad21-03cd-46db-bca7-55a6110fcd74</onsuccess>
  </stage>
  <stage stageid="a2957f78-2787-4f74-859f-7fd7c05879c6" name="End" type="End">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="1245" />
  </stage>
  <stage stageid="7e2aad21-03cd-46db-bca7-55a6110fcd74" name="Create Pool" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="-105" />
    <inputs>
      <input type="text" name="Username" friendlyname="Username" narrative="BP Username" expr="[Username]" />
      <input type="text" name="Password" friendlyname="Password" narrative="BP Password" expr="[Password]" />
      <input type="text" name="Pool Name" friendlyname="Pool Name" narrative="Name of the Pool to create" expr="[Pool Name]" />
    </inputs>
    <outputs>
      <output type="number" name="PID" friendlyname="PID" narrative="Process ID" stage="" />
    </outputs>
    <onsuccess>5347997d-d040-475b-aa8c-db92f6ae22cd</onsuccess>
    <resource object="Blue Prism - Commands" action="Create Pool" />
  </stage>
  <stage stageid="fd32782f-ab30-4426-8664-8d41e1cbb38c" name="Resource Startup" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="30" />
    <inputs>
      <input type="flag" name="SSO" friendlyname="SSO" narrative="True to login using Active Directory authentication. If this is False and Username is empty, a public resource PC is started" expr="" />
      <input type="text" name="Username" friendlyname="Username" narrative="The username to use for the resource PC. Ignored if SSO is True. If this is empty and SSO is False, this will create a public resource" expr="" />
      <input type="password" name="Password" friendlyname="Password" narrative="The password to use for the resource. Only used if Username is given" expr="" />
      <input type="number" name="Port" friendlyname="Port" narrative="The port number on which the resource PC should listen" expr="[Resource Port.Port]" />
    </inputs>
    <outputs>
      <output type="number" name="Process ID" friendlyname="Process ID" narrative="The PID of the newly created process" stage="" />
    </outputs>
    <onsuccess>d21a9148-8426-4cf4-93dc-cdf56fd7526b</onsuccess>
    <resource object="Resource Manager" action="Start Resource" />
  </stage>
  <stage stageid="5347997d-d040-475b-aa8c-db92f6ae22cd" name="Start Resources" type="LoopStart">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="-60" />
    <onsuccess>13ab2703-9133-450e-b831-e285dc4e4cbe</onsuccess>
    <groupid>4de779b4-d8d7-4a50-9c9f-a184e7d66810</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Resource Port</loopdata>
  </stage>
  <stage stageid="d21a9148-8426-4cf4-93dc-cdf56fd7526b" name="Start Resources" type="LoopEnd">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="75" />
    <onsuccess>a7a552ad-c373-4fd2-892b-a60479181f92</onsuccess>
    <groupid>4de779b4-d8d7-4a50-9c9f-a184e7d66810</groupid>
  </stage>
  <stage stageid="062d11be-50c1-49f6-9141-c772623f6f4b" name="Add Resource To Pool" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="750" />
    <inputs>
      <input type="text" name="Username" friendlyname="Username" narrative="BP Username" expr="[Username]" />
      <input type="text" name="Password" friendlyname="Password" narrative="BP Password" expr="[Password]" />
      <input type="text" name="Pool Name" friendlyname="Pool Name" narrative="Name of the Pool to create" expr="[Pool Name]" />
      <input type="text" name="Resource Name" friendlyname="Resource Name" narrative="Name of the resource to add to the pool." expr="[Resource Names.Resource Name]" />
    </inputs>
    <outputs>
      <output type="number" name="PID" friendlyname="PID" narrative="Process ID" stage="" />
    </outputs>
    <onsuccess>cdcfaf80-2778-477c-89a0-79acd7f75e12</onsuccess>
    <resource object="Blue Prism - Commands" action="Add Resource to Pool" />
  </stage>
  <stage stageid="4e9cc29d-ecbb-4ce5-8632-9217bea46de0" name="Add Resources to Pool" type="LoopStart">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="705" />
    <onsuccess>062d11be-50c1-49f6-9141-c772623f6f4b</onsuccess>
    <groupid>d5d14aff-f8e0-40bc-adef-cb29041b5a9d</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Resource Names</loopdata>
  </stage>
  <stage stageid="cdcfaf80-2778-477c-89a0-79acd7f75e12" name="Add Resources to Pool" type="LoopEnd">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="795" />
    <onsuccess>ec177595-4cbc-4fe1-a626-a7dbe9138c3b</onsuccess>
    <groupid>d5d14aff-f8e0-40bc-adef-cb29041b5a9d</groupid>
  </stage>
  <stage stageid="056e1498-0147-4cfe-96c5-15241849da66" name="Resource Port" type="Collection">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-225" y="-15" />
    <datatype>collection</datatype>
    <alwaysinit />
    <collectioninfo>
      <field name="Port" type="number" />
    </collectioninfo>
    <initialvalue>
      <row>
        <field name="Port" type="number" value="8705" />
      </row>
      <row>
        <field name="Port" type="number" value="8706" />
      </row>
      <row>
        <field name="Port" type="number" value="8707" />
      </row>
      <row>
        <field name="Port" type="number" value="8708" />
      </row>
      <row>
        <field name="Port" type="number" value="8709" />
      </row>
    </initialvalue>
  </stage>
  <stage stageid="cb24ce60-ae0f-494c-a62b-58c964585b12" name="Machine Name" type="Data">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-225" y="30" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="5a77f1a9-7126-4517-9bd9-14bb6c095752" name="Setup Pool" type="SubSheet">
    <display x="15" y="0" />
    <onsuccess>b5d25466-e94e-40f0-8180-b33ec7d08e7c</onsuccess>
    <processid>fbd058cd-f5c6-4c44-9121-302b5516d961</processid>
  </stage>
  <stage stageid="a7a552ad-c373-4fd2-892b-a60479181f92" name="Launch Blue Prism" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="120" />
    <outputs>
      <output type="number" name="pid" friendlyname="pid" narrative="PID of the process" stage="pid" />
    </outputs>
    <onsuccess>67fdf8d2-945f-4a83-aee8-bf74e6d8c5a8</onsuccess>
    <resource object="Blue Prism" action="Launch and Get PID" />
  </stage>
  <stage stageid="67fdf8d2-945f-4a83-aee8-bf74e6d8c5a8" name="Sign In" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="165" />
    <inputs>
      <input type="text" name="Username" friendlyname="Username" expr="[Username]" />
      <input type="password" name="Password" friendlyname="Password" expr="[Password]" />
      <input type="password" name="New Password" friendlyname="New Password" narrative="If this is your first login it will prompt you to change the password." expr="" />
      <input type="flag" name="Expect Password Reset" friendlyname="Expect Password Reset" expr="" />
    </inputs>
    <outputs>
      <output type="text" name="Locale" friendlyname="Locale" narrative="Blue Prism Locale setting" stage="" />
    </outputs>
    <onsuccess>15169ad5-bbd3-42c8-9dbf-10b122a73728</onsuccess>
    <resource object="Blue Prism" action="Sign In" />
  </stage>
  <stage stageid="15169ad5-bbd3-42c8-9dbf-10b122a73728" name="Attach To Control Room" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="210" />
    <inputs>
      <input type="number" name="pid" friendlyname="pid" narrative="PID to attach to" expr="[pid]" />
    </inputs>
    <onsuccess>ee17c760-3bce-4604-ace9-10e454b79fa4</onsuccess>
    <resource object="Blue Prism - Control Room (Parent)" action="Attach to Pid" />
  </stage>
  <stage stageid="ee17c760-3bce-4604-ace9-10e454b79fa4" name="Go to Control Room" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="255" />
    <inputs>
      <input type="text" name="Tab Name" friendlyname="Tab Name" narrative="Name of Tab to Click" expr="&quot;Control&quot;" />
    </inputs>
    <onsuccess>7b71c1c4-d47d-43ee-a5de-b51b4ee94862</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Go to Tab" />
  </stage>
  <stage stageid="cba0e586-6e21-449b-b507-f0e2c8319d3e" name="Resource Present" type="Collection">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-150" y="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="7b71c1c4-d47d-43ee-a5de-b51b4ee94862" name="Get Machine Name" type="Calculation">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="300" />
    <onsuccess>18bce64b-4e9d-47d5-8eab-01fb66fd206c</onsuccess>
    <calculation expression="GetResourceName()" stage="Machine Name" />
  </stage>
  <stage stageid="50158fe6-c3af-4725-8067-c415cc7ea5ec" name="Strip _debug" type="Calculation">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="210" y="345" />
    <onsuccess>44989b59-eb6d-4b9d-b03e-45bd9e3f503c</onsuccess>
    <calculation expression="Left([Machine Name], Len([Machine Name]) - Len(&quot;_debug&quot;))&#xA;" stage="Machine Name" />
  </stage>
  <stage stageid="378cb4b7-54dc-41d3-9b22-3fd0abc9353d" name="Add Port to Name" type="Calculation">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="480" />
    <onsuccess>cb195ef9-bdb1-4b5d-916f-fd653ad2fe2a</onsuccess>
    <calculation expression="[Machine Name] &amp; &quot;:&quot; &amp; [Resource Port.Port]&#xA;" stage="Resource Names.Resource Name" />
  </stage>
  <stage stageid="18bce64b-4e9d-47d5-8eab-01fb66fd206c" name="_debug?" type="Decision">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <narrative>[Machine Name]="BPWIN7_debug"</narrative>
    <display x="105" y="345" />
    <font family="Segoe UI" size="10" style="Regular" color="FF0000" />
    <decision expression="InStr(Upper(Trim([Machine Name])), Upper(&quot;_debug&quot;)) &gt; 0" />
    <ontrue>50158fe6-c3af-4725-8067-c415cc7ea5ec</ontrue>
    <onfalse>74e3cb0f-fb5b-4dc7-a4c8-9856d2267f78</onfalse>
  </stage>
  <stage stageid="44989b59-eb6d-4b9d-b03e-45bd9e3f503c" name="Anchor1" type="Anchor">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="210" y="390" w="10" h="10" />
    <onsuccess>74e3cb0f-fb5b-4dc7-a4c8-9856d2267f78</onsuccess>
  </stage>
  <stage stageid="74e3cb0f-fb5b-4dc7-a4c8-9856d2267f78" name="Get Resource Names" type="LoopStart">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="390" />
    <onsuccess>c0c68b64-2adb-4918-923b-8898be2a184d</onsuccess>
    <groupid>3974c0cc-bab1-4e26-9c6d-c9f9eb393436</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Resource Port</loopdata>
  </stage>
  <stage stageid="cb195ef9-bdb1-4b5d-916f-fd653ad2fe2a" name="Get Resource Names" type="LoopEnd">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="525" />
    <onsuccess>047c481e-f42b-4523-bd4f-04cd2ed131a0</onsuccess>
    <groupid>3974c0cc-bab1-4e26-9c6d-c9f9eb393436</groupid>
  </stage>
  <stage stageid="c0c68b64-2adb-4918-923b-8898be2a184d" name="Add Row to Collection" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="435" />
    <inputs>
      <input type="text" name="Collection Name" friendlyname="Collection Name" narrative="The name of the collection to act upon" expr="&quot;Resource Names&quot;" />
    </inputs>
    <onsuccess>378cb4b7-54dc-41d3-9b22-3fd0abc9353d</onsuccess>
    <resource object="Blueprism.AutomateProcessCore.clsCollectionActions" action="Add Row" />
  </stage>
  <stage stageid="266ab131-f0a0-4b67-8945-46785dd46768" name="Wait for Resource" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="615" />
    <inputs>
      <input type="text" name="Resource Name" friendlyname="Resource Name" narrative="The name of the Resource PC of interest" expr="[Resource Names.Resource Name]" />
      <input type="timespan" name="Timeout" friendlyname="Timeout" narrative="The maximum length of time to wait for the Resource of interest to become available. Default is immediate timeout of resource is not available, ie. zero" expr="" />
      <input type="text" name="Resource Group to Expand" friendlyname="Resource Group to Expand" narrative="Group set to Default" expr="" />
    </inputs>
    <outputs>
      <output type="flag" name="Resource Available" friendlyname="Resource Available" narrative="Indicates whether the resource is available. This will be false if a timeout occurs." stage="" />
    </outputs>
    <onsuccess>beb8d9f8-2e65-4651-ad1c-b3a767436c0a</onsuccess>
    <resource object="Blue Prism - Control - Session Management" action="Control Room - Wait for Resource to Come Online" />
  </stage>
  <stage stageid="047c481e-f42b-4523-bd4f-04cd2ed131a0" name="Check Resources Online" type="LoopStart">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="570" />
    <onsuccess>266ab131-f0a0-4b67-8945-46785dd46768</onsuccess>
    <groupid>d6afa819-3ad4-4a1a-9498-90431fae0294</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Resource Names</loopdata>
  </stage>
  <stage stageid="beb8d9f8-2e65-4651-ad1c-b3a767436c0a" name="Check Resources Online" type="LoopEnd">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="660" />
    <onsuccess>4e9cc29d-ecbb-4ce5-8632-9217bea46de0</onsuccess>
    <groupid>d6afa819-3ad4-4a1a-9498-90431fae0294</groupid>
  </stage>
  <stage stageid="60504f34-c2a2-4499-b568-df81c609c5f4" name="Expand Pool" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="930" />
    <inputs>
      <input type="text" name="Resource Group Name" friendlyname="Resource Group Name" narrative="Resource Group Name to Expand" expr="[Pool Name]" />
    </inputs>
    <onsuccess>7aff9ac3-739e-42c0-b5af-3b40d00d1841</onsuccess>
    <resource object="Blue Prism - Control - Session Management" action="Expand Resource Group By Group Name" />
  </stage>
  <stage stageid="ec177595-4cbc-4fe1-a626-a7dbe9138c3b" name="Navigate to home" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="840" />
    <inputs>
      <input type="text" name="Tab Name" friendlyname="Tab Name" narrative="Name of Tab to Click" expr="&quot;Home&quot;" />
    </inputs>
    <onsuccess>9d373a26-e691-4390-93e6-ea4f89f7b337</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Go to Tab" />
  </stage>
  <stage stageid="9d373a26-e691-4390-93e6-ea4f89f7b337" name="Go Back to Control Room" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="885" />
    <inputs>
      <input type="text" name="Tab Name" friendlyname="Tab Name" narrative="Name of Tab to Click" expr="&quot;Control&quot;" />
    </inputs>
    <onsuccess>60504f34-c2a2-4499-b568-df81c609c5f4</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Go to Tab" />
  </stage>
  <stage stageid="7aff9ac3-739e-42c0-b5af-3b40d00d1841" name="Get Visible Resources" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="105" y="975" />
    <outputs>
      <output type="collection" name="Availabe Resources" friendlyname="Availabe Resources" stage="Availabe Resources" />
    </outputs>
    <onsuccess>bc22a7ac-51f1-43cf-a58c-c71fec58f0b9</onsuccess>
    <resource object="Blue Prism - Control - Session Management" action="Get Names of Visible resources" />
  </stage>
  <stage stageid="b419cbe6-f383-4735-8762-9a2162c94895" name="Availabe Resources" type="Collection">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-150" y="-15" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="744f6e8a-9ffd-455d-83c4-089a94a159b1" name="Pool Controller Assigned?" type="Decision">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="1065" />
    <decision expression="StartsWith([Availabe Resources.Session Info], &quot;*&quot;)" />
    <ontrue>ebf0e84a-c7d8-4552-b2b6-42591f3191af</ontrue>
    <onfalse>74e4f74e-4455-4c22-a68b-e8b1d1431fcd</onfalse>
  </stage>
  <stage stageid="ebf0e84a-c7d8-4552-b2b6-42591f3191af" name="Anchor2" type="Anchor">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="30" y="1065" w="10" h="10" />
    <onsuccess>716bf1f6-3f4a-4ab3-9132-b72192ebf160</onsuccess>
  </stage>
  <stage stageid="716bf1f6-3f4a-4ab3-9132-b72192ebf160" name="Anchor3" type="Anchor">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="30" y="1245" w="10" h="10" />
    <onsuccess>a2957f78-2787-4f74-859f-7fd7c05879c6</onsuccess>
  </stage>
  <stage stageid="eeed334d-e2fd-4edf-9833-26b5c31fa184" name="Try Again?" type="Decision">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="1155" />
    <decision expression="[Current Retry]&lt;&gt;[Max Retries]" />
    <ontrue>b8bd5c67-5104-4ccb-a3bf-568f120f607c</ontrue>
    <onfalse>4845c9b2-9519-4035-a7d2-7811c5c4669c</onfalse>
  </stage>
  <stage stageid="7a071de3-b3ec-4b99-a818-71424e1abd27" name="Current Retry" type="Data">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-150" y="75" />
    <datatype>number</datatype>
    <initialvalue>0</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="33c8e8c1-4254-45ac-a0eb-fd6da3b26f7e" name="Max Retries" type="Data">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-225" y="75" />
    <datatype>number</datatype>
    <initialvalue>10</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="4845c9b2-9519-4035-a7d2-7811c5c4669c" name="Controller Exception" type="Exception">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="1200" />
    <exception localized="yes" type="" detail="&quot;Pool Controller was not assigned&quot;" />
  </stage>
  <stage stageid="b8bd5c67-5104-4ccb-a3bf-568f120f607c" name="Increment Retries" type="Calculation">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="180" y="1155" />
    <onsuccess>fd984141-88d0-445f-b592-a1bdedda5bb3</onsuccess>
    <calculation expression="[Current Retry]+1" stage="Current Retry" />
  </stage>
  <stage stageid="fd984141-88d0-445f-b592-a1bdedda5bb3" name="Anchor4" type="Anchor">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="180" y="840" w="10" h="10" />
    <onsuccess>ec177595-4cbc-4fe1-a626-a7dbe9138c3b</onsuccess>
  </stage>
  <stage stageid="51e6f4a5-ea22-45ab-8de6-9a525f7958da" name="End1" type="End">
    <display x="15" y="180" />
  </stage>
  <stage stageid="bc22a7ac-51f1-43cf-a58c-c71fec58f0b9" name="Iterate Through Visible Resources" type="LoopStart">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="1020" />
    <onsuccess>744f6e8a-9ffd-455d-83c4-089a94a159b1</onsuccess>
    <groupid>30b61801-762a-49ad-95af-9456fe9d6de1</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Availabe Resources</loopdata>
  </stage>
  <stage stageid="74e4f74e-4455-4c22-a68b-e8b1d1431fcd" name="Iterate Through Visible Resources" type="LoopEnd">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="1110" />
    <onsuccess>eeed334d-e2fd-4edf-9833-26b5c31fa184</onsuccess>
    <groupid>30b61801-762a-49ad-95af-9456fe9d6de1</groupid>
  </stage>
  <stage stageid="5038d756-7da4-4664-a9ba-d4158cab54da" name="Setup Variables" type="Block">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-270" y="-45" w="180" h="150" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="c48800ff-6ea6-453d-9e5d-a4213d6077a7" name="pid" type="Data">
    <display x="-285" y="0" />
    <datatype>number</datatype>
    <initialvalue />
    <alwaysinit />
  </stage>
  <stage stageid="45033e0a-ef41-4d2e-9473-1ba72b97ab2f" name="Creat Pool and Start Runtimes" type="Block">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-45" y="-135" w="300" h="225" />
    <font family="Segoe UI" size="10" style="Regular" color="666699" />
  </stage>
  <stage stageid="16058c41-f890-4731-b3c3-501f0b3f50bf" name="Login and Check Resources Online" type="Block">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-45" y="105" w="300" h="570" />
    <font family="Segoe UI" size="10" style="Regular" color="FFFF00" />
  </stage>
  <stage stageid="e8cfab69-3a1a-4127-b851-14c2d666cd40" name="Add Resources to Pool" type="Block">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-45" y="690" w="300" h="120" />
    <font family="Segoe UI" size="10" style="Regular" color="00FF00" />
  </stage>
  <stage stageid="9ac5983c-681a-4860-a261-59b23f65151e" name="Verify Pool Controller Assigned" type="Block">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="-45" y="825" w="300" h="390" />
    <font family="Segoe UI" size="10" style="Regular" color="FF0000" />
  </stage>
  <stage stageid="891cd7d3-b71d-4352-8614-9381ac20e2d8" name="Global Variables" type="Block">
    <display x="-330" y="-120" w="165" h="210" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="f5b69f13-939d-4f30-836f-bbdb67219b11" name="Test Session Assignment" type="SubSheetInfo">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="b26a1382-3aa1-4174-a3b1-9239cbac66b0" name="Start" type="Start">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="15" y="-105" />
    <onsuccess>e8b7788b-9805-4c84-96ca-c8b77c1490f6</onsuccess>
  </stage>
  <stage stageid="0b1a99e2-0450-4d25-8ec8-a3fed527e232" name="End" type="End">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="15" y="210" />
  </stage>
  <stage stageid="e8b7788b-9805-4c84-96ca-c8b77c1490f6" name="Create 5 Sessions on Pool" type="Action">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-45" />
    <inputs>
      <input type="text" name="Process Name" friendlyname="Process Name" narrative="The name of the process of interest - if it is not found, the 'Ungrouped Processes' group will be opened and checked" expr="[Process Name]" />
      <input type="text" name="Pool Name" friendlyname="Pool Name" narrative="The name of the Pool on which to create the session" expr="[Pool Name]" />
      <input type="text" name="Group to Expand" friendlyname="Group to Expand" narrative="Default value is 'Default'." expr="" />
      <input type="flag" name="Negative Test" friendlyname="Negative Test" narrative="Check for negative testing " expr="" />
      <input type="text" name="Resource Group to Expand" friendlyname="Resource Group to Expand" narrative="Default value is 'Default'" expr="" />
      <input type="collection" name="Resources in Pool" friendlyname="Resources in Pool" narrative="Names of resources in the Pool" expr="[Resource Names]" />
    </inputs>
    <outputs>
      <output type="number" name="Position of Pending Session" friendlyname="Position of Pending Session" narrative="The 1-based index of the newly created session in the Environment list in Control Room" stage="" />
      <output type="text" name="Error Message (expected)" friendlyname="Error Message (expected)" narrative="Error message returned (negative testing)" stage="" />
    </outputs>
    <onsuccess>b24387a8-32b6-44b1-9f63-9a36e993f518</onsuccess>
    <resource object="Blue Prism - Control - Session Management" action="Create Pool Session" />
  </stage>
  <stage stageid="8da667e0-6171-48cc-b13a-a5ff4a3f0b3e" name="Number of Sessions to Create" type="Data">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="-150" y="0" />
    <datatype>number</datatype>
    <initialvalue>5</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="e6ab4413-d1ae-4479-ae83-6238f5434969" name="No of Sessions Created" type="Data">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="-225" y="0" />
    <datatype>number</datatype>
    <initialvalue>0</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="b24387a8-32b6-44b1-9f63-9a36e993f518" name="Increment Sessions Created" type="Calculation">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="15" y="0" />
    <onsuccess>632303e1-586c-478f-af48-0811d7591764</onsuccess>
    <calculation expression="[No of Sessions Created]+1" stage="No of Sessions Created" />
  </stage>
  <stage stageid="632303e1-586c-478f-af48-0811d7591764" name="Created all sessions?" type="Decision">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="15" y="45" />
    <decision expression="[No of Sessions Created]=[Number of Sessions to Create]" />
    <ontrue>0cb7775b-a908-4215-b7c6-7e530b55771f</ontrue>
    <onfalse>748a9d32-63eb-4d3b-9e36-f8b725d36b47</onfalse>
  </stage>
  <stage stageid="748a9d32-63eb-4d3b-9e36-f8b725d36b47" name="Anchor5" type="Anchor">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="90" y="45" w="10" h="10" />
    <onsuccess>19ae84ef-4a91-4a30-be7d-482865f92531</onsuccess>
  </stage>
  <stage stageid="19ae84ef-4a91-4a30-be7d-482865f92531" name="Anchor6" type="Anchor">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="90" y="-45" w="10" h="10" />
    <onsuccess>e8b7788b-9805-4c84-96ca-c8b77c1490f6</onsuccess>
  </stage>
  <stage stageid="b5d25466-e94e-40f0-8180-b33ec7d08e7c" name="Test Session Assignment" type="SubSheet">
    <display x="15" y="45" />
    <onsuccess>bea5e564-e658-41e4-b9dc-8029670ca64a</onsuccess>
    <processid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</processid>
  </stage>
  <stage stageid="7e42b312-92ed-450d-ad51-f5a9fd7f4a01" name="Expected Error Message" type="Data">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-225" y="60" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">is too busy to run that process.</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="05af99dd-921d-4730-9f71-ae222f41d4bc" name="Error Message Received" type="Data">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="-150" y="60" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="cfd423cb-8432-4e39-818b-04e0a33de957" name="Check Error Message" type="Decision">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="15" y="150" />
    <decision expression="[Error Message Received]=[Pool Name]&amp;&quot; &quot;&amp;[Expected Error Message]" />
    <ontrue>0b1a99e2-0450-4d25-8ec8-a3fed527e232</ontrue>
    <onfalse>d1ffbb3e-205b-4f77-b2e1-2c2009521826</onfalse>
  </stage>
  <stage stageid="d1ffbb3e-205b-4f77-b2e1-2c2009521826" name="Session Create Exception" type="Exception">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <display x="135" y="150" />
    <exception localized="yes" type="" detail="&quot;It was possible to create a session when no resources where available in the pool&quot;" />
  </stage>
  <stage stageid="0cb7775b-a908-4215-b7c6-7e530b55771f" name="Attempt to Create 6th Session" type="Action">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="90" />
    <inputs>
      <input type="text" name="Process Name" friendlyname="Process Name" narrative="The name of the process of interest - if it is not found, the 'Ungrouped Processes' group will be opened and checked" expr="[Process Name]" />
      <input type="text" name="Pool Name" friendlyname="Pool Name" narrative="The name of the Pool on which to create the session" expr="[Pool Name]" />
      <input type="text" name="Group to Expand" friendlyname="Group to Expand" narrative="Default value is 'Default'." expr="" />
      <input type="flag" name="Negative Test" friendlyname="Negative Test" narrative="Check for negative testing " expr="True" />
      <input type="text" name="Resource Group to Expand" friendlyname="Resource Group to Expand" narrative="Default value is 'Default'" expr="" />
      <input type="collection" name="Resources in Pool" friendlyname="Resources in Pool" narrative="Names of resources in the Pool" expr="[Resource Names]" />
    </inputs>
    <outputs>
      <output type="number" name="Position of Pending Session" friendlyname="Position of Pending Session" narrative="The 1-based index of the newly created session in the Environment list in Control Room" stage="" />
      <output type="text" name="Error Message (expected)" friendlyname="Error Message (expected)" narrative="Error message returned (negative testing)" stage="Error Message Received" />
    </outputs>
    <onsuccess>cfd423cb-8432-4e39-818b-04e0a33de957</onsuccess>
    <resource object="Blue Prism - Control - Session Management" action="Create Pool Session" />
  </stage>
  <stage stageid="e8451163-4bcc-477a-a6bc-e048651a8074" name="Test Start Sessions" type="SubSheetInfo">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <display x="-195" y="-120" w="150" h="90" />
  </stage>
  <stage stageid="dd942e7b-4c96-498b-b969-3f1c697a54e2" name="Start" type="Start">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <display x="195" y="-120" />
    <onsuccess>710f406b-8ba2-43d1-8d84-c9640a74a343</onsuccess>
  </stage>
  <stage stageid="0ba8208b-6167-4545-a347-cebdebc3c39f" name="End" type="End">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <display x="195" y="510" />
  </stage>
  <stage stageid="c7603d6d-e089-444a-8b1b-f1f8e5edbb13" name="Select Session" type="Action">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="15" />
    <inputs>
      <input type="number" name="Session Position" friendlyname="Session Position" narrative="The 1-based index of the session of interest, in the Environment list" expr="[Session Position]" />
      <input type="text" name="Process Name" friendlyname="Process Name" narrative="The expected process name of the session of interest. This will be double checked before starting the session at the specified position." expr="[Process Name]" />
      <input type="text" name="Resource Name" friendlyname="Resource Name" narrative="The expected resource name of the pending session of interset. This will be double checked before starting the session" expr="[Resource Names.Resource Name]" />
      <input type="text" name="Session Status" friendlyname="Session Status" narrative="The expected status of the session. This will be double checked." expr="&quot;Pending&quot;" />
    </inputs>
    <onsuccess>04a3cb76-40e8-4017-a5b5-4bc302b9d2e5</onsuccess>
    <resource object="Blue Prism - Control - Session Management" action="Select Session" />
  </stage>
  <stage stageid="735c126f-12af-48c3-8612-7374819fd2b9" name="Process Name" type="Data">
    <display x="-210" y="0" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">Pool Runner</initialvalue>
    <alwaysinit />
  </stage>
  <stage stageid="04a3cb76-40e8-4017-a5b5-4bc302b9d2e5" name="Start Session" type="Action">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="60" />
    <inputs>
      <input type="flag" name="Set Parameter Flag?" friendlyname="Set Parameter Flag?" expr="" />
      <input type="flag" name="Parameter Flag Value" friendlyname="Parameter Flag Value" expr="" />
      <input type="number" name="Flag's Match Index" friendlyname="Flag's Match Index" expr="" />
      <input type="flag" name="Use ClickLink" friendlyname="Use ClickLink" expr="" />
    </inputs>
    <onsuccess>16199b6b-07e9-4364-a95c-dff68e169c53</onsuccess>
    <resource object="Blue Prism - Control - Session Management" action="Start Session" />
  </stage>
  <stage stageid="710f406b-8ba2-43d1-8d84-c9640a74a343" name="Start Pool Resource Sessions" type="LoopStart">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="-75" />
    <onsuccess>3b703495-fefc-42e3-b9c2-300eb4421ce4</onsuccess>
    <groupid>6fa45d7a-539d-45f1-b85c-11e83607164b</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Resource Names</loopdata>
  </stage>
  <stage stageid="16199b6b-07e9-4364-a95c-dff68e169c53" name="Start Pool Resource Sessions" type="LoopEnd">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="105" />
    <onsuccess>e7ec5734-3841-47a5-a5a7-897fd901a0b0</onsuccess>
    <groupid>6fa45d7a-539d-45f1-b85c-11e83607164b</groupid>
  </stage>
  <stage stageid="8d07b1a2-66cb-437a-b8cd-fea4e8e242ce" name="Get Session Status" type="Action">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="240" />
    <outputs>
      <output type="collection" name="Sessions" friendlyname="Sessions" narrative="A list of the sessions that are in the list." stage="Session Status" />
    </outputs>
    <onsuccess>2cda1172-f415-4cec-8fdc-e0d9dc913337</onsuccess>
    <resource object="Blue Prism - Control - Session Management" action="Get Sessions" />
  </stage>
  <stage stageid="3c953b28-8737-4811-8eb9-3ddb69fa4342" name="Session Status" type="Collection">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <display x="-225" y="-30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="16929fde-7ecb-45df-acb5-62f13a787251" name="Session Complete?" type="Decision">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <display x="195" y="375" />
    <decision expression="[Session Status.Resource] = [Resource Names.Resource Name] AND [Session Status.Status] = &quot;Completed&quot;" />
    <ontrue>40fbbb27-4abf-43dc-bc1e-7bc7816b3a3d</ontrue>
    <onfalse>6b452bb4-44a5-4e8c-b7b9-7919ab4ea8a0</onfalse>
  </stage>
  <stage stageid="2cda1172-f415-4cec-8fdc-e0d9dc913337" name="Resource Name Expected" type="LoopStart">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="285" />
    <onsuccess>fb9c79e6-97b8-44be-9637-023e6bec8ed2</onsuccess>
    <groupid>a8745954-5e9a-47cc-b919-f53ecc80d02a</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Resource Names</loopdata>
  </stage>
  <stage stageid="03f37a1d-ab4a-47fa-83b8-9bf534e3dbab" name="Resource Name Expected" type="LoopEnd">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="465" />
    <onsuccess>0ba8208b-6167-4545-a347-cebdebc3c39f</onsuccess>
    <groupid>a8745954-5e9a-47cc-b919-f53ecc80d02a</groupid>
  </stage>
  <stage stageid="fb9c79e6-97b8-44be-9637-023e6bec8ed2" name="Resource Name Actual" type="LoopStart">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="330" />
    <onsuccess>16929fde-7ecb-45df-acb5-62f13a787251</onsuccess>
    <groupid>a0ac8208-ea79-47a2-9668-fdc7666aa9a3</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Session Status</loopdata>
  </stage>
  <stage stageid="6b452bb4-44a5-4e8c-b7b9-7919ab4ea8a0" name="Resource Name Actual" type="LoopEnd">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="420" />
    <onsuccess>fa31e99f-7e27-49a6-a34b-4b7d52120fbd</onsuccess>
    <groupid>a0ac8208-ea79-47a2-9668-fdc7666aa9a3</groupid>
  </stage>
  <stage stageid="40fbbb27-4abf-43dc-bc1e-7bc7816b3a3d" name="Anchor7" type="Anchor">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="270" y="375" w="10" h="10" />
    <onsuccess>96f1571d-7d33-4d46-a7ce-c219613c86c8</onsuccess>
  </stage>
  <stage stageid="918c8949-6e56-4671-9572-61f447bf548c" name="Anchor8" type="Anchor">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="270" y="465" w="10" h="10" />
    <onsuccess>03f37a1d-ab4a-47fa-83b8-9bf534e3dbab</onsuccess>
  </stage>
  <stage stageid="884f902f-8623-4a74-98a4-510b3a9446a5" name="Session Complete Exception" type="Exception">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <display x="-30" y="420" />
    <exception localized="yes" type="" detail="&quot;Session was not completed after &quot;&amp;[Retry Count]&amp;&quot; retries.&quot;" />
  </stage>
  <stage stageid="d6997da1-749e-4e09-82be-9f3435335928" name="Wait 10 seconds" type="Action">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="45" y="270" />
    <inputs>
      <input type="number" name="Duration (Seconds)" friendlyname="Duration (Seconds)" expr="10" />
    </inputs>
    <onsuccess>eb50ba97-6e91-440a-8255-54c693e3ae42</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Pause" />
  </stage>
  <stage stageid="fa31e99f-7e27-49a6-a34b-4b7d52120fbd" name="Increment Retry" type="Calculation">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="120" y="420" />
    <onsuccess>3a08df82-4069-4c1e-b52f-db63be33a052</onsuccess>
    <calculation expression="[Retry Count]+1" stage="Retry Count" />
  </stage>
  <stage stageid="52af206e-7d4d-4828-a6db-87a3bf1b1cd5" name="Retry Count" type="Data">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <display x="-165" y="-30" />
    <datatype>number</datatype>
    <initialvalue>0</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="3a08df82-4069-4c1e-b52f-db63be33a052" name="Should I Retry?" type="Decision">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <display x="45" y="420" />
    <decision expression="[Max Retries]&lt;&gt;[Retry Count]" />
    <ontrue>d6997da1-749e-4e09-82be-9f3435335928</ontrue>
    <onfalse>884f902f-8623-4a74-98a4-510b3a9446a5</onfalse>
  </stage>
  <stage stageid="3c8565ea-f8ed-4324-8acb-84096fbf9236" name="Max Retries" type="Data">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-225" y="15" />
    <datatype>number</datatype>
    <initialvalue>6</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="eb50ba97-6e91-440a-8255-54c693e3ae42" name="Anchor9" type="Anchor">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="45" y="150" w="10" h="10" />
    <onsuccess>e7ec5734-3841-47a5-a5a7-897fd901a0b0</onsuccess>
  </stage>
  <stage stageid="96f1571d-7d33-4d46-a7ce-c219613c86c8" name="Reset Retry Count" type="Calculation">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="270" y="420" />
    <onsuccess>918c8949-6e56-4671-9572-61f447bf548c</onsuccess>
    <calculation expression="0" stage="Retry Count" />
  </stage>
  <stage stageid="bea5e564-e658-41e4-b9dc-8029670ca64a" name="Test Start Sessions" type="SubSheet">
    <loginhibit onsuccess="true" />
    <display x="15" y="90" />
    <onsuccess>560b2025-9056-470a-a8f3-d954be90d4fa</onsuccess>
    <processid>69c46b31-7884-4bfa-bc8c-87802fea2872</processid>
  </stage>
  <stage stageid="3b703495-fefc-42e3-b9c2-300eb4421ce4" name="Get Session Position" type="Action">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="-30" />
    <inputs>
      <input type="text" name="Process Name" friendlyname="Process Name" narrative="Name of the process to be executed in the session" expr="[Process Name]" />
      <input type="text" name="Resource Name" friendlyname="Resource Name" narrative="Name of the resource on which the session has been created" expr="[Resource Names.Resource Name]" />
      <input type="text" name="Session Status" friendlyname="Session Status" narrative="Status of the Session to be found (Defaults to Pending)" expr="" />
    </inputs>
    <outputs>
      <output type="number" name="Position of Pending Session" friendlyname="Position of Pending Session" narrative="The 1-based index of the newly created session in the Environment list in Control Room" stage="Session Position" />
    </outputs>
    <onsuccess>c7603d6d-e089-444a-8b1b-f1f8e5edbb13</onsuccess>
    <resource object="Blue Prism - Control - Session Management" action="Get Session Position" />
  </stage>
  <stage stageid="10b30cb4-cc9d-4087-83eb-6ca9ca5b4730" name="Session Position" type="Data">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-165" y="15" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="5cabef8b-fef8-4373-9407-208cfc3b15fa" name="Clean Up" type="SubSheetInfo">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="ddeee043-3ffd-4a47-a768-629e25d16fa9" name="Start" type="Start">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <display x="15" y="-105" />
    <onsuccess>1a3bd5d0-85ce-4ecc-95d0-a59d349caccd</onsuccess>
  </stage>
  <stage stageid="400a2577-5029-44c0-9440-c02ce77548f1" name="End" type="End">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <display x="15" y="300" />
  </stage>
  <stage stageid="68a858e3-6c25-43b9-8121-853fb4cdad1c" name="Stop Resource" type="Action">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-15" />
    <inputs>
      <input type="number" name="Port" friendlyname="Port" narrative="The port number whose resource should be stopped" expr="[Resource Port.Port]" />
    </inputs>
    <onsuccess>0a3f20f8-ac68-4971-bdcc-afc5c05c1ba2</onsuccess>
    <resource object="Resource Manager" action="Stop Resource" />
  </stage>
  <stage stageid="1a3bd5d0-85ce-4ecc-95d0-a59d349caccd" name="Stop Resources" type="LoopStart">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-60" />
    <onsuccess>68a858e3-6c25-43b9-8121-853fb4cdad1c</onsuccess>
    <groupid>1c0924a4-6e94-4542-a786-c52fddc5a85c</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Resource Port</loopdata>
  </stage>
  <stage stageid="0a3f20f8-ac68-4971-bdcc-afc5c05c1ba2" name="Stop Resources" type="LoopEnd">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="30" />
    <onsuccess>8e8fc580-8302-49b3-a411-7384a40e4084</onsuccess>
    <groupid>1c0924a4-6e94-4542-a786-c52fddc5a85c</groupid>
  </stage>
  <stage stageid="d056c321-4ed0-4f2b-8a62-b4b1bb4f2f22" name="Delete Pool" type="Action">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="120" />
    <inputs>
      <input type="text" name="Username" friendlyname="Username" narrative="BP Username" expr="[Username]" />
      <input type="text" name="Password" friendlyname="Password" narrative="BP Password" expr="[Password]" />
      <input type="text" name="Pool Name" friendlyname="Pool Name" narrative="Name of the Pool to create" expr="[Pool Name]" />
    </inputs>
    <outputs>
      <output type="number" name="PID" friendlyname="PID" narrative="Process ID" stage="" />
    </outputs>
    <onsuccess>00d6ea16-2a21-46dc-aad6-796934d7be8f</onsuccess>
    <resource object="Blue Prism - Commands" action="Delete Pool" />
  </stage>
  <stage stageid="c3dced6b-27af-4cdb-b454-76cc7c6e3221" name="Exit Blue Prism Application" type="Action">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="210" />
    <onsuccess>fedd138e-7b96-4c44-8c73-45c9b5b1970f</onsuccess>
    <resource object="Blue Prism" action="Exit Application" />
  </stage>
  <stage stageid="560b2025-9056-470a-a8f3-d954be90d4fa" name="Clean Up" type="SubSheet">
    <loginhibit onsuccess="true" />
    <display x="15" y="135" />
    <onsuccess>51e6f4a5-ea22-45ab-8de6-9a525f7958da</onsuccess>
    <processid>984536c5-9f07-45c6-9320-73f1880f80db</processid>
  </stage>
  <stage stageid="e65b900e-1f03-45ab-81ea-04813db5f5c4" name="Test Flow" type="Block">
    <loginhibit onsuccess="true" />
    <display x="-60" y="-120" w="150" h="330" />
    <font family="Segoe UI" size="10" style="Regular" color="993366" />
  </stage>
  <stage stageid="8e8fc580-8302-49b3-a411-7384a40e4084" name="Wait for Resources to stop" type="Action">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="75" />
    <inputs>
      <input type="number" name="Duration (Seconds)" friendlyname="Duration (Seconds)" expr="15" />
    </inputs>
    <onsuccess>d056c321-4ed0-4f2b-8a62-b4b1bb4f2f22</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Pause" />
  </stage>
  <stage stageid="acd4fdb4-3d8b-4483-96f1-b006614beb61" name="Publish Test Process" type="Action">
    <loginhibit onsuccess="true" />
    <display x="15" y="-45" />
    <inputs>
      <input type="text" name="Name" friendlyname="Name" narrative="The name of the process to publish" expr="[Process Name]" />
    </inputs>
    <onsuccess>5a77f1a9-7126-4517-9bd9-14bb6c095752</onsuccess>
    <resource object="Blue Prism - Studio - Process / Object" action="Publish Process" />
  </stage>
  <stage stageid="6401e1fc-5da3-4a0e-9396-fe52d3475195" name="Session Assignment" type="Block">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-60" y="-135" w="255" h="375" />
    <font family="Segoe UI" size="10" style="Regular" color="FF9900" />
  </stage>
  <stage stageid="5cb02692-1ea2-4949-bef7-2972e3825682" name="Session Variables" type="Block">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-270" y="-45" w="165" h="165" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="00e4c497-6b2e-4c18-a057-effa7f532fc7" name="Recover1" type="Recover">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <loginhibit />
    <display x="135" y="210" />
    <onsuccess>caf9fac2-80c2-49e0-bc74-9799499a5f2b</onsuccess>
  </stage>
  <stage stageid="ca81d0bb-dcdc-4fce-b81f-3abde4799337" name="Exception (Failure)" type="Data">
    <loginhibit onsuccess="true" />
    <display x="-285" y="45" />
    <datatype>text</datatype>
    <initialvalue />
    <alwaysinit />
  </stage>
  <stage stageid="caf9fac2-80c2-49e0-bc74-9799499a5f2b" name="Get Exception" type="Calculation">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="270" />
    <onsuccess>161cef5c-0c99-4dfd-8784-0f02d8d2c888</onsuccess>
    <calculation expression="ExceptionDetail()" stage="Exception (Failure)" />
  </stage>
  <stage stageid="161cef5c-0c99-4dfd-8784-0f02d8d2c888" name="Clean Up" type="SubSheet">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="315" />
    <onsuccess>8a6c7e08-bd3f-47da-ae88-20309184ffe3</onsuccess>
    <processid>984536c5-9f07-45c6-9320-73f1880f80db</processid>
  </stage>
  <stage stageid="8a6c7e08-bd3f-47da-ae88-20309184ffe3" name="Resume1" type="Resume">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <loginhibit />
    <display x="135" y="360" />
    <onsuccess>cf929b32-a5d9-426e-b311-f6c7b70ac1ac</onsuccess>
  </stage>
  <stage stageid="fedd138e-7b96-4c44-8c73-45c9b5b1970f" name="Exception Present?" type="Decision">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <display x="15" y="255" />
    <decision expression="[Exception (Failure)]&lt;&gt;&quot;&quot;" />
    <ontrue>ca04b2b8-9734-42fd-a971-428a0b2f4451</ontrue>
    <onfalse>400a2577-5029-44c0-9440-c02ce77548f1</onfalse>
  </stage>
  <stage stageid="ca04b2b8-9734-42fd-a971-428a0b2f4451" name="Test Failure Reason" type="Exception">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <display x="105" y="255" />
    <exception localized="yes" type="" detail="&quot;Test Failure. Exception: &quot;&amp;[Exception (Failure)]" />
  </stage>
  <stage stageid="cf929b32-a5d9-426e-b311-f6c7b70ac1ac" name="End2" type="End">
    <subsheetid>e301ad7a-58c5-4dca-90c8-acc1ce895dbf</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="135" y="405" />
  </stage>
  <stage stageid="91bc8bfd-c284-4a8d-806a-d7ddd6f67a76" name="Session Variables" type="Block">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-270" y="-60" w="150" h="120" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="63c4388a-b623-4990-a3bc-929905885545" name="Run Sessions" type="Block">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-75" y="-150" w="390" h="690" />
    <font family="Segoe UI" size="10" style="Regular" color="FFCC99" />
  </stage>
  <stage stageid="99e2de6f-3a70-4b33-845f-f94573ce8a2f" name="Recover1" type="Recover">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit />
    <display x="-30" y="510" />
    <onsuccess>b5b6bc56-6319-4f0b-b159-344784f6f7f3</onsuccess>
  </stage>
  <stage stageid="b5b6bc56-6319-4f0b-b159-344784f6f7f3" name="Get Exception" type="Calculation">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-30" y="570" />
    <onsuccess>5dc9e9e0-e4c6-438b-9be5-124cce222192</onsuccess>
    <calculation expression="ExceptionDetail()" stage="Exception (Failure)" />
  </stage>
  <stage stageid="5dc9e9e0-e4c6-438b-9be5-124cce222192" name="Clean Up" type="SubSheet">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-30" y="615" />
    <onsuccess>0d961ddb-0f42-4573-8706-30eac7dbda4e</onsuccess>
    <processid>984536c5-9f07-45c6-9320-73f1880f80db</processid>
  </stage>
  <stage stageid="0d961ddb-0f42-4573-8706-30eac7dbda4e" name="Resume1" type="Resume">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit />
    <display x="-30" y="660" />
    <onsuccess>bc9fb146-4570-43bb-ace8-8f46d20f9a81</onsuccess>
  </stage>
  <stage stageid="bc9fb146-4570-43bb-ace8-8f46d20f9a81" name="End2" type="End">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="-30" y="705" />
  </stage>
  <stage stageid="00d6ea16-2a21-46dc-aad6-796934d7be8f" name="Unpublish Process" type="Action">
    <subsheetid>984536c5-9f07-45c6-9320-73f1880f80db</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="165" />
    <inputs>
      <input type="text" name="Name" friendlyname="Name" narrative="The name of the process to publish" expr="[Process Name]" />
    </inputs>
    <onsuccess>c3dced6b-27af-4cdb-b454-76cc7c6e3221</onsuccess>
    <resource object="Blue Prism - Studio - Process / Object" action="Unpublish Process" />
  </stage>
  <stage stageid="e7ec5734-3841-47a5-a5a7-897fd901a0b0" name="Navigate to home" type="Action">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="150" />
    <inputs>
      <input type="text" name="Tab Name" friendlyname="Tab Name" narrative="Name of Tab to Click" expr="&quot;Home&quot;" />
    </inputs>
    <onsuccess>588fe254-97b8-48d0-800e-e7ece6692532</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Go to Tab" />
  </stage>
  <stage stageid="588fe254-97b8-48d0-800e-e7ece6692532" name="Go Back to Control Room" type="Action">
    <subsheetid>69c46b31-7884-4bfa-bc8c-87802fea2872</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="195" y="195" />
    <inputs>
      <input type="text" name="Tab Name" friendlyname="Tab Name" narrative="Name of Tab to Click" expr="&quot;Control&quot;" />
    </inputs>
    <onsuccess>8d07b1a2-66cb-437a-b8cd-fea4e8e242ce</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Go to Tab" />
  </stage>
  <stage stageid="17ea0779-9717-452e-8d6d-8673c49d06a0" name="Resource Startup (SSO)" type="Action">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="180" y="30" />
    <inputs>
      <input type="flag" name="SSO" friendlyname="SSO" narrative="True to login using Active Directory authentication. If this is False and Username is empty, a public resource PC is started" expr="True" />
      <input type="text" name="Username" friendlyname="Username" narrative="The username to use for the resource PC. Ignored if SSO is True. If this is empty and SSO is False, this will create a public resource" expr="" />
      <input type="password" name="Password" friendlyname="Password" narrative="The password to use for the resource. Only used if Username is given" expr="" />
      <input type="number" name="Port" friendlyname="Port" narrative="The port number on which the resource PC should listen" expr="[Resource Port.Port]" />
    </inputs>
    <outputs>
      <output type="number" name="Process ID" friendlyname="Process ID" narrative="The PID of the newly created process" stage="" />
    </outputs>
    <onsuccess>b27eff10-2509-46f5-b40c-66cba9095d52</onsuccess>
    <resource object="Resource Manager" action="Start Resource" />
  </stage>
  <stage stageid="21a1f50f-5c59-40f8-9c08-ea6442d27c97" name="Anchor10" type="Anchor">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="180" y="-15" w="10" h="10" />
    <onsuccess>17ea0779-9717-452e-8d6d-8673c49d06a0</onsuccess>
  </stage>
  <stage stageid="b27eff10-2509-46f5-b40c-66cba9095d52" name="Anchor11" type="Anchor">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="180" y="75" w="10" h="10" />
    <onsuccess>d21a9148-8426-4cf4-93dc-cdf56fd7526b</onsuccess>
  </stage>
  <stage stageid="13ab2703-9133-450e-b831-e285dc4e4cbe" name="SSO?" type="Decision">
    <subsheetid>fbd058cd-f5c6-4c44-9121-302b5516d961</subsheetid>
    <display x="105" y="-15" />
    <decision expression="SingleSignon()" />
    <ontrue>21a1f50f-5c59-40f8-9c08-ea6442d27c97</ontrue>
    <onfalse>fd32782f-ab30-4426-8664-8d41e1cbb38c</onfalse>
  </stage>
</process>