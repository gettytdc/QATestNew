<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Blue Prism Help.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>操作：</title>
        <link type="text/css" href="../../AutomateHelp.css" rel="stylesheet"/>
		<link href="../../TableStyles/bp_footer_tablestyle.css" rel="stylesheet"/>
		<link href="../../TableStyles/bp-table-column-header.css" rel="stylesheet"/>
        <link href="../../TableStyles/bp-table-row-header.css" rel="stylesheet"/>
    </head>
    <body>
        <h1 class="pagebreak">操作</h1>
        <p>Web API 定义可以包含多个操作，其中每个操作表示使用所需的 HTTP 方法对特定端点发出的不同请求。API 的所有已配置操作将在导航树中显示，并在选择<b>操作</b>节点时在主屏幕中列出。</p>
        <p><a href="../Images/api-actions.png"><img data-mc-width="957" data-mc-height="515" src="../Images/api-actions_thumb_0_128.png" tabindex=""/></a>
        </p>
        <p>点击“添加操作”<b></b>可为 API 定义创建新操作并配置关联参数。</p>
        <h2 class="pagebreak">基本 API 定义设置</h2>
        <p>添加名称和描述，并应用特定于操作的设置。</p>
        <p><a href="../Images/api-action-basic.png"><img data-mc-width="606" data-mc-height="335" src="../Images/api-action-basic_thumb_0_128.png" tabindex=""/></a>
        </p>
        <h3>名称</h3>
        <p>操作的唯一名称。在 Object Studio 和 Process Studio 中为操作选择业务对象时使用该名称。</p>
        <p><a href="../Images/api-action-select.png"><img data-mc-width="606" data-mc-height="175" src="../Images/api-action-select_thumb_0_128.png" tabindex=""/></a>
        </p>
        <h3>描述</h3>
        <p>可选描述提供了有关操作的详细信息。</p>
        <h3>已启用</h3>
        <p>必须先启用操作，之后方可在对象和流程中进行选择。</p>
        <h3 class="pagebreak"><a name="Enable"></a>启用请求数据输出参数</h3>
        <p>选中后，在 Object Studio 和 Process Studio 中为操作创建<i>请求数据</i>输出。操作运行时，系统会使用 API 请求数据填充关联的数据项。</p>
        <p><a href="../Images/api-request-data.png"><img data-mc-width="905" data-mc-height="414" src="../Images/api-request-data_thumb_0_128.png" tabindex=""/></a>
        </p>
        <h3>禁用请求发送</h3>
        <p>选中此选项后，系统将生成请求数据，但该请求不会发送到服务器。与“启用请求数据输出参数”<i></i>结合使用时，可在不联系服务器的情况下生成请求，从而为调试和评估请求提供一种机制。</p>
        <h2 class="pagebreak">参数（特定于操作）</h2>
        <p>这些参数特定于操作，并作为对象和流程中操作的输入与通用参数结合使用。当包含在方括号中时，参数名称将以动态方式用于将其值添加到 URL、标头值和请求正文中。</p>
        <p> <a href="../Images/api-action-parameters.png"><img class="MCPopupThumbnail img imglargeimage75pc" data-mc-width="680" data-mc-height="199" src="../Images/api-action-parameters_thumb_0_128.png" tabindex=""/></a></p>
        <p class="note">有关详细信息，请参阅<a href="api-parameters.htm">参数</a>。</p>
        <h2>请求</h2>
        <p>通过选择所需的 HTTP 方法并添加 URL 路径、正文内容和标头，定义将对该 API 端点发出的 HTTP 请求。</p>
        <p><a href="../Images/api-action-parameters2.png"><img data-mc-width="604" data-mc-height="328" src="../Images/api-action-parameters2_thumb_0_128.png" tabindex=""/></a>
        </p>
        <h3>方法</h3>
        <p>用于请求的 HTTP 方法。下拉列表包含标准 HTTP 方法，但可以将任何请求动词输入到自由文本字段中。系统会在字段上执行验证，以阻止输入禁用的字符。</p>
        <h3>URL 路径</h3>
        <p>与基本 URL 一起使用时特定于定义特定请求的操作的 URL 路径。可以在方括号中使用通用参数和特定于请求的参数将该 URL 路径参数化。</p>
        <p>例如，基本 URL 是：</p>
        <p class="code_sample">http://staff.database.com</p>
        <p>URL 路径是：</p>
        <p class="code_sample">/api/[version]/employee/[id]</p>
        <p>在扩展参数并将其添加到基本 URL 后，系统对此地址发出请求：</p>
        <p class="code_sample">http://staff.database.com/api/v1/employee/26855</p>
        <h3 class="pagebreak">正文</h3>
        <p>使用以下一个内容类型配置要随 HTTP 请求发送的内容：</p>
        <ul>
            <li class="bullet_1" value="1"><b>无</b>—该请求不包括正文内容。这通常用于获取信息的操作，如使用 GET 方法的操作。</li>
            <li class="bullet_1" value="2"><b>模板</b>—发送基于文本的正文内容，如 JSON 或 XML。参数可用于将数据添加到请求正文中。</li>
            <li class="bullet_1" value="3"><b>单个文件</b>—作为 API 请求的一部分发送文件。API 定义指定一个用于通过流程中的数据环节引用文件的输入参数。</li>
            <li class="bullet_1" value="4"><b>多个文件</b>—作为 API 请求的一部分发送多个文件。API 定义指定一个用于通过流程中的集合环节引用文件的输入参数。</li>
            <li class="bullet_1" value="5"><b>自定义代码</b>—对于复杂场景，可以使用代码生成请求正文。如有需要，可以包含来自 API 定义的“通用代码”区域的代码。</li>
        </ul>
        <h3>标头（特定于操作）</h3>
        <p>为特定于此操作的每个标头添加名称和值。请求中使用的标头由 API 定义中的通用标头和在操作级别设置的标头组合而成。如果特定于操作的标头与通用标头同名，则在任何请求中都将使用特定于操作的值。</p>
        <p class="note">有关详细信息，请参阅<a href="api-headers.htm">标头</a>。</p>
        <h2><a name="Response"></a>响应</h2>
        <p>使用 JSON 路径或自定义代码转换 HTTP 响应以提取所需数据。数据可以存储在数据项中，以便在对象或流程的其他环节中使用。自定义代码可用于配置更复杂的响应，如对响应数据执行计算。</p>
        <p>使用以下字段定义响应输出：</p>
        <ul>
            <li class="bullet_1" value="1"><b>参数</b>—为存储指定数据而创建的输出参数的名称。</li>
            <li class="bullet_1" value="2"><b>数据类型</b>—输出参数的数据类型。</li>
            <li class="bullet_1" value="3"><b>方法</b>—方法可以是 JSONPath 或自定义代码。如果使用自定义代码，则输出是需要分配的 ref 参数。</li>
            <li class="bullet_1" value="4"><b>JSON 路径</b>—如果使用 JSONPath，则表达式需要将 JSON 的特定元素提取到输出参数中。这些输出参数具有指定的 Blue Prism 数据类型，而使用 JSON 路径找到的对象将转换为该数据类型。</li>
            <li class="note" value="5">有关配置响应的详细信息，请参阅<a href="api-response.htm">使用 JSON 路径提取响应数据</a>。</li>
        </ul>
        <p> </p>
        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../TableStyles/bp_footer_tablestyle.css');" class="TableStyle-bp_footer_tablestyle" cellspacing="0">
            <col class="TableStyle-bp_footer_tablestyle-Column-Column1"/>
            <tbody>
                <tr class="TableStyle-bp_footer_tablestyle-Body-Body1">
                    <td class="TableStyle-bp_footer_tablestyle-BodyD-Column1-Body1"> </td>
                </tr>
                <tr class="TableStyle-bp_footer_tablestyle-Body-Body1">
                    <td style="text-align: center;" class="TableStyle-bp_footer_tablestyle-BodyD-Column1-Body1">机密商业信息</td>
                </tr>
                <tr class="TableStyle-bp_footer_tablestyle-Body-Body1">
                    <td style="text-align: center;" class="TableStyle-bp_footer_tablestyle-BodyA-Column1-Body1">®Blue Prism 是 Blue Prism Limited 的注册商标</td>
                </tr>
            </tbody>
        </table>
    </body>
</html>