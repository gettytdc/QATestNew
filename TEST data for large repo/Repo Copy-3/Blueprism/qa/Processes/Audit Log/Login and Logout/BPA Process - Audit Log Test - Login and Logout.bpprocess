<process name="Audit Log Test - Login and Logout" version="1.0" bpversion="6.9.0.23941" narrative="Testing audit log for login and logout." byrefcollection="true" preferredid="82e46339-12c5-4430-b165-45a5936a1f72" published="true">
  <view>
    <camerax>144</camerax>
    <cameray>790</cameray>
    <zoom version="2">1.25</zoom>
  </view>
  <preconditions />
  <endpoint narrative="" />
  <subsheet subsheetid="531c44e8-aa99-487d-b96b-a23e3608ba58" type="Normal" published="False">
    <name>Publish and Unpublish</name>
    <view>
      <camerax>0</camerax>
      <cameray>0</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="72d26f9c-a788-4e28-89c1-e750c9ff83d6" type="Normal" published="False">
    <name>Compare Collections</name>
    <view>
      <camerax>0</camerax>
      <cameray>85</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="0c66f21a-fe69-478a-a536-3fe2c8f1d65f" type="Normal" published="False">
    <name>Wait N Seconds</name>
    <view>
      <camerax>0</camerax>
      <cameray>0</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="73efd86a-ba69-4d45-885d-704597548f6a" type="Normal" published="False">
    <name>Get Audit Log</name>
    <view>
      <camerax>0</camerax>
      <cameray>63</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="20954af5-0b02-445f-b4a6-265382485681" type="Normal" published="False">
    <name>Global Variables</name>
    <view>
      <camerax>0</camerax>
      <cameray>22</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="ae5004f8-45e0-439a-9f14-38e1d1232c95" type="Normal" published="False">
    <name>Log out and back in with native auth</name>
    <view>
      <camerax>0</camerax>
      <cameray>-42</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="cbdd6df3-1cff-48f4-86c3-379b18de47cd" type="Normal" published="False">
    <name>Log in with External provider</name>
    <view>
      <camerax>0</camerax>
      <cameray>57</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <stage stageid="0112b994-ccaf-4cf5-bb89-9218b534b3dd" name="Start" type="Start">
    <display x="15" y="-285" w="90" h="30" />
    <onsuccess>fa75ab7d-2e74-4bf5-97a0-3b8be70dcc64</onsuccess>
  </stage>
  <stage stageid="542de988-14bf-414c-b734-a384d34ff81a" name="Stage1" type="ProcessInfo">
    <display x="-165" y="-195" w="150" h="90" />
  </stage>
  <stage stageid="588b44f8-99fb-47a5-b857-9af9fe97f45a" name="Launch BP" type="Action">
    <display x="15" y="45" w="90" h="30" />
    <outputs>
      <output type="number" name="pid" narrative="PID of the process" stage="BluePrism PID" />
    </outputs>
    <onsuccess>30e99199-f840-45a6-9643-2be5be35b699</onsuccess>
    <resource object="Blue Prism" action="Launch and Get PID" />
  </stage>
  <stage stageid="a693d567-b654-49c8-8159-3343b25b4a15" name="Local Variables" type="Block">
    <display x="-240" y="-135" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="76470549-20b5-4594-8ab9-d809ea2d103a" name="Log out and back in with native auth" type="SubSheetInfo">
    <subsheetid>ae5004f8-45e0-439a-9f14-38e1d1232c95</subsheetid>
    <narrative>Logs out of Blue Prism and Logs back in immediately.</narrative>
    <display x="-165" y="-75" w="150" h="90" />
  </stage>
  <stage stageid="1a676fa1-1713-4ee3-a121-b484fce51507" name="Start" type="Start">
    <subsheetid>ae5004f8-45e0-439a-9f14-38e1d1232c95</subsheetid>
    <preconditions>
      <condition narrative="None." />
    </preconditions>
    <postconditions>
      <condition narrative="None." />
    </postconditions>
    <display x="15" y="-105" w="90" h="30" />
    <onsuccess>c8ffd7f6-1588-47ab-ae92-088aaab6288c</onsuccess>
  </stage>
  <stage stageid="1a84c265-9d0c-4cb2-8b5b-c5cf45cd7df6" name="End" type="End">
    <subsheetid>ae5004f8-45e0-439a-9f14-38e1d1232c95</subsheetid>
    <display x="15" y="105" w="90" h="30" />
  </stage>
  <stage stageid="c8ffd7f6-1588-47ab-ae92-088aaab6288c" name="Sign Out" type="Action">
    <subsheetid>ae5004f8-45e0-439a-9f14-38e1d1232c95</subsheetid>
    <display x="15" y="-45" w="90" h="30" />
    <onsuccess>44029396-9b81-434f-ba8b-c6c2a78ca391</onsuccess>
    <resource object="Blue Prism" action="Sign Out" />
  </stage>
  <stage stageid="6c3f2761-a419-4bac-b167-0a47adbb9632" name="Note1" type="Note">
    <subsheetid>ae5004f8-45e0-439a-9f14-38e1d1232c95</subsheetid>
    <narrative>Log Out of Blue Prism</narrative>
    <display x="150" y="-45" w="120" h="30" />
    <font family="Segoe UI" size="10" style="Bold" color="008000" />
    <onsuccess>c8ffd7f6-1588-47ab-ae92-088aaab6288c</onsuccess>
  </stage>
  <stage stageid="6d8165e9-7793-413c-b9e9-460646ef4577" name="Global Variables" type="SubSheetInfo">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <narrative>Variables that are available accross the process.</narrative>
    <display x="-150" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="b8254ee4-330d-42bd-abbf-cfd5915cae4b" name="Start" type="Start">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <preconditions>
      <condition narrative="None." />
    </preconditions>
    <postconditions>
      <condition narrative="None." />
    </postconditions>
    <display x="75" y="-90" />
    <onsuccess>470a3e58-a8b9-4a5a-8129-1b67b1f0ce94</onsuccess>
  </stage>
  <stage stageid="470a3e58-a8b9-4a5a-8129-1b67b1f0ce94" name="End" type="End">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="75" y="75" />
  </stage>
  <stage stageid="d3bafb31-5fa5-40bb-bdfe-d62668368f1e" name="Username" type="Data">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-150" y="-15" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">admin</initialvalue>
    <alwaysinit />
  </stage>
  <stage stageid="d6e61fce-67a5-40ea-ab55-be2b7df06c80" name="Password" type="Data">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-150" y="15" w="120" h="30" />
    <datatype>password</datatype>
    <initialvalueenc>32,17,25,89,3</initialvalueenc>
    <alwaysinit />
  </stage>
  <stage stageid="12cf2ec5-ae19-4a5e-9d7a-a4e5710fa3a3" name="Global Variables" type="Block">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-225" y="-45" w="150" h="345" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="459c6e33-9da9-4c16-a896-68e2c4f135be" name="BluePrism PID" type="Data">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-150" y="45" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <alwaysinit />
  </stage>
  <stage stageid="bff76489-de7e-4d14-9366-67df720de0d4" name="Sign In" type="Action">
    <loginhibit onsuccess="true" />
    <display x="180" y="165" w="90" h="30" />
    <inputs>
      <input type="text" name="Username" friendlyname="Username" expr="" />
      <input type="password" name="Password" friendlyname="Password" expr="" />
      <input type="password" name="New Password" friendlyname="New Password" narrative="If this is your first login it will prompt you to change the password." expr="" />
      <input type="flag" name="Expect Password Reset" friendlyname="Expect Password Reset" expr="" />
      <input type="flag" name="Expected License Wizard" friendlyname="Expected License Wizard" expr="" />
    </inputs>
    <outputs>
      <output type="text" name="Locale" friendlyname="Locale" narrative="Blue Prism Locale setting" stage="" />
    </outputs>
    <onsuccess>d5ecd59d-13a2-41a3-a8fb-fd9b9578db64</onsuccess>
    <resource object="Blue Prism" action="Sign In" />
  </stage>
  <stage stageid="d5ecd59d-13a2-41a3-a8fb-fd9b9578db64" name="Log out and back in with native auth" type="SubSheet">
    <display x="180" y="225" w="90" h="30" />
    <onsuccess>b0dbb180-0c58-4c25-8179-a8e7f8aaae3e</onsuccess>
    <processid>ae5004f8-45e0-439a-9f14-38e1d1232c95</processid>
  </stage>
  <stage stageid="6e29bf0e-491f-46ee-90ba-3c744324b740" name="Get Audit Log" type="SubSheetInfo">
    <subsheetid>73efd86a-ba69-4d45-885d-704597548f6a</subsheetid>
    <narrative>Gets Content of Audit Log table.</narrative>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="d78f33bd-4788-4408-b618-028c4c7c84b7" name="Start" type="Start">
    <subsheetid>73efd86a-ba69-4d45-885d-704597548f6a</subsheetid>
    <preconditions>
      <condition narrative="None." />
    </preconditions>
    <postconditions>
      <condition narrative="None." />
    </postconditions>
    <display x="15" y="-105" w="90" h="30" />
    <onsuccess>d88a5280-4ebf-4851-820a-f50772a7d365</onsuccess>
  </stage>
  <stage stageid="c5ce0b84-7e6d-4fa8-95e4-1c940e26fbe4" name="End" type="End">
    <subsheetid>73efd86a-ba69-4d45-885d-704597548f6a</subsheetid>
    <display x="15" y="195" w="90" h="30" />
  </stage>
  <stage stageid="d88a5280-4ebf-4851-820a-f50772a7d365" name="Go to System" type="Action">
    <subsheetid>73efd86a-ba69-4d45-885d-704597548f6a</subsheetid>
    <display x="15" y="-45" w="90" h="30" />
    <inputs>
      <input type="text" name="Tab Name" narrative="Name of Tab to Click" expr="&quot;System&quot;" />
    </inputs>
    <onsuccess>e8a6aa43-499e-431a-a737-a5f35cf57237</onsuccess>
    <resource object="Blue Prism - Basic Actions" action="Go to Tab" />
  </stage>
  <stage stageid="e8a6aa43-499e-431a-a737-a5f35cf57237" name="Select Audit Logs" type="Action">
    <subsheetid>73efd86a-ba69-4d45-885d-704597548f6a</subsheetid>
    <display x="15" y="15" w="90" h="30" />
    <inputs>
      <input type="text" name="Tree Name" narrative="Name of the tree to be extended." expr="&quot;Audit&quot;" />
      <input type="text" name="Item Name" narrative="Name of the item to be clicked on." expr="&quot;Audit Logs&quot;" />
    </inputs>
    <onsuccess>17ed75ef-a55e-43ae-b6aa-93c3106c30c1</onsuccess>
    <resource object="Blue Prism - System - Basic Actions" action="Click Item From System Tree" />
  </stage>
  <stage stageid="17ed75ef-a55e-43ae-b6aa-93c3106c30c1" name="Get Audit Log Table" type="Action">
    <subsheetid>73efd86a-ba69-4d45-885d-704597548f6a</subsheetid>
    <display x="15" y="75" w="90" h="30" />
    <inputs>
      <input type="date" name="Audit Date" narrative="Date for the Audit to View" expr="Today()" />
    </inputs>
    <outputs>
      <output type="collection" name="Audit Log Table" narrative="Contents of the Audit Log Viewer" stage="Audit Log Table" />
    </outputs>
    <onsuccess>f7e34b91-a269-4ac5-83a6-7105fef1dd4d</onsuccess>
    <resource object="Blue Prism - System - Audit" action="Get View Log Content for Audit Log" />
  </stage>
  <stage stageid="f7e34b91-a269-4ac5-83a6-7105fef1dd4d" name="Reverse Collection" type="Action">
    <subsheetid>73efd86a-ba69-4d45-885d-704597548f6a</subsheetid>
    <display x="15" y="135" w="90" h="30" />
    <inputs>
      <input type="collection" name="Collection" narrative="The collection to be reversed." expr="[Audit Log Table]" />
    </inputs>
    <outputs>
      <output type="collection" name="Reversed Collection" narrative="The reversed collection." stage="Audit Log Table" />
    </outputs>
    <onsuccess>c5ce0b84-7e6d-4fa8-95e4-1c940e26fbe4</onsuccess>
    <resource object="Utility - Collection Manipulation" action="Reverse Collection" />
  </stage>
  <stage stageid="66d5bd4e-b8ee-47fc-90a4-d8fda4bf5775" name="Audit Log Table" type="Collection">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-150" y="75" w="120" h="30" />
    <datatype>collection</datatype>
    <alwaysinit />
    <collectioninfo>
      <field name="Time (Local)" type="text" />
      <field name="Narrative" type="text" />
      <field name="Comments" type="text" />
    </collectioninfo>
  </stage>
  <stage stageid="b0dbb180-0c58-4c25-8179-a8e7f8aaae3e" name="Get Audit Log" type="SubSheet">
    <display x="180" y="285" w="90" h="30" />
    <onsuccess>60832e65-2927-4907-bd1b-b59e19ed49f5</onsuccess>
    <processid>73efd86a-ba69-4d45-885d-704597548f6a</processid>
  </stage>
  <stage stageid="fa75ab7d-2e74-4bf5-97a0-3b8be70dcc64" name="Get Username" type="Calculation">
    <display x="15" y="-225" w="90" h="30" />
    <onsuccess>09659b54-e465-4e65-b893-e1fb7f5326c8</onsuccess>
    <calculation expression="GetUserName()" stage="Current UserName" />
  </stage>
  <stage stageid="6c6899a3-9124-4656-92da-ab91119ad512" name="Current UserName" type="Data">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-150" y="105" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <alwaysinit />
  </stage>
  <stage stageid="65654a28-926c-4eb3-b671-970cd5329ab2" name="Get UTC Time" type="Calculation">
    <display x="15" y="-105" w="90" h="30" />
    <onsuccess>482db68d-de5c-4f99-a8cb-d3a62447f259</onsuccess>
    <calculation expression="UTCTime()" stage="UTC time at start of test" />
  </stage>
  <stage stageid="bb256380-dec0-48af-a61a-d137624b3d19" name="UTC time at start of test" type="Data">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-150" y="135" w="120" h="30" />
    <datatype>time</datatype>
    <initialvalue />
    <alwaysinit />
  </stage>
  <stage stageid="20970d30-7c6d-42a4-8f17-8c383b8263b5" name="Expected Audit Log" type="Collection">
    <display x="-165" y="-105" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
    <collectioninfo>
      <field name="Narrative" type="text" />
      <field name="Comments" type="text" />
    </collectioninfo>
  </stage>
  <stage stageid="60832e65-2927-4907-bd1b-b59e19ed49f5" name="Add row to expected reults" type="Action">
    <display x="180" y="345" w="90" h="30" />
    <inputs>
      <input type="text" name="Collection Name" narrative="The name of the collection to act upon" expr="&quot;Expected Audit Log&quot;" />
    </inputs>
    <onsuccess>d6e68e39-14b3-43d6-a224-26f01d92f4a0</onsuccess>
    <resource object="Blueprism.AutomateProcessCore.clsCollectionActions" action="Add Row" />
  </stage>
  <stage stageid="d6e68e39-14b3-43d6-a224-26f01d92f4a0" name="Populate expected results for login" type="MultipleCalculation">
    <display x="180" y="405" w="90" h="30" />
    <onsuccess>f311551f-21a7-4b38-9499-4797ea7be0c6</onsuccess>
    <steps>
      <calculation expression="&quot;User '&quot; &amp; [Current UserName] &amp; &quot;' logged into resource '&quot; &amp; [CurrentResourceName] &amp; &quot;' using Active Directory.&quot;" stage="Expected Audit Log.Narrative" />
      <calculation expression="&quot;&quot;" stage="Expected Audit Log.Comments" />
    </steps>
  </stage>
  <stage stageid="f311551f-21a7-4b38-9499-4797ea7be0c6" name="Add row to expected reults" type="Action">
    <display x="180" y="465" w="90" h="30" />
    <inputs>
      <input type="text" name="Collection Name" narrative="The name of the collection to act upon" expr="&quot;Expected Audit Log&quot;" />
    </inputs>
    <onsuccess>d0160879-a223-467b-80b6-71878176d6f4</onsuccess>
    <resource object="Blueprism.AutomateProcessCore.clsCollectionActions" action="Add Row" />
  </stage>
  <stage stageid="d0160879-a223-467b-80b6-71878176d6f4" name="Populate expected reults for logout" type="MultipleCalculation">
    <display x="180" y="525" w="90" h="30" />
    <onsuccess>4326da21-cc54-4c5e-adf7-91fb2de3ff4c</onsuccess>
    <steps>
      <calculation expression="&quot;User '&quot; &amp; [Current UserName] &amp; &quot;' logged out of resource '&quot; &amp; [CurrentResourceName] &amp; &quot;'.&quot; " stage="Expected Audit Log.Narrative" />
      <calculation expression="&quot;&quot;" stage="Expected Audit Log.Comments" />
    </steps>
  </stage>
  <stage stageid="4326da21-cc54-4c5e-adf7-91fb2de3ff4c" name="Compare Collections" type="SubSheet">
    <display x="180" y="585" w="90" h="30" />
    <inputs>
      <input type="collection" name="Expected Audit" narrative="Expected Audit Log" expr="[Expected Audit Log]" />
    </inputs>
    <onsuccess>36c88964-2cd4-4873-b6c8-d77e9b855694</onsuccess>
    <processid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</processid>
  </stage>
  <stage stageid="7d82ca8b-020b-4350-8d70-0c77439d3cdb" name="Wait N Seconds" type="SubSheetInfo">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <narrative>Waits N number of seconds.</narrative>
    <display x="-150" y="-60" w="150" h="90" />
  </stage>
  <stage stageid="5cfb9763-1204-4952-84ea-f743d61e3f28" name="Start" type="Start">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <preconditions>
      <condition narrative="None." />
    </preconditions>
    <postconditions>
      <condition narrative="None." />
    </postconditions>
    <display x="15" y="-90" w="90" h="30" />
    <inputs>
      <input type="number" name="Seconds to Wait" narrative="Number of Seconds toWait." stage="Seconds to Wait" />
    </inputs>
    <onsuccess>36b3bcbf-fda1-4a4f-be19-1d71f24f86a6</onsuccess>
  </stage>
  <stage stageid="78d0eb4a-04ae-4460-bb20-a94d11252f40" name="End" type="End">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <display x="15" y="120" w="90" h="30" />
  </stage>
  <stage stageid="36b3bcbf-fda1-4a4f-be19-1d71f24f86a6" name="Get Now" type="Calculation">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <display x="15" y="-30" w="90" h="30" />
    <onsuccess>b731092a-66d1-4702-8a5a-aff92869fd66</onsuccess>
    <calculation expression="Now()" stage="Current Time" />
  </stage>
  <stage stageid="1493e6eb-7784-473f-b2b9-d1bd6948da7d" name="Current Time" type="Data">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <display x="-150" y="105" w="120" h="30" />
    <datatype>datetime</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="77210c1f-21e9-4f6a-ae07-4878bf746412" name="Time Passed?" type="Decision">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <display x="15" y="60" w="90" h="30" />
    <decision expression="Now () &gt; [Current Time] + MakeTimeSpan(0, 0, 0, [Seconds to Wait])" />
    <ontrue>78d0eb4a-04ae-4460-bb20-a94d11252f40</ontrue>
    <onfalse>8b3564f2-f84c-4bec-a42f-327f60ce00a2</onfalse>
  </stage>
  <stage stageid="b731092a-66d1-4702-8a5a-aff92869fd66" name="Anchor6" type="Anchor">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <display x="15" y="15" w="10" h="10" />
    <onsuccess>77210c1f-21e9-4f6a-ae07-4878bf746412</onsuccess>
  </stage>
  <stage stageid="8b3564f2-f84c-4bec-a42f-327f60ce00a2" name="Anchor7" type="Anchor">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <display x="90" y="60" w="10" h="10" />
    <onsuccess>7b6f9671-6303-4dcb-8dea-e678c8ee97cf</onsuccess>
  </stage>
  <stage stageid="7b6f9671-6303-4dcb-8dea-e678c8ee97cf" name="Anchor8" type="Anchor">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <display x="90" y="15" w="10" h="10" />
    <onsuccess>b731092a-66d1-4702-8a5a-aff92869fd66</onsuccess>
  </stage>
  <stage stageid="cfe87d4d-690b-4208-8ede-3c3ec5e0479b" name="Local Variables" type="Block">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <display x="-225" y="75" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="5d4b171c-6035-4d44-a24d-cd33da38159c" name="Seconds to Wait" type="Data">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <display x="-150" y="30" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue>20</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="4cdb70cb-40e7-4807-b4d5-0e965c2ccd7d" name="Input Variables" type="Block">
    <subsheetid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</subsheetid>
    <display x="-225" y="0" w="150" h="60" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="f64c5103-5f96-4501-ba81-b743a6515ba6" name="Publish and Unpublish" type="SubSheetInfo">
    <subsheetid>531c44e8-aa99-487d-b96b-a23e3608ba58</subsheetid>
    <narrative>Publishes and Unpublishes process.</narrative>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="781b8686-781a-4e1b-a1a9-c4fd88647545" name="Start" type="Start">
    <subsheetid>531c44e8-aa99-487d-b96b-a23e3608ba58</subsheetid>
    <preconditions>
      <condition narrative="None." />
    </preconditions>
    <postconditions>
      <condition narrative="None." />
    </postconditions>
    <display x="15" y="-105" w="90" h="30" />
    <onsuccess>f6e74526-67c1-4e29-b804-b2c18a6998cb</onsuccess>
  </stage>
  <stage stageid="aff43b4c-4cad-4b0e-9fe3-38a11495f1af" name="End" type="End">
    <subsheetid>531c44e8-aa99-487d-b96b-a23e3608ba58</subsheetid>
    <display x="15" y="195" w="90" h="30" />
  </stage>
  <stage stageid="f6e74526-67c1-4e29-b804-b2c18a6998cb" name="Publish Process" type="Action">
    <subsheetid>531c44e8-aa99-487d-b96b-a23e3608ba58</subsheetid>
    <display x="15" y="-45" w="90" h="30" />
    <inputs>
      <input type="text" name="Username" narrative="username" expr="[Username]" />
      <input type="text" name="Password" narrative="password" expr="[Password]" />
      <input type="text" name="Command" narrative="command" expr="&quot;/publish &quot;&quot;&quot; &amp; [Process Name] &amp; &quot;&quot;&quot;&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="PID" narrative="PID of the process" stage="Command PID 1" />
    </outputs>
    <onsuccess>71424bca-33b5-4d9b-969e-b8b642e554ab</onsuccess>
    <resource object="Blue Prism - Commands" action="Send Command" />
  </stage>
  <stage stageid="90bf2aa3-f6b9-4067-b137-250d57d73bb5" name="Command PID 1" type="Data">
    <subsheetid>531c44e8-aa99-487d-b96b-a23e3608ba58</subsheetid>
    <display x="-195" y="15" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="8ae8c66b-605e-47ad-95fd-98896ada9bc6" name="Local Variables" type="Block">
    <subsheetid>531c44e8-aa99-487d-b96b-a23e3608ba58</subsheetid>
    <display x="-270" y="-45" w="150" h="120" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="71424bca-33b5-4d9b-969e-b8b642e554ab" name="Wait 30 Seconds" type="SubSheet">
    <subsheetid>531c44e8-aa99-487d-b96b-a23e3608ba58</subsheetid>
    <display x="15" y="15" w="90" h="30" />
    <inputs>
      <input type="number" name="Seconds to Wait" narrative="Number of Seconds toWait." expr="30" />
    </inputs>
    <onsuccess>1968eaae-c80c-4a65-a841-879cd901f729</onsuccess>
    <processid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</processid>
  </stage>
  <stage stageid="1968eaae-c80c-4a65-a841-879cd901f729" name="Unpublish Process" type="Action">
    <subsheetid>531c44e8-aa99-487d-b96b-a23e3608ba58</subsheetid>
    <display x="15" y="75" w="90" h="30" />
    <inputs>
      <input type="text" name="Username" narrative="username" expr="[Username]" />
      <input type="text" name="Password" narrative="password" expr="[Password]" />
      <input type="text" name="Command" narrative="command" expr="&quot;/unpublish &quot;&quot;&quot; &amp; [Process Name] &amp; &quot;&quot;&quot;&quot;" />
    </inputs>
    <outputs>
      <output type="number" name="PID" narrative="PID of the process" stage="Command PID 2" />
    </outputs>
    <onsuccess>5dd50a30-f405-4194-b261-e31d4b1e2228</onsuccess>
    <resource object="Blue Prism - Commands" action="Send Command" />
  </stage>
  <stage stageid="c365f322-8f22-4b1c-b131-7590702fecaf" name="Command PID 2" type="Data">
    <subsheetid>531c44e8-aa99-487d-b96b-a23e3608ba58</subsheetid>
    <display x="-195" y="45" w="120" h="30" />
    <datatype>number</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="5dd50a30-f405-4194-b261-e31d4b1e2228" name="Wait 30 Seconds" type="SubSheet">
    <subsheetid>531c44e8-aa99-487d-b96b-a23e3608ba58</subsheetid>
    <display x="15" y="135" w="90" h="30" />
    <inputs>
      <input type="number" name="Seconds to Wait" narrative="Number of Seconds toWait." expr="30" />
    </inputs>
    <onsuccess>aff43b4c-4cad-4b0e-9fe3-38a11495f1af</onsuccess>
    <processid>0c66f21a-fe69-478a-a536-3fe2c8f1d65f</processid>
  </stage>
  <stage stageid="e42a8feb-73af-4189-ac00-56678b0edc53" name="Process Name" type="Data">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-150" y="165" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">Audit Log Test</initialvalue>
    <alwaysinit />
  </stage>
  <stage stageid="36c88964-2cd4-4873-b6c8-d77e9b855694" name="Sign Out" type="Action">
    <display x="180" y="645" w="90" h="30" />
    <onsuccess>8e7cbb14-8c39-4e24-bc00-8ba506ab06a0</onsuccess>
    <resource object="Blue Prism" action="Sign Out" />
  </stage>
  <stage stageid="8e7cbb14-8c39-4e24-bc00-8ba506ab06a0" name="Exit Blue Prism" type="Action">
    <display x="180" y="705" w="90" h="30" />
    <onsuccess>46a57562-32f6-466a-a0ed-34c020a00f8b</onsuccess>
    <resource object="Blue Prism" action="Exit Application" />
  </stage>
  <stage stageid="30e99199-f840-45a6-9643-2be5be35b699" name="Attach System" type="Action">
    <display x="15" y="105" w="90" h="30" />
    <inputs>
      <input type="number" name="pid" narrative="PID to attach to" expr="[BluePrism PID]" />
    </inputs>
    <onsuccess>c92c67ad-ed30-4a52-8679-950cb39bf6d9</onsuccess>
    <resource object="Blue Prism - System (Parent)" action="Attach to Pid" />
  </stage>
  <stage stageid="53673071-d84e-433c-a833-1d7dd95e071f" name="CurrentResourceName" type="Data">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-150" y="195" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue />
    <alwaysinit />
  </stage>
  <stage stageid="09659b54-e465-4e65-b893-e1fb7f5326c8" name="Get resource name" type="Calculation">
    <display x="15" y="-165" w="90" h="30" />
    <onsuccess>65654a28-926c-4eb3-b671-970cd5329ab2</onsuccess>
    <calculation expression="Replace(GetResourceName(), &quot;_debug&quot;, &quot;&quot;)" stage="CurrentResourceName" />
  </stage>
  <stage stageid="482db68d-de5c-4f99-a8cb-d3a62447f259" name="Is SSO environment?" type="Decision">
    <display x="15" y="-45" />
    <decision expression="SingleSignon()" />
    <ontrue>72d418df-3753-4b03-ac7d-ec17d3559156</ontrue>
    <onfalse>588b44f8-99fb-47a5-b857-9af9fe97f45a</onfalse>
  </stage>
  <stage stageid="c92c67ad-ed30-4a52-8679-950cb39bf6d9" name="Sign In" type="Action">
    <display x="15" y="165" w="90" h="30" />
    <inputs>
      <input type="text" name="Username" expr="[Username]" />
      <input type="password" name="Password" expr="[Password]" />
      <input type="password" name="New Password" narrative="If this is your first login it will prompt you to change the password." expr="" />
      <input type="flag" name="Expect Password Reset" friendlyname="Expect Password Reset" expr="" />
      <input type="flag" name="Expected License Wizard" friendlyname="Expected License Wizard" expr="" />
    </inputs>
    <outputs>
      <output type="text" name="Locale" friendlyname="Locale" narrative="Blue Prism Locale setting" stage="" />
    </outputs>
    <onsuccess>659d65a6-9577-4979-8a39-b10b91f21c36</onsuccess>
    <resource object="Blue Prism" action="Sign In" />
  </stage>
  <stage stageid="659d65a6-9577-4979-8a39-b10b91f21c36" name="Log out and back in with native auth" type="SubSheet">
    <display x="15" y="225" w="90" h="30" />
    <onsuccess>c75a5232-1e18-45a6-b216-647b80994c80</onsuccess>
    <processid>ae5004f8-45e0-439a-9f14-38e1d1232c95</processid>
  </stage>
  <stage stageid="c75a5232-1e18-45a6-b216-647b80994c80" name="Get Audit Log" type="SubSheet">
    <display x="15" y="285" w="90" h="30" />
    <onsuccess>e8a80f77-3fbd-4727-9a7c-6cd50acdc65d</onsuccess>
    <processid>73efd86a-ba69-4d45-885d-704597548f6a</processid>
  </stage>
  <stage stageid="e8a80f77-3fbd-4727-9a7c-6cd50acdc65d" name="Add row to expected reults" type="Action">
    <display x="15" y="345" w="90" h="30" />
    <inputs>
      <input type="text" name="Collection Name" narrative="The name of the collection to act upon" expr="&quot;Expected Audit Log&quot;" />
    </inputs>
    <onsuccess>1097a666-0831-4b07-9ea8-94dda7f6d2cd</onsuccess>
    <resource object="Blueprism.AutomateProcessCore.clsCollectionActions" action="Add Row" />
  </stage>
  <stage stageid="1097a666-0831-4b07-9ea8-94dda7f6d2cd" name="Populate expected results for login" type="MultipleCalculation">
    <display x="15" y="405" w="90" h="30" />
    <onsuccess>cfeb7304-0413-4c51-a1c9-de4487b2bf12</onsuccess>
    <steps>
      <calculation expression="&quot;User '&quot; &amp; [Current UserName] &amp; &quot;' logged into resource '&quot; &amp; [CurrentResourceName] &amp; &quot;' using native authentication.&quot;" stage="Expected Audit Log.Narrative" />
      <calculation expression="&quot;&quot;" stage="Expected Audit Log.Comments" />
    </steps>
  </stage>
  <stage stageid="cfeb7304-0413-4c51-a1c9-de4487b2bf12" name="Add row to expected reults" type="Action">
    <display x="15" y="465" w="90" h="30" />
    <inputs>
      <input type="text" name="Collection Name" narrative="The name of the collection to act upon" expr="&quot;Expected Audit Log&quot;" />
    </inputs>
    <onsuccess>3b33fce9-a222-45be-9576-b601839535ec</onsuccess>
    <resource object="Blueprism.AutomateProcessCore.clsCollectionActions" action="Add Row" />
  </stage>
  <stage stageid="3b33fce9-a222-45be-9576-b601839535ec" name="Populate expected reults for logout" type="MultipleCalculation">
    <display x="15" y="525" w="90" h="30" />
    <onsuccess>d47789c5-d677-4568-8d1d-9b114e484bb1</onsuccess>
    <steps>
      <calculation expression="&quot;User '&quot; &amp; [Current UserName] &amp; &quot;' logged out of resource '&quot; &amp; [CurrentResourceName] &amp; &quot;'.&quot; " stage="Expected Audit Log.Narrative" />
      <calculation expression="&quot;&quot;" stage="Expected Audit Log.Comments" />
    </steps>
  </stage>
  <stage stageid="d47789c5-d677-4568-8d1d-9b114e484bb1" name="Compare Collections" type="SubSheet">
    <display x="15" y="585" w="90" h="30" />
    <inputs>
      <input type="collection" name="Expected Audit" friendlyname="Expected Audit" narrative="Expected Audit Log" expr="[Expected Audit Log]" />
    </inputs>
    <onsuccess>7dad6b6d-2243-4f34-bc3b-d35eb742b7d8</onsuccess>
    <processid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</processid>
  </stage>
  <stage stageid="7dad6b6d-2243-4f34-bc3b-d35eb742b7d8" name="Sign Out" type="Action">
    <display x="15" y="645" w="90" h="30" />
    <onsuccess>cfb6fdff-48b5-488a-8060-16cfb5ba9b17</onsuccess>
    <resource object="Blue Prism" action="Sign Out" />
  </stage>
  <stage stageid="cfb6fdff-48b5-488a-8060-16cfb5ba9b17" name="Exit Blue Prism" type="Action">
    <display x="15" y="705" w="90" h="30" />
    <onsuccess>6f6b7136-d633-46ea-8de8-e55b75555769</onsuccess>
    <resource object="Blue Prism" action="Exit Application" />
  </stage>
  <stage stageid="dc970e2c-9f2e-476c-86b3-e112e2b936ed" name="Native Authentication" type="Block">
    <loginhibit onsuccess="true" />
    <display x="-45" y="0" w="120" h="735" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="72d418df-3753-4b03-ac7d-ec17d3559156" name="Anchor3" type="Anchor">
    <loginhibit onsuccess="true" />
    <display x="180" y="-45" w="10" h="10" />
    <onsuccess>7ecbf9a5-2dde-4f2c-94df-a9d0ea92f264</onsuccess>
  </stage>
  <stage stageid="89f6bda5-24f0-4bdb-b355-4a33c3b2353e" name="Active Directory Authentication" type="Block">
    <loginhibit onsuccess="true" />
    <display x="120" y="0" w="120" h="735" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="7ecbf9a5-2dde-4f2c-94df-a9d0ea92f264" name="Launch BP" type="Action">
    <loginhibit onsuccess="true" />
    <display x="180" y="45" w="90" h="30" />
    <outputs>
      <output type="number" name="pid" friendlyname="pid" narrative="PID of the process" stage="BluePrism PID" />
    </outputs>
    <onsuccess>a8dfa536-6001-4b09-b670-d3c14eba9ac0</onsuccess>
    <resource object="Blue Prism" action="Launch and Get PID" />
  </stage>
  <stage stageid="a8dfa536-6001-4b09-b670-d3c14eba9ac0" name="Attach System" type="Action">
    <display x="180" y="105" w="90" h="30" />
    <inputs>
      <input type="number" name="pid" narrative="PID to attach to" expr="[BluePrism PID]" />
    </inputs>
    <onsuccess>bff76489-de7e-4d14-9366-67df720de0d4</onsuccess>
    <resource object="Blue Prism - System (Parent)" action="Attach to Pid" />
  </stage>
  <stage stageid="2c7a3af9-51eb-41b4-88f0-dce8d1b82513" name="Launch BP" type="Action">
    <display x="375" y="45" w="90" h="30" />
    <outputs>
      <output type="number" name="pid" narrative="PID of the process" stage="BluePrism PID" />
    </outputs>
    <onsuccess>e7b74536-dad9-4ead-a30d-cd009a75d0f7</onsuccess>
    <resource object="Blue Prism" action="Launch and Get PID" />
  </stage>
  <stage stageid="18af9ee3-ddab-4f60-9ade-920121e0281a" name="Log out and back in with native auth" type="SubSheet">
    <display x="375" y="270" w="90" h="30" />
    <onsuccess>15538ae8-1e37-42c2-97da-dca091ef5a3a</onsuccess>
    <processid>ae5004f8-45e0-439a-9f14-38e1d1232c95</processid>
  </stage>
  <stage stageid="15538ae8-1e37-42c2-97da-dca091ef5a3a" name="Get Audit Log" type="SubSheet">
    <display x="375" y="315" w="90" h="30" />
    <onsuccess>9a8256b7-4a57-4b96-b05c-a3552115dbc2</onsuccess>
    <processid>73efd86a-ba69-4d45-885d-704597548f6a</processid>
  </stage>
  <stage stageid="9a8256b7-4a57-4b96-b05c-a3552115dbc2" name="Add row to expected reults" type="Action">
    <display x="375" y="375" w="90" h="30" />
    <inputs>
      <input type="text" name="Collection Name" narrative="The name of the collection to act upon" expr="&quot;Expected Audit Log&quot;" />
    </inputs>
    <onsuccess>34e229f4-41cd-4d80-b20f-0e0c9b69a82c</onsuccess>
    <resource object="Blueprism.AutomateProcessCore.clsCollectionActions" action="Add Row" />
  </stage>
  <stage stageid="34e229f4-41cd-4d80-b20f-0e0c9b69a82c" name="Populate expected results for login" type="MultipleCalculation">
    <display x="375" y="435" w="90" h="30" />
    <onsuccess>2ccc2cb8-397d-4f10-803f-0769228b3f57</onsuccess>
    <steps>
      <calculation expression="&quot;User '&quot; &amp; [Current UserName] &amp; &quot;' logged into resource '&quot; &amp; [CurrentResourceName] &amp; &quot;' using an external provider.&quot;" stage="Expected Audit Log.Narrative" />
      <calculation expression="&quot;&quot;" stage="Expected Audit Log.Comments" />
    </steps>
  </stage>
  <stage stageid="2ccc2cb8-397d-4f10-803f-0769228b3f57" name="Add row to expected reults" type="Action">
    <display x="375" y="495" w="90" h="30" />
    <inputs>
      <input type="text" name="Collection Name" narrative="The name of the collection to act upon" expr="&quot;Expected Audit Log&quot;" />
    </inputs>
    <onsuccess>244e4d85-2252-4a2d-a198-a02183b3e605</onsuccess>
    <resource object="Blueprism.AutomateProcessCore.clsCollectionActions" action="Add Row" />
  </stage>
  <stage stageid="244e4d85-2252-4a2d-a198-a02183b3e605" name="Populate expected reults for logout" type="MultipleCalculation">
    <display x="375" y="555" w="90" h="30" />
    <onsuccess>aa250b9d-3168-4858-a10e-9774b4d52f98</onsuccess>
    <steps>
      <calculation expression="&quot;User '&quot; &amp; [Current UserName] &amp; &quot;' logged out of resource '&quot; &amp; [CurrentResourceName] &amp; &quot;'.&quot; " stage="Expected Audit Log.Narrative" />
      <calculation expression="&quot;&quot;" stage="Expected Audit Log.Comments" />
    </steps>
  </stage>
  <stage stageid="4a8e7dd4-bf1c-4ff7-813e-b6e007af00ba" name="External Provider Authentication" type="Block">
    <loginhibit onsuccess="true" />
    <display x="315" y="0" w="495" h="735" />
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="bcf6a609-2a21-407a-a521-188ff8df7f82" name="End" type="End">
    <display x="375" y="840" w="90" h="30" />
  </stage>
  <stage stageid="aa250b9d-3168-4858-a10e-9774b4d52f98" name="Compare Collections" type="SubSheet">
    <display x="375" y="600" w="90" h="30" />
    <inputs>
      <input type="collection" name="Expected Audit" friendlyname="Expected Audit" narrative="Expected Audit Log" expr="[Expected Audit Log]" />
    </inputs>
    <onsuccess>ce78bbaf-0223-41a5-b16c-0bf0ce69ed06</onsuccess>
    <processid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</processid>
  </stage>
  <stage stageid="ce78bbaf-0223-41a5-b16c-0bf0ce69ed06" name="Sign Out" type="Action">
    <display x="375" y="660" w="90" h="30" />
    <onsuccess>7c4c5da9-f512-4544-a46b-d3950fe551d5</onsuccess>
    <resource object="Blue Prism" action="Sign Out" />
  </stage>
  <stage stageid="7c4c5da9-f512-4544-a46b-d3950fe551d5" name="Exit Blue Prism" type="Action">
    <display x="375" y="705" w="90" h="30" />
    <onsuccess>bcf6a609-2a21-407a-a521-188ff8df7f82</onsuccess>
    <resource object="Blue Prism" action="Exit Application" />
  </stage>
  <stage stageid="376c36fa-500a-4f3d-9d2b-6c9e9f26f1c1" name="Note2" type="Note">
    <narrative>TODO in future when UI is added: 
1. configure the suth server url
2. add a user and configure them to use external provider login (use the values set in the external username and password in global variables)
</narrative>
    <display x="375" y="-90" w="270" h="90" />
    <onsuccess>2c7a3af9-51eb-41b4-88f0-dce8d1b82513</onsuccess>
  </stage>
  <stage stageid="60fe1c4d-e771-4c1b-b061-9825a6489f37" name="Compare Collections" type="SubSheetInfo">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <narrative>Compares values recorded in Audit Log against values that are EXPECTED in Audit Log.</narrative>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="bf46a30d-463d-445a-a129-f29716157675" name="Start" type="Start">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <preconditions>
      <condition narrative="None." />
    </preconditions>
    <postconditions>
      <condition narrative="None." />
    </postconditions>
    <display x="15" y="-105" w="90" h="30" />
    <inputs>
      <input type="collection" name="Expected Audit" narrative="Expected Audit Log" stage="Expected Audit Log" />
    </inputs>
    <onsuccess>9569479c-d12e-48d7-93b4-000d25ea6a40</onsuccess>
  </stage>
  <stage stageid="cd99e53e-5438-4b92-b0ad-dbf2dad0e8a6" name="End" type="End">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="15" y="315" w="90" h="30" />
  </stage>
  <stage stageid="85e5720b-9385-421a-9470-127fcc068786" name="Expected Audit Log" type="Collection">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="-195" y="-15" w="120" h="30" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
    <collectioninfo>
      <field name="Narrative" type="text" />
      <field name="Comments" type="text" />
    </collectioninfo>
  </stage>
  <stage stageid="5a05aa32-1704-4ac7-9cc5-bea0d0ea81e5" name="Audit Log Table" type="LoopStart">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="15" y="15" w="90" h="30" />
    <onsuccess>093083d4-cc40-476a-8159-4d856270e169</onsuccess>
    <groupid>fc44bec2-0e77-4ea3-8e5d-6b4ab5e9667d</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Audit Log Table</loopdata>
  </stage>
  <stage stageid="9cf03e58-04a8-49d4-8bc3-45ee6d743e03" name="Audit Log Table" type="LoopEnd">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="15" y="195" w="90" h="30" />
    <onsuccess>6f09a53f-0716-493e-9847-7b7225804a7d</onsuccess>
    <groupid>fc44bec2-0e77-4ea3-8e5d-6b4ab5e9667d</groupid>
  </stage>
  <stage stageid="093083d4-cc40-476a-8159-4d856270e169" name="Correct Time?" type="Decision">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="15" y="75" w="90" h="30" />
    <decision expression="ToTime([Audit Log Table.Time (Local)]) &gt; [UTC time at start of test]" />
    <ontrue>31d26f3e-9bf4-4e8b-be19-2388046626d2</ontrue>
    <onfalse>9f37c2ec-d7b8-42f2-8f1d-ec97674c15f3</onfalse>
  </stage>
  <stage stageid="9569479c-d12e-48d7-93b4-000d25ea6a40" name="Expected Audit Log" type="LoopStart">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="15" y="-45" w="90" h="30" />
    <onsuccess>5a05aa32-1704-4ac7-9cc5-bea0d0ea81e5</onsuccess>
    <groupid>5832be50-df8f-449b-9381-50311ebcb8f0</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Expected Audit Log</loopdata>
  </stage>
  <stage stageid="6f09a53f-0716-493e-9847-7b7225804a7d" name="Expected Audit Log" type="LoopEnd">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="15" y="255" w="90" h="30" />
    <onsuccess>cd99e53e-5438-4b92-b0ad-dbf2dad0e8a6</onsuccess>
    <groupid>5832be50-df8f-449b-9381-50311ebcb8f0</groupid>
  </stage>
  <stage stageid="31d26f3e-9bf4-4e8b-be19-2388046626d2" name="Found Match?" type="Decision">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="15" y="135" w="90" h="30" />
    <decision expression="(InStr([Audit Log Table.Comments], [Expected Audit Log.Comments]) &gt; 0&#xA;AND&#xA;InStr([Audit Log Table.Narrative], [Expected Audit Log.Narrative]) &gt; 0)&#xA;OR&#xA;([Audit Log Table.Comments] = [Expected Audit Log.Comments]&#xA;AND&#xA;InStr([Audit Log Table.Narrative], [Expected Audit Log.Narrative]) &gt; 0)" />
    <ontrue>5ec20719-7d07-46dc-9945-334145724f0c</ontrue>
    <onfalse>9cf03e58-04a8-49d4-8bc3-45ee6d743e03</onfalse>
  </stage>
  <stage stageid="9f37c2ec-d7b8-42f2-8f1d-ec97674c15f3" name="Result Not Found" type="Exception">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="135" y="75" w="90" h="30" />
    <exception type="System Exception" detail="&quot;Following Record was not found in Audit log: Narrative containing &lt;&quot; &amp; [Expected Audit Log.Narrative] &amp; &quot;&gt; and Comment containing &lt;&quot; &amp; [Expected Audit Log.Comments] &amp; &quot;&gt;&quot;" />
  </stage>
  <stage stageid="5ec20719-7d07-46dc-9945-334145724f0c" name="Anchor1" type="Anchor">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="90" y="135" w="10" h="10" />
    <onsuccess>c9a9052c-e0e8-49ab-9f55-e4cfb37d2ffe</onsuccess>
  </stage>
  <stage stageid="c9a9052c-e0e8-49ab-9f55-e4cfb37d2ffe" name="Anchor2" type="Anchor">
    <subsheetid>72d26f9c-a788-4e28-89c1-e750c9ff83d6</subsheetid>
    <display x="90" y="255" w="10" h="10" />
    <onsuccess>6f09a53f-0716-493e-9847-7b7225804a7d</onsuccess>
  </stage>
  <stage stageid="6f6b7136-d633-46ea-8de8-e55b75555769" name="Anchor5" type="Anchor">
    <loginhibit onsuccess="true" />
    <display x="15" y="840" w="10" h="10" />
    <onsuccess>46a57562-32f6-466a-a0ed-34c020a00f8b</onsuccess>
  </stage>
  <stage stageid="46a57562-32f6-466a-a0ed-34c020a00f8b" name="Anchor9" type="Anchor">
    <loginhibit onsuccess="true" />
    <display x="180" y="840" w="10" h="10" />
    <onsuccess>0a70bbed-4844-42e4-9604-97c190e5b015</onsuccess>
  </stage>
  <stage stageid="bf13d306-d272-484f-b353-0f758172254f" name="External username" type="Data">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-150" y="225" w="120" h="30" />
    <datatype>text</datatype>
    <initialvalue xml:space="preserve">test.user@bpauth.onmicrosoft.com</initialvalue>
    <alwaysinit />
  </stage>
  <stage stageid="d1067c27-a5af-4fb9-8fcf-78d9c81961b6" name="External user password" type="Data">
    <subsheetid>20954af5-0b02-445f-b4a6-265382485681</subsheetid>
    <display x="-150" y="255" w="120" h="30" />
    <datatype>password</datatype>
    <initialvalueenc>3,25,1,85,29,70,29,22,44,69,69</initialvalueenc>
    <alwaysinit />
  </stage>
  <stage stageid="0a70bbed-4844-42e4-9604-97c190e5b015" name="Anchor10" type="Anchor">
    <loginhibit onsuccess="true" />
    <display x="285" y="840" w="10" h="10" />
    <onsuccess>bcf6a609-2a21-407a-a521-188ff8df7f82</onsuccess>
  </stage>
  <stage stageid="82e60fce-963f-4dd2-99f9-eda342a7ceb9" name="Note4" type="Note">
    <narrative>This will also rely on the authentication server being installed. configured in IIS and runningin the test environment</narrative>
    <display x="720" y="-75" w="360" h="30" />
  </stage>
  <stage stageid="b78e6007-1dfb-43e8-b516-bf5587976a1b" name="Log in with External provider" type="SubSheetInfo">
    <subsheetid>cbdd6df3-1cff-48f4-86c3-379b18de47cd</subsheetid>
    <display x="-195" y="-105" w="150" h="90" />
  </stage>
  <stage stageid="de4fcd8d-57bc-4c00-b817-4ccdee7ccc42" name="Start" type="Start">
    <subsheetid>cbdd6df3-1cff-48f4-86c3-379b18de47cd</subsheetid>
    <display x="15" y="-105" />
    <onsuccess>f60502a0-32f8-4b3b-9b05-2eaa8b8d5caa</onsuccess>
  </stage>
  <stage stageid="cd9626ea-967b-42d8-8065-ce10b5af406b" name="End" type="End">
    <subsheetid>cbdd6df3-1cff-48f4-86c3-379b18de47cd</subsheetid>
    <display x="15" y="150" />
  </stage>
  <stage stageid="f60502a0-32f8-4b3b-9b05-2eaa8b8d5caa" name="Enter Email" type="Action">
    <subsheetid>cbdd6df3-1cff-48f4-86c3-379b18de47cd</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="-15" w="90" h="30" />
    <inputs>
      <input type="text" name="Email address" friendlyname="Email address" narrative="enter relevant email address for external provider" expr="" />
    </inputs>
    <onsuccess>ca7e1c22-8782-4235-a69e-fff35b8d9d39</onsuccess>
    <resource object="Blue Prism - External Provider" action="Enter Email" />
  </stage>
  <stage stageid="ca7e1c22-8782-4235-a69e-fff35b8d9d39" name="Enter password" type="Action">
    <subsheetid>cbdd6df3-1cff-48f4-86c3-379b18de47cd</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="30" w="90" h="30" />
    <inputs>
      <input type="password" name="Password" friendlyname="Password" narrative="Enter Password for External Provider" expr="" />
    </inputs>
    <onsuccess>6dac059e-b114-4c14-bfb2-ce52f10673af</onsuccess>
    <resource object="Blue Prism - External Provider" action="Enter Password" />
  </stage>
  <stage stageid="6dac059e-b114-4c14-bfb2-ce52f10673af" name="Press stay signed in" type="Action">
    <subsheetid>cbdd6df3-1cff-48f4-86c3-379b18de47cd</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="90" w="90" h="30" />
    <onsuccess>cd9626ea-967b-42d8-8065-ce10b5af406b</onsuccess>
    <resource object="Blue Prism - External Provider" action="Press Stay Signed In" />
  </stage>
  <stage stageid="44029396-9b81-434f-ba8b-c6c2a78ca391" name="Sign In" type="Action">
    <subsheetid>ae5004f8-45e0-439a-9f14-38e1d1232c95</subsheetid>
    <loginhibit onsuccess="true" />
    <display x="15" y="30" w="90" h="30" />
    <inputs>
      <input type="text" name="Username" friendlyname="Username" expr="" />
      <input type="password" name="Password" friendlyname="Password" expr="" />
      <input type="password" name="New Password" friendlyname="New Password" narrative="If this is your first login it will prompt you to change the password." expr="" />
      <input type="flag" name="Expect Password Reset" friendlyname="Expect Password Reset" expr="" />
      <input type="flag" name="Expected License Wizard" friendlyname="Expected License Wizard" expr="" />
    </inputs>
    <outputs>
      <output type="text" name="Locale" friendlyname="Locale" narrative="Blue Prism Locale setting" stage="" />
    </outputs>
    <onsuccess>1a84c265-9d0c-4cb2-8b5b-c5cf45cd7df6</onsuccess>
    <resource object="Blue Prism" action="Sign In" />
  </stage>
  <stage stageid="2d8e6c91-a9e0-4918-a05f-246a8495d6b7" name="Log in with External provider" type="SubSheet">
    <loginhibit onsuccess="true" />
    <display x="375" y="210" w="90" h="30" />
    <onsuccess>18af9ee3-ddab-4f60-9ade-920121e0281a</onsuccess>
    <processid>cbdd6df3-1cff-48f4-86c3-379b18de47cd</processid>
  </stage>
  <stage stageid="e7b74536-dad9-4ead-a30d-cd009a75d0f7" name="Blue Prism::Sign in using another provider" type="Action">
    <loginhibit onsuccess="true" />
    <display x="375" y="90" w="90" h="30" />
    <onsuccess>09574ea7-2d58-4020-a949-9c21b96c5d7e</onsuccess>
    <resource object="Blue Prism" action="Sign in using another provider" />
  </stage>
  <stage stageid="09574ea7-2d58-4020-a949-9c21b96c5d7e" name="Blue Prism External Provider Object::Attach" type="Action">
    <loginhibit onsuccess="true" />
    <display x="375" y="150" w="90" h="30" />
    <onsuccess>2d8e6c91-a9e0-4918-a05f-246a8495d6b7</onsuccess>
    <resource object="Blue Prism - External Provider" action="Attach" />
  </stage>
  <stage stageid="76ab0cac-49d4-467d-9661-0ed2fb7a5d60" name="Note1" type="Note">
    <subsheetid>ae5004f8-45e0-439a-9f14-38e1d1232c95</subsheetid>
    <narrative>Log In to  Blue Prism</narrative>
    <display x="150" y="30" w="120" h="30" />
    <font family="Segoe UI" size="10" style="Bold" color="008000" />
    <onsuccess>44029396-9b81-434f-ba8b-c6c2a78ca391</onsuccess>
  </stage>
</process>