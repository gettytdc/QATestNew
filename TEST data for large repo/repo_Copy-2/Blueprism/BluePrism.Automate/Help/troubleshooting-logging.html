<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<link type="text/css" href="AutomateHelp.css" rel="stylesheet" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<title>Troubleshooting - Logging</title>
	<script type="text/javascript" src="script/imagezoom.js"></script>
</head>

<body class="slick troubleshooting">
	<div class="header">
		<h1 class="pagetitle">Troubleshooting</h1>
		<h2>Logging</h2>
    </div>
    <h3>Introduction</h3>
    <p>
        The purpose of diagnostic logging is to make more information available as the application executes. Errors and warnings logged can help pinpoint failures within 
        the system that might not be immediately obvious to an end-user. More verbose logging can be enabled temporarily to provide a useful picture of how an application 
        is behaving when troubleshooting a problem.
    </p>
    <p>
        Blue Prism uses a proven and reliable library called NLog to output and record log information. A user can fine-tune 
        the amount of information logged, either globally or in specific areas of the application. It is also possible to select from a variety of log output destinations, 
        including the Windows event log, text files etc.
    </p>
    <h3>Configuration</h3>
    <p>
        Blue Prism provides a standard log configuration that should be suitable for most environments. During installation, the configuration files will be installed to 
        a Blue Prism specific folder within the system's CommonApplicationData special folder, typically C:\ProgramData\Blue Prism Limited\Blue Prism. There are separate 
        configuration files for each application:
    </p>
    <ul>
        <li>Server.NLog.config for the server</li>
        <li>Automate.NLog.config for the interactive client / resource PC</li>
    </ul>
    <p>
        The default configuration directs log entries at "informational" level and upwards (including warnings, errors and fatal errors) to the Windows event log. 
        Text file logging is also configured but is only used for fatal errors by default, i.e., unhandled exceptions that resulted in an application crash. This ensures 
        that crash information is available, even if recording the error in the Windows Event Log fails.
    </p>
    <p>
        You should not need to amend the log configuration files yourself during normal usage of Blue Prism. Customer Services would normally provide alternative 
        log configuration files when investigating a problem with the product.
    </p>
    <p>
        Note that amending the logging configuration can affect the performance of the application and special care should be taken if amending within a production environment.
    </p>
    <p>For technically minded customers, the following links may provide useful further information.</p>
    <ul>
        <li><a href="https://github.com/NLog/NLog/wiki/Tutorial">NLog Github Repository - Basic Tutorial</a></li>
        <li><a href="https://nlog-project.org/config/">NLog Official Website - Configuration Options</a></li>
    </ul>
    <h3>Standard Configuration</h3>
    <p>
        Here are some further details about the standard configuration:
    </p>
    <h4>Windows Event Log</h4>
    <p>Log entries with a level of "Info" and upwards will be directed to the Windows Event Log.</p>
    <p>The event log settings are defined within the `&#60code&#62&#60target name="app-eventlog" ...&#60&#47code&#62` element. This is enabled via the following element at the end of the configuration:</p>
    <ul>
        <li>&#60code&#62&#60logger name="*" minlevel="Info" writeTo="app-eventlog" &#47&#62&#60&#47code&#62</li>
    </ul>
    <p>
        The main event log will be called "Blue Prism" (as in previous versions of Blue Prism). The event log sources will vary according to whether the information 
        is logged by a resource PC, the server or interactive client (also matching previous versions).
    </p>
    <h4>Log Files</h4>
    <p>
        Log files are configured to be written to a Blue Prism specific directory within the "CommonApplicationData" special folder, 
        typically C:\ProgramData\Blue Prism Limited\Blue Prism\Logs. Separate log files are generated based on the application that is running 
        (interactive client, server or resource PC), with a unique filename generated for each resource PC.
    </p>
    <p>
        Text file logging is limited to fatal errors by default, i.e., unhandled exceptions that resulted in an application crash. This ensures that crash 
        information is available, even if recording the error in the Windows Event Log fails. The expectation is that detailed text file logging would be enabled 
        only when more detailed debug information were required and that Customer Services would advise the customer on the configuration changes required. 
    </p>
    <p>
        The parameters for text file logging are defined within the &#60code&#62&#60target name="app-logfile" ...&#60&#47code&#62 element and controlled by the following 
        element at the end of the configuration file:
    </p>
    <ul>
        <li>&#60code&#62&#60logger name="*" minlevel="Fatal" writeTo="app-logfile" &#47&#62&#60&#47code&#62</li>
    </ul>
    <p>The standard configuration includes a sensible log archiving and rotation mechanism, which will archive files when they reach 10MB and retain a maximum of 10 archived files.</p>
    <p>Here's an example of a line from the log file:</p>
    <ul>
        <li>2019-01-14 13:07:59.2395 DEBUG BluePrism.AutomateAppCore.clsResourceConnection BP0188:8182 - Beginning update. Current state: Offline</li>
    </ul>
    <p>The format of this text that is defined in the standard configuration contains the following elements:</p>
    <ul>
        <li>Date and time(UTC)</li>
        <li>Log level (DEBUG, INFO, WARN, ERROR, FATAL)</li>
        <li>Logger name - this identifies the part of the application from which the log entry originates</li>
        <li>The log message</li>
        <li>Error details (supplied only when entry contains error information). This is logged on a new line below the main log entry.</li>
    </ul>
    <p>Text file logging at debug level for the entire application could be enabled by editing the configuration as follows:</p>
    <ul>
        <li>&#60code&#62&#60logger name="*" minlevel="Debug" writeTo="app-logfile" &#47&#62&#60&#47code&#62</li>
    </ul>
    <p>It would also be possible to limit debug level logging to a particular area of the application:</p>
    <ul>
        <li>&#60logger name="*" minlevel="Fatal" writeTo="app-logfile" &#47&#62</li>
        <li>&#60logger name="BluePrism.AutomateAppCore" minlevel="Debug" writeTo="app-logfile" &#47&#62</li>
    </ul>
</body>