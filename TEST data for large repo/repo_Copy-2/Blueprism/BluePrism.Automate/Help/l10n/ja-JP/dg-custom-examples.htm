<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Advanced setup">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml"/>
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
        <link rel="icon" sizes="2263x2263" href="../../Skins/Favicons/BP_Prism_RGB.png"/>
        <meta charset="utf-8"/>
        <meta name="description" content=""/>
        <meta name="author" content=""/><title>カスタム構成の例</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet"/>
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet"/>
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet"/>
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet"/>
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet"/>
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet"/>
        <link href="../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet"/>
        <link href="../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet"/>
        <link href="../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet"/>
        <link href="../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet"/>
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/select-language.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.feedback-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.previous-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="./AutomateHelp.css" rel="stylesheet"/>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
                                            <div>
                                                <h1 class="pagebreak">カスタム構成の例</h1>
                                                <p>すべてのイベントの完全なリストとイベント構造の詳細については、「<a href="dg-event-structure.htm">イベント構造</a>」を参照してください。</p>
                                                <h2 class="nomargin">条件文を使用して、イベントをフィルタリングし、出力を迂回させる</h2>
                                                <p>この例では、［イベント］［EventType］フィールドがイベントタイプを別のファイルに送信するために使用されています。送信先ファイルは、イベントタイプがセッションログ（EventType == 1）であるか、パブリッシュされたダッシュボード（EventType == 2）であるかに応じて決まります。</p>
                                                <p>カスタムオブジェクトデータのイベントタイプ（EventType == 3）は指定されないため、データゲートウェイエンジンにあるこの型のデータは［破棄済み］に含まれません。</p>
                                                <p class="code_sample">input {</p>
                                                <p class="code_sample">jdbc {</p>
                                                <p class="code_sample">jdbc_driver_library =&gt; "..\sqljdbc_4.2\enu\jre8\sqljdbc42.jar"</p>
                                                <p class="code_sample">jdbc_connection_string =&gt; "jdbc:sqlserver://SQL_SERVER_INSTANCE:1433;databaseName=BP_DATABASE;"</p>
                                                <p class="code_sample">jdbc_driver_class =&gt; "com.microsoft.sqlserver.jdbc.SQLServerDriver"</p>
                                                <p class="code_sample">jdbc_user =&gt; "&lt;%Data Gateways BP Database SQL User.username%&gt;"</p>
                                                <p class="code_sample">jdbc_password =&gt; "&lt;%Data Gateways BP Database SQL User.password%&gt;"</p>
                                                <p class="code_sample">statement =&gt; "delete top(3000)from BPADataPipelineInput with (rowlock, readpast) output deleted.eventdata"</p>
                                                <p class="code_sample">schedule =&gt; "*/3* * * * *"</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample"> </p>
                                                <p class="code_sample">filter {</p>
                                                <p class="code_sample">json{source =&gt; "eventdata"</p>
                                                <p class="code_sample">target =&gt; "event"}</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample"> </p>
                                                <p class="code_sample">output {</p>
                                                <p class="code_sample">if [event][EventType] == 1 {</p>
                                                <p class="code_sample">file {</p>
                                                <p class="code_sample">path =&gt; "C:\sessionlogs.txt"</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample">if [event][EventType] == 2 {</p>
                                                <p class="code_sample">file {</p>
                                                <p class="code_sample">path =&gt; "C:\dashboardlogs.txt"</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample">}</p>
                                                <h2 class="pagebreak">セッションログのプロセス名に基づいてイベントを送信する</h2>
                                                <p>この例では、セッションログのプロセス名に基づいてイベントが特定の出力に送信されます。出力には次の2種類あります。</p>
                                                <ul>
                                                    <li class="bullet_1" value="1">すべてのイベントはC:\allevents.txtテキストファイルに送信されます</li>
                                                    <li class="bullet_1" value="2">「<i>Process123</i>」プロセスのセッションログイベントは指定のHTTPエンドポイントに追加で送信されます。</li>
                                                </ul>
                                                <p class="code_sample">input {</p>
                                                <p class="code_sample">jdbc {</p>
                                                <p class="code_sample">jdbc_driver_library =&gt; "..\sqljdbc_4.2\enu\jre8\sqljdbc42.jar"</p>
                                                <p class="code_sample">jdbc_connection_string =&gt; "jdbc:sqlserver://SQL_SERVER_INSTANCE:1433;databaseName=BP_DATABASE;"</p>
                                                <p class="code_sample">jdbc_driver_class =&gt; "com.microsoft.sqlserver.jdbc.SQLServerDriver"</p>
                                                <p class="code_sample">jdbc_user =&gt; "&lt;%Data Gateways BP Database SQL User.username%&gt;"</p>
                                                <p class="code_sample">jdbc_password =&gt; "&lt;%Data Gateways BP Database SQL User.password%&gt;"</p>
                                                <p class="code_sample">statement =&gt; "delete top(3000)from BPADataPipelineInput with (rowlock, readpast) output deleted.eventdata"</p>
                                                <p class="code_sample">schedule =&gt; "*/3* * * * *"</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample"> </p>
                                                <p class="code_sample">filter {</p>
                                                <p class="code_sample">json{source =&gt; "eventdata"</p>
                                                <p class="code_sample">target =&gt; "event"}</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample"> </p>
                                                <p class="code_sample">output {</p>
                                                <p class="code_sample">if [event][EventType] == 1 and [event][EventData][ProcessName] == "Process123" {</p>
                                                <p class="code_sample">http {</p>
                                                <p class="code_sample">url =&gt; "https://abc.xyz.com/aservice/"</p>
                                                <p class="code_sample">http_method =&gt; "post"</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample">file {</p>
                                                <p class="code_sample">path =&gt; "C:\allevents.txt"</p>
                                                <p class="code_sample">}</p>
                                                <p class="code_sample">}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>