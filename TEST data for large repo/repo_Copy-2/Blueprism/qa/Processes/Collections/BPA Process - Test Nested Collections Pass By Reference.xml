<process name="Test Nested Collections Pass By Reference" version="1.0" bpversion="6.0.0.0" narrative="Ensures that the current (flawed) behaviour of passing a nested collection passes by reference if setting in a stage with no defined schema. Also makes sure that it passes by value if setting in a stage with a defined schema." byrefcollection="true" preferredid="0892b239-406b-4e0a-93a3-257061dd16f2">
  <view>
    <camerax>8</camerax>
    <cameray>-33</cameray>
    <zoom version="2">1.25</zoom>
  </view>
  <preconditions />
  <endpoint narrative="" />
  <subsheet subsheetid="eeea1499-349d-4e7f-8b73-16f39d468b12" type="Normal" published="False">
    <name>With Schema</name>
    <view>
      <camerax>0</camerax>
      <cameray>0</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="d556ac38-9eb3-44a5-97c9-a3c0a3f670cd" type="Normal" published="False">
    <name>Without Schema</name>
    <view>
      <camerax>0</camerax>
      <cameray>0</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <stage stageid="6c0db62a-1f75-428a-81c7-92f30a9d77fe" name="Start" type="Start">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>-180</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>be5073a7-7ab0-4b56-86a9-bc3c72b75865</onsuccess>
  </stage>
  <stage stageid="1d19e25c-9b87-43af-9174-f9ea2518a4f5" name="End" type="End">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1530</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="23404911-8c2f-4aff-aa86-739b0a6fa6f0" name="Stage1" type="ProcessInfo">
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>-105</displayy>
    <displaywidth>180</displaywidth>
    <displayheight>90</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="14b56d09-f621-4b3a-a2c9-45d640206b60" name="Candidates" type="Collection">
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>-15</displayy>
    <displaywidth>120</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
    <collectioninfo>
      <field name="Id" type="number" />
      <field name="Name" type="text" />
      <field name="Qualifications" type="collection" singlerow="1">
        <field name="Degrees" type="collection">
          <field name="Graduation Date" type="date" description="The date of the candidate's graduation" />
          <field name="Class" type="text" description="1; 2.1; 2.2; 2.3; 3; Pass" />
          <field name="Degree" type="text" description="Bsc / Msc / BA / MA / MPhil / etc." />
          <field name="Subject" type="text" description="The subject of the degree" />
        </field>
        <field name="A-Levels" type="collection">
          <field name="Date" type="date" description="The date of the A-Level qualification" />
          <field name="Subject" type="text" description="The subject of the A-Level" />
          <field name="Grade" type="text" description="A-F, N, something else. God, I can't remember, it was ages ago" />
        </field>
        <field name="GCSEs" type="collection">
          <field name="Date" type="date" description="The date the GCSE qualification was granted." />
          <field name="Subject" type="text" description="The subject of the GCSE" />
          <field name="Grade" type="text" description="A-F, A* I guess, though I was always annoyed that that came in after I got my GCSEs" />
        </field>
        <field name="Professional" type="collection">
          <field name="Name" type="text" description="The name of the qualification" />
          <field name="Date" type="date" description="The date that the qualification was attained" />
          <field name="Chartered" type="flag" description="Whether the qualification was issue from a professional body with a royal charter" />
        </field>
      </field>
      <field name="Work History" type="collection">
        <field name="Start Date" type="date" description="The date that the work period started" />
        <field name="End Date" type="date" description="The date that the work period ended" />
        <field name="Title" type="text" description="The title of the work project" />
        <field name="Role" type="text" description="The candidate's role within the work project" />
        <field name="Description" type="text" description="A description of the project and the candidate's contributions to it." />
      </field>
    </collectioninfo>
    <initialvalue>
      <row>
        <field name="Id" type="number" value="1" />
        <field name="Name" type="text" value="Semolina Blunt" />
        <field name="Qualifications" type="collection">
          <singlerow />
          <row>
            <field name="Degrees" type="collection" />
            <field name="A-Levels" type="collection" />
            <field name="GCSEs" type="collection">
              <row>
                <field name="Date" type="date" value="2002/06/07" />
                <field name="Subject" type="text" value="English Language" />
                <field name="Grade" type="text" value="B" />
              </row>
              <row>
                <field name="Date" type="date" value="2002/06/07" />
                <field name="Subject" type="text" value="English Literature" />
                <field name="Grade" type="text" value="A" />
              </row>
              <row>
                <field name="Date" type="date" value="2002/06/07" />
                <field name="Subject" type="text" value="English Lycanthropy" />
                <field name="Grade" type="text" value="D" />
              </row>
              <row>
                <field name="Date" type="date" value="2002/06/07" />
                <field name="Subject" type="text" value="English Lepidoptory" />
                <field name="Grade" type="text" value="C" />
              </row>
              <row>
                <field name="Date" type="date" value="2002/06/07" />
                <field name="Subject" type="text" value="English Lavatory" />
                <field name="Grade" type="text" value="A" />
              </row>
              <row>
                <field name="Date" type="date" value="2002/06/07" />
                <field name="Subject" type="text" value="English Liturgy" />
                <field name="Grade" type="text" value="F" />
              </row>
              <row>
                <field name="Date" type="date" value="2002/06/07" />
                <field name="Subject" type="text" value="English" />
                <field name="Grade" type="text" value="E" />
              </row>
            </field>
            <field name="Professional" type="collection" />
          </row>
        </field>
        <field name="Work History" type="collection">
          <row>
            <field name="Start Date" type="date" value="1998/08/12" />
            <field name="End Date" type="date" value="2004/05/30" />
            <field name="Title" type="text" value="Mr Blackadder's Household" />
            <field name="Role" type="text" value="Dogsbody" />
            <field name="Description" type="text" value="" />
          </row>
          <row>
            <field name="Start Date" type="date" value="2004/05/30" />
            <field name="End Date" type="date" value="2011/12/24" />
            <field name="Title" type="text" value="Mr Blackadder's Household" />
            <field name="Role" type="text" value="Guttersnipe" />
            <field name="Description" type="text" value="" />
          </row>
          <row>
            <field name="Start Date" type="date" value="2011/12/26" />
            <field name="End Date" type="date" value="" />
            <field name="Title" type="text" value="Mr Blackadder's Household" />
            <field name="Role" type="text" value="Skivvy" />
            <field name="Description" type="text" value="" />
          </row>
        </field>
      </row>
      <row>
        <field name="Id" type="number" value="2" />
        <field name="Name" type="text" value="Androgoné De Gaulle" />
        <field name="Qualifications" type="collection">
          <singlerow />
          <row>
            <field name="Degrees" type="collection">
              <row>
                <field name="Graduation Date" type="date" value="1998/07/15" />
                <field name="Class" type="text" value="2.1" />
                <field name="Degree" type="text" value="BA" />
                <field name="Subject" type="text" value="Computer Anarchy" />
              </row>
            </field>
            <field name="A-Levels" type="collection">
              <row>
                <field name="Date" type="date" value="1995/07/05" />
                <field name="Subject" type="text" value="Cephalectomy" />
                <field name="Grade" type="text" value="A" />
              </row>
              <row>
                <field name="Date" type="date" value="1995/07/05" />
                <field name="Subject" type="text" value="Palilogy" />
                <field name="Grade" type="text" value="B" />
              </row>
              <row>
                <field name="Date" type="date" value="1995/07/05" />
                <field name="Subject" type="text" value="Palilogy" />
                <field name="Grade" type="text" value="C" />
              </row>
            </field>
            <field name="GCSEs" type="collection" />
            <field name="Professional" type="collection" />
          </row>
        </field>
        <field name="Work History" type="collection" />
      </row>
      <row>
        <field name="Id" type="number" value="3" />
        <field name="Name" type="text" value="Polonium Von Trappe" />
        <field name="Qualifications" type="collection">
          <singlerow />
          <row>
            <field name="Degrees" type="collection">
              <row>
                <field name="Graduation Date" type="date" value="2009/07/12" />
                <field name="Class" type="text" value="3" />
                <field name="Degree" type="text" value="BSc" />
                <field name="Subject" type="text" value="Technical Pondering" />
              </row>
            </field>
            <field name="A-Levels" type="collection">
              <row>
                <field name="Date" type="date" value="2004/06/12" />
                <field name="Subject" type="text" value="Maths (Pure &amp; Applied)" />
                <field name="Grade" type="text" value="B" />
              </row>
              <row>
                <field name="Date" type="date" value="2004/06/12" />
                <field name="Subject" type="text" value="Physics" />
                <field name="Grade" type="text" value="C" />
              </row>
              <row>
                <field name="Date" type="date" value="2004/08/30" />
                <field name="Subject" type="text" value="Computing" />
                <field name="Grade" type="text" value="C" />
              </row>
            </field>
            <field name="GCSEs" type="collection" />
            <field name="Professional" type="collection" />
          </row>
        </field>
        <field name="Work History" type="collection" />
      </row>
    </initialvalue>
  </stage>
  <stage stageid="e3675367-ef47-497f-bbad-f3e45caf436f" name="Get GCSEs" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>105</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>d974c865-3d80-47e1-a215-6a192cd6a5a9</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs]" stage="GCSEs" />
  </stage>
  <stage stageid="fd5ee844-20fb-4f74-9019-d450a06e6db9" name="GCSEs" type="Collection">
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>30</displayy>
    <displaywidth>120</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
    <collectioninfo>
      <field name="Date" type="date" />
      <field name="Subject" type="text" />
      <field name="Grade" type="text" />
    </collectioninfo>
  </stage>
  <stage stageid="be5073a7-7ab0-4b56-86a9-bc3c72b75865" name="For Each Candidate" type="LoopStart">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>-135</displayy>
    <displaywidth>120</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Bold" color="0000FF" />
    <onsuccess>f42e7afa-82dd-45ab-8618-2b4d8e8c1d59</onsuccess>
    <groupid>edb3025e-34cd-4c59-a30e-49b18f7687a4</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Candidates</loopdata>
  </stage>
  <stage stageid="490d534f-931e-4d35-bbaa-26db9695b42f" name="Next Candidate" type="LoopEnd">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1485</displayy>
    <displaywidth>120</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Bold" color="0000FF" />
    <onsuccess>1d19e25c-9b87-43af-9174-f9ea2518a4f5</onsuccess>
    <groupid>edb3025e-34cd-4c59-a30e-49b18f7687a4</groupid>
  </stage>
  <stage stageid="f42e7afa-82dd-45ab-8618-2b4d8e8c1d59" name="For Each Qualification" type="LoopStart">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>-90</displayy>
    <displaywidth>90</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Bold" color="008000" />
    <onsuccess>a48eb50f-e9bd-4b75-84fd-d09c858afbdb</onsuccess>
    <groupid>db28a06c-fea9-4be4-8c90-c7b6efb5b70a</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Candidates.Qualifications</loopdata>
  </stage>
  <stage stageid="a0beaa0a-df71-45f0-aa48-67b55c981ef8" name="Next Qualification" type="LoopEnd">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1440</displayy>
    <displaywidth>90</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Bold" color="008000" />
    <onsuccess>490d534f-931e-4d35-bbaa-26db9695b42f</onsuccess>
    <groupid>db28a06c-fea9-4be4-8c90-c7b6efb5b70a</groupid>
  </stage>
  <stage stageid="d974c865-3d80-47e1-a215-6a192cd6a5a9" name="Set Date (GCSEs)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>150</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>2a79ba9c-f727-41bc-9dc8-46738597e99c</onsuccess>
    <calculation expression="MakeDate(14,12,1900)" stage="GCSEs.Date" />
  </stage>
  <stage stageid="8f758649-e663-4c43-9312-def918e4059f" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>60</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>e3675367-ef47-497f-bbad-f3e45caf436f</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 1" />
  </stage>
  <stage stageid="a48eb50f-e9bd-4b75-84fd-d09c858afbdb" name="For Each GCSE" type="LoopStart">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>-45</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Bold" color="800000" />
    <onsuccess>aa86aa48-86e0-4f2c-a200-407574713a3f</onsuccess>
    <groupid>b750fa44-f2a4-429a-9bb9-85f6ef4f2378</groupid>
    <looptype>ForEach</looptype>
    <loopdata>Candidates.Qualifications.GCSEs</loopdata>
  </stage>
  <stage stageid="78afa833-e8dc-42fd-9c9c-409eaa957ae1" name="Next GCSE" type="LoopEnd">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1395</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Bold" color="800000" />
    <onsuccess>a0beaa0a-df71-45f0-aa48-67b55c981ef8</onsuccess>
    <groupid>b750fa44-f2a4-429a-9bb9-85f6ef4f2378</groupid>
  </stage>
  <stage stageid="6cf81585-086a-4926-b1ca-7d7d46d58525" name="Date 1" type="Data">
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>120</displayy>
    <displaywidth>120</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>date</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="2a79ba9c-f727-41bc-9dc8-46738597e99c" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>195</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>93599be1-5dac-436e-ba2e-19be15e24027</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 2" />
  </stage>
  <stage stageid="d5b74e52-635d-4d83-a342-97e2558c64d4" name="Date 2" type="Data">
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>150</displayy>
    <displaywidth>120</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>date</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="c46541d6-27e9-4578-a320-7c4741c31bdc" name="Get Qualifications" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>360</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>aa45698b-0767-4116-adab-0dc0a5ffe4c5</onsuccess>
    <calculation expression="[Candidates.Qualifications]" stage="Qualifications" />
  </stage>
  <stage stageid="a0325d47-a905-4f80-b625-cdcbefe1929d" name="Qualifications" type="Collection">
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>75</displayy>
    <displaywidth>120</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="aa45698b-0767-4116-adab-0dc0a5ffe4c5" name="Set Date (Qualifications)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>405</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>516acc88-e2ad-4142-8e51-3cc4255cd6b9</onsuccess>
    <calculation expression="MakeDate(14,12,1981)" stage="Qualifications.GCSEs.Date" />
  </stage>
  <stage stageid="93599be1-5dac-436e-ba2e-19be15e24027" name="Date 1 = Date 2?" type="Decision">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>240</displayy>
    <displaywidth>90</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <decision expression="[Date 1] = [Date 2]" />
    <ontrue>2994e807-3541-4be3-827c-3267712b5979</ontrue>
    <onfalse>21116887-24be-4712-90e6-fb6930ad1a38</onfalse>
  </stage>
  <stage stageid="1b21e008-1901-4182-a0a7-76a5310b0e15" name="Date 1 = Date 2?" type="Decision">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>495</displayy>
    <displaywidth>90</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <decision expression="[Date 1] = [Date 2]" />
    <ontrue>90cf7393-13e3-4bc6-a8cb-3ae0e3218c4b</ontrue>
    <onfalse>44080aaa-406b-432f-8cc2-7df91cd22f04</onfalse>
  </stage>
  <stage stageid="21116887-24be-4712-90e6-fb6930ad1a38" name="FAIL" type="Exception">
    <narrative>
    </narrative>
    <displayx>105</displayx>
    <displayy>240</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <exception type="PassByReferenceException" detail="&quot;Setting an inner collection to a stage with a defined schema passed by reference instead of value. Index: &quot; &amp; [Index]" />
  </stage>
  <stage stageid="90cf7393-13e3-4bc6-a8cb-3ae0e3218c4b" name="FAIL" type="Exception">
    <narrative>
    </narrative>
    <displayx>105</displayx>
    <displayy>495</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <exception type="PassByReferenceException" detail="&quot;Setting an inner collection to a stage with no schema should pass by reference - this passed by value. Index: &quot; &amp; [Index]" />
  </stage>
  <stage stageid="0cbd6b5a-f5ef-4a35-a94d-c54a304c2dfd" name="Test with defined schema in target" type="Block">
    <narrative>
    </narrative>
    <displayx>-120</displayx>
    <displayy>30</displayy>
    <displaywidth>180</displaywidth>
    <displayheight>240</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="a5f697c1-cb0d-4e48-ab9f-30e518e896f9" name="Test with no schema in target" type="Block">
    <narrative>
    </narrative>
    <displayx>-120</displayx>
    <displayy>285</displayy>
    <displaywidth>180</displaywidth>
    <displayheight>240</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="2b67ed0a-7a5f-4dbf-9492-72d73791d808" name="Index" type="Data">
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>180</displayy>
    <displaywidth>120</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>number</datatype>
    <initialvalue>0</initialvalue>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="aa86aa48-86e0-4f2c-a200-407574713a3f" name="Index++" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>0</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>8f758649-e663-4c43-9312-def918e4059f</onsuccess>
    <calculation expression="1 + [Index]" stage="Index" />
  </stage>
  <stage stageid="516acc88-e2ad-4142-8e51-3cc4255cd6b9" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>450</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>1b21e008-1901-4182-a0a7-76a5310b0e15</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 2" />
  </stage>
  <stage stageid="f8e2e9cd-170b-4893-ab25-becfa9567991" name="Test subpage with defined schema in target" type="Block">
    <narrative>
    </narrative>
    <displayx>-120</displayx>
    <displayy>540</displayy>
    <displaywidth>180</displaywidth>
    <displayheight>195</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="e4ae4ab5-6543-464b-a471-02ee3c5658ee" name="Date 1 = Date 2?" type="Decision">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>705</displayy>
    <displaywidth>90</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <decision expression="[Date 1] = [Date 2]" />
    <ontrue>44984540-82ec-42e3-8476-8afa06eb1507</ontrue>
    <onfalse>515c3544-4076-46d9-920b-4a535701a6cb</onfalse>
  </stage>
  <stage stageid="515c3544-4076-46d9-920b-4a535701a6cb" name="FAIL" type="Exception">
    <narrative>
    </narrative>
    <displayx>105</displayx>
    <displayy>705</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <exception type="PassByReferenceException" detail="&quot;Setting an inner collection via a subpage input to a stage with a defined schema passed by reference instead of value. Index: &quot; &amp; [Index]" />
  </stage>
  <stage stageid="98e72945-c807-4ea3-aad6-5aedfab19cb4" name="With Schema" type="SubSheet">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>615</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <inputs>
      <input type="collection" name="GCSEs" narrative="GCSEs collection stage has schema" expr="[Candidates.Qualifications.GCSEs]" />
    </inputs>
    <onsuccess>83681d56-6554-4926-ac91-9f3b4f252217</onsuccess>
    <processid>eeea1499-349d-4e7f-8b73-16f39d468b12</processid>
  </stage>
  <stage stageid="83681d56-6554-4926-ac91-9f3b4f252217" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>660</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>e4ae4ab5-6543-464b-a471-02ee3c5658ee</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 2" />
  </stage>
  <stage stageid="0053e893-892d-4439-8e7e-547d586525d2" name="Test subpage with no schema in target" type="Block">
    <narrative>
    </narrative>
    <displayx>-120</displayx>
    <displayy>750</displayy>
    <displaywidth>180</displaywidth>
    <displayheight>195</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="7cbe14af-d4ad-42d8-b696-3b2bfd5374ac" name="Date 1 = Date 2?" type="Decision">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>915</displayy>
    <displaywidth>90</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <decision expression="[Date 1] = [Date 2]" />
    <ontrue>5315b675-e25b-47a7-b1dc-b612ce27f823</ontrue>
    <onfalse>0d41b005-af03-4604-88f3-5efe7d3026ca</onfalse>
  </stage>
  <stage stageid="5315b675-e25b-47a7-b1dc-b612ce27f823" name="FAIL" type="Exception">
    <narrative>
    </narrative>
    <displayx>105</displayx>
    <displayy>915</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <exception type="PassByReferenceException" detail="&quot;Setting an inner collection via a subpage input to a stage with no schema should pass by reference - this passed by value. Index: &quot; &amp; [Index]" />
  </stage>
  <stage stageid="582a8c15-0737-4004-9c5d-1679ece9c6f8" name="Without Schema" type="SubSheet">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>825</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <inputs>
      <input type="collection" name="Qualifications" narrative="Collection stage has no schema" expr="[Candidates.Qualifications]" />
    </inputs>
    <onsuccess>e8dc9403-1f48-445e-8746-9c3951a891e4</onsuccess>
    <processid>d556ac38-9eb3-44a5-97c9-a3c0a3f670cd</processid>
  </stage>
  <stage stageid="e8dc9403-1f48-445e-8746-9c3951a891e4" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>870</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>7cbe14af-d4ad-42d8-b696-3b2bfd5374ac</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 2" />
  </stage>
  <stage stageid="3f3c6062-a43e-49c6-8ccf-5bca60c87a71" name="Test action with defined schema in target" type="Block">
    <narrative>
    </narrative>
    <displayx>-120</displayx>
    <displayy>960</displayy>
    <displaywidth>180</displaywidth>
    <displayheight>195</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="2450f1b9-23d0-4ab8-b311-4c9349c1a300" name="Date 1 = Date 2?" type="Decision">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1125</displayy>
    <displaywidth>90</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <decision expression="[Date 1] = [Date 2]" />
    <ontrue>cdfb24fa-ea19-4c74-a73b-46a3e06634ad</ontrue>
    <onfalse>69b975d3-b193-4ef5-ab35-489fe0f2afb4</onfalse>
  </stage>
  <stage stageid="69b975d3-b193-4ef5-ab35-489fe0f2afb4" name="FAIL" type="Exception">
    <narrative>
    </narrative>
    <displayx>105</displayx>
    <displayy>1125</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <exception type="PassByReferenceException" detail="&quot;Setting an inner collection via an action input to a stage with a defined schema passed by reference instead of value. Index: &quot; &amp; [Index]" />
  </stage>
  <stage stageid="56b0b292-efed-4800-b241-e7548568835c" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1080</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>2450f1b9-23d0-4ab8-b311-4c9349c1a300</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 2" />
  </stage>
  <stage stageid="4c108bd4-0bb6-49f8-91b3-3182420878e2" name="Test action with no schema in target" type="Block">
    <narrative>
    </narrative>
    <displayx>-120</displayx>
    <displayy>1170</displayy>
    <displaywidth>180</displaywidth>
    <displayheight>195</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="7FB2E5" />
  </stage>
  <stage stageid="296abe91-dc5f-49c2-8086-9b0a7abf036c" name="Date 1 = Date 2?" type="Decision">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1335</displayy>
    <displaywidth>90</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <decision expression="[Date 1] = [Date 2]" />
    <ontrue>54a86f7e-3fca-45fb-9cfc-00ed2b547c10</ontrue>
    <onfalse>78afa833-e8dc-42fd-9c9c-409eaa957ae1</onfalse>
  </stage>
  <stage stageid="54a86f7e-3fca-45fb-9cfc-00ed2b547c10" name="FAIL" type="Exception">
    <narrative>
    </narrative>
    <displayx>105</displayx>
    <displayy>1335</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <exception type="PassByReferenceException" detail="&quot;Setting an inner collection via an action input to a stage with no schema should pass by reference - this passed by value. Index: &quot; &amp; [Index]" />
  </stage>
  <stage stageid="35941478-8c19-40a5-b55b-25b1a5b8a066" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1290</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>296abe91-dc5f-49c2-8086-9b0a7abf036c</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 2" />
  </stage>
  <stage stageid="5e2f5d7b-9231-4f1d-b69f-f84f587fc516" name="With Schema" type="Action">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1035</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <inputs>
      <input type="collection" name="GCSEs" narrative="GCSEs collection stage has schema" expr="[Candidates.Qualifications.GCSEs]" />
    </inputs>
    <onsuccess>56b0b292-efed-4800-b241-e7548568835c</onsuccess>
    <resource object="Pass By Value Or Reference" action="With Schema" />
  </stage>
  <stage stageid="68df130c-d9d4-4841-ba19-014e57d73628" name="Without Schema" type="Action">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1245</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <inputs>
      <input type="collection" name="Qualifications" narrative="Collection stage has no schema" expr="[Candidates.Qualifications]" />
    </inputs>
    <onsuccess>35941478-8c19-40a5-b55b-25b1a5b8a066</onsuccess>
    <resource object="Pass By Value Or Reference" action="Without Schema" />
  </stage>
  <stage stageid="2dc46bf6-1d0b-4cb3-a4c7-5e69ee65120d" name="With Schema" type="SubSheetInfo">
    <subsheetid>eeea1499-349d-4e7f-8b73-16f39d468b12</subsheetid>
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>-105</displayy>
    <displaywidth>150</displaywidth>
    <displayheight>90</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="90ac0749-87af-47c9-8e99-7622aa4d0e7c" name="Start" type="Start">
    <subsheetid>eeea1499-349d-4e7f-8b73-16f39d468b12</subsheetid>
    <narrative>
    </narrative>
    <displayx>-60</displayx>
    <displayy>-135</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <inputs>
      <input type="collection" name="GCSEs" narrative="GCSEs collection stage has schema" stage="GCSEs" />
    </inputs>
    <onsuccess>707f8c5a-e30e-40db-ba87-e30c9df5f3f6</onsuccess>
  </stage>
  <stage stageid="309eea00-0b69-4afc-90ad-ae6ea76d3d61" name="End" type="End">
    <subsheetid>eeea1499-349d-4e7f-8b73-16f39d468b12</subsheetid>
    <narrative>
    </narrative>
    <displayx>-60</displayx>
    <displayy>-45</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="707f8c5a-e30e-40db-ba87-e30c9df5f3f6" name="Set Date (GCSEs)" type="Calculation">
    <subsheetid>eeea1499-349d-4e7f-8b73-16f39d468b12</subsheetid>
    <narrative>
    </narrative>
    <displayx>-60</displayx>
    <displayy>-90</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>309eea00-0b69-4afc-90ad-ae6ea76d3d61</onsuccess>
    <calculation expression="MakeDate(14,12,1902)" stage="GCSEs.Date" />
  </stage>
  <stage stageid="82d2a543-cebb-473f-84cb-2d53cb2713e6" name="GCSEs" type="Collection">
    <subsheetid>eeea1499-349d-4e7f-8b73-16f39d468b12</subsheetid>
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>-30</displayy>
    <displaywidth>120</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
    <collectioninfo>
      <field name="Date" type="date" />
      <field name="Subject" type="text" />
      <field name="Grade" type="text" />
    </collectioninfo>
  </stage>
  <stage stageid="349ce974-b148-4390-8fb4-1adbf678d317" name="Without Schema" type="SubSheetInfo">
    <subsheetid>d556ac38-9eb3-44a5-97c9-a3c0a3f670cd</subsheetid>
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>-105</displayy>
    <displaywidth>150</displaywidth>
    <displayheight>90</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="c40af153-98c0-48d4-8b4c-fea131f98ec0" name="Start" type="Start">
    <subsheetid>d556ac38-9eb3-44a5-97c9-a3c0a3f670cd</subsheetid>
    <narrative>
    </narrative>
    <displayx>-60</displayx>
    <displayy>-135</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <inputs>
      <input type="collection" name="Qualifications" narrative="Collection stage has no schema" stage="Qualifications" />
    </inputs>
    <onsuccess>9508443a-656b-4703-93a1-5f0e0506f7e6</onsuccess>
  </stage>
  <stage stageid="ac266adb-34e1-4dd1-95d3-9388582e1f3c" name="End" type="End">
    <subsheetid>d556ac38-9eb3-44a5-97c9-a3c0a3f670cd</subsheetid>
    <narrative>
    </narrative>
    <displayx>-60</displayx>
    <displayy>-45</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="fd8b7fa7-1ae4-42f0-81b6-9d07aa2e146d" name="Qualifications" type="Collection">
    <subsheetid>d556ac38-9eb3-44a5-97c9-a3c0a3f670cd</subsheetid>
    <narrative>
    </narrative>
    <displayx>-180</displayx>
    <displayy>-30</displayy>
    <displaywidth>120</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="9508443a-656b-4703-93a1-5f0e0506f7e6" name="Set Date (Qualifications)" type="Calculation">
    <subsheetid>d556ac38-9eb3-44a5-97c9-a3c0a3f670cd</subsheetid>
    <narrative>
    </narrative>
    <displayx>-60</displayx>
    <displayy>-90</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>ac266adb-34e1-4dd1-95d3-9388582e1f3c</onsuccess>
    <calculation expression="MakeDate(14,12,1903)" stage="Qualifications.GCSEs.Date" />
  </stage>
  <stage stageid="44080aaa-406b-432f-8cc2-7df91cd22f04" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>570</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>98e72945-c807-4ea3-aad6-5aedfab19cb4</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 1" />
  </stage>
  <stage stageid="0f93059d-739c-483f-9585-9dea2c327b84" name="Note1" type="Note">
    <narrative>1900</narrative>
    <displayx>120</displayx>
    <displayy>120</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>d974c865-3d80-47e1-a215-6a192cd6a5a9</onsuccess>
  </stage>
  <stage stageid="a6d633f5-4417-4ae3-b764-2611c3db92b0" name="Note1" type="Note">
    <narrative>1901</narrative>
    <displayx>120</displayx>
    <displayy>375</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>aa45698b-0767-4116-adab-0dc0a5ffe4c5</onsuccess>
  </stage>
  <stage stageid="8b302ce3-8b50-4f6d-a142-63af4af5949d" name="Note1" type="Note">
    <narrative>1902</narrative>
    <displayx>120</displayx>
    <displayy>585</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>98e72945-c807-4ea3-aad6-5aedfab19cb4</onsuccess>
  </stage>
  <stage stageid="efd349f2-022c-45be-a1da-78ed235f4293" name="Note1" type="Note">
    <narrative>1903</narrative>
    <displayx>120</displayx>
    <displayy>795</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>582a8c15-0737-4004-9c5d-1679ece9c6f8</onsuccess>
  </stage>
  <stage stageid="44984540-82ec-42e3-8476-8afa06eb1507" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>780</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>582a8c15-0737-4004-9c5d-1679ece9c6f8</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 1" />
  </stage>
  <stage stageid="0d41b005-af03-4604-88f3-5efe7d3026ca" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>990</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>5e2f5d7b-9231-4f1d-b69f-f84f587fc516</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 1" />
  </stage>
  <stage stageid="0f195102-b051-4f5a-8b7e-5fc5cce0b815" name="Note1" type="Note">
    <narrative>1951</narrative>
    <displayx>120</displayx>
    <displayy>1005</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>5e2f5d7b-9231-4f1d-b69f-f84f587fc516</onsuccess>
  </stage>
  <stage stageid="4c9166d2-d47e-4e0e-b637-192bf0706743" name="Note1" type="Note">
    <narrative>1952</narrative>
    <displayx>120</displayx>
    <displayy>1215</displayy>
    <displaywidth>30</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>68df130c-d9d4-4841-ba19-014e57d73628</onsuccess>
  </stage>
  <stage stageid="cdfb24fa-ea19-4c74-a73b-46a3e06634ad" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>1200</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>68df130c-d9d4-4841-ba19-014e57d73628</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 1" />
  </stage>
  <stage stageid="2994e807-3541-4be3-827c-3267712b5979" name="Get Date (Candidates)" type="Calculation">
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>315</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>c46541d6-27e9-4578-a320-7c4741c31bdc</onsuccess>
    <calculation expression="[Candidates.Qualifications.GCSEs.Date]" stage="Date 1" />
  </stage>
</process>